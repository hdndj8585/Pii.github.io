import{a as Pr,i as Ke,r as Na,c as Q,e as wi,t as Ed,f as xd,g as Cd}from"./index.1c0a0b17.js";import{e as Si,b as Ei}from"./index.7bbafb82.js";function kd(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(n,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}var La={},fn={},xi={};Object.defineProperty(xi,"__esModule",{value:!0});xi.walletLogo=void 0;const Ad=(t,e)=>{let r;switch(t){case"standard":return r=e,`data:image/svg+xml,%3Csvg width='${e}' height='${r}' viewBox='0 0 1024 1024' fill='none' xmlns='http://www.w3.org/2000/svg'%3E %3Crect width='1024' height='1024' fill='%230052FF'/%3E %3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M152 512C152 710.823 313.177 872 512 872C710.823 872 872 710.823 872 512C872 313.177 710.823 152 512 152C313.177 152 152 313.177 152 512ZM420 396C406.745 396 396 406.745 396 420V604C396 617.255 406.745 628 420 628H604C617.255 628 628 617.255 628 604V420C628 406.745 617.255 396 604 396H420Z' fill='white'/%3E %3C/svg%3E `;case"circle":return r=e,`data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='${e}' height='${r}' viewBox='0 0 999.81 999.81'%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%230052fe;%7D.cls-2%7Bfill:%23fefefe;%7D.cls-3%7Bfill:%230152fe;%7D%3C/style%3E%3C/defs%3E%3Cpath class='cls-1' d='M655-115.9h56c.83,1.59,2.36.88,3.56,1a478,478,0,0,1,75.06,10.42C891.4-81.76,978.33-32.58,1049.19,44q116.7,126,131.94,297.61c.38,4.14-.34,8.53,1.78,12.45v59c-1.58.84-.91,2.35-1,3.56a482.05,482.05,0,0,1-10.38,74.05c-24,106.72-76.64,196.76-158.83,268.93s-178.18,112.82-287.2,122.6c-4.83.43-9.86-.25-14.51,1.77H654c-1-1.68-2.69-.91-4.06-1a496.89,496.89,0,0,1-105.9-18.59c-93.54-27.42-172.78-77.59-236.91-150.94Q199.34,590.1,184.87,426.58c-.47-5.19.25-10.56-1.77-15.59V355c1.68-1,.91-2.7,1-4.06a498.12,498.12,0,0,1,18.58-105.9c26-88.75,72.64-164.9,140.6-227.57q126-116.27,297.21-131.61C645.32-114.57,650.35-113.88,655-115.9Zm377.92,500c0-192.44-156.31-349.49-347.56-350.15-194.13-.68-350.94,155.13-352.29,347.42-1.37,194.55,155.51,352.1,348.56,352.47C876.15,734.23,1032.93,577.84,1032.93,384.11Z' transform='translate(-183.1 115.9)'/%3E%3Cpath class='cls-2' d='M1032.93,384.11c0,193.73-156.78,350.12-351.29,349.74-193-.37-349.93-157.92-348.56-352.47C334.43,189.09,491.24,33.28,685.37,34,876.62,34.62,1032.94,191.67,1032.93,384.11ZM683,496.81q43.74,0,87.48,0c15.55,0,25.32-9.72,25.33-25.21q0-87.48,0-175c0-15.83-9.68-25.46-25.59-25.46H595.77c-15.88,0-25.57,9.64-25.58,25.46q0,87.23,0,174.45c0,16.18,9.59,25.7,25.84,25.71Z' transform='translate(-183.1 115.9)'/%3E%3Cpath class='cls-3' d='M683,496.81H596c-16.25,0-25.84-9.53-25.84-25.71q0-87.23,0-174.45c0-15.82,9.7-25.46,25.58-25.46H770.22c15.91,0,25.59,9.63,25.59,25.46q0,87.47,0,175c0,15.49-9.78,25.2-25.33,25.21Q726.74,496.84,683,496.81Z' transform='translate(-183.1 115.9)'/%3E%3C/svg%3E`;case"text":return r=(.1*e).toFixed(2),`data:image/svg+xml,%3Csvg width='${e}' height='${r}' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 528.15 53.64'%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%230052ff;%7D%3C/style%3E%3C/defs%3E%3Ctitle%3ECoinbase_Wordmark_SubBrands_ALL%3C/title%3E%3Cpath class='cls-1' d='M164.45,15a15,15,0,0,0-11.74,5.4V0h-8.64V52.92h8.5V48a15,15,0,0,0,11.88,5.62c10.37,0,18.21-8.21,18.21-19.3S174.67,15,164.45,15Zm-1.3,30.67c-6.19,0-10.73-4.83-10.73-11.31S157,23,163.22,23s10.66,4.82,10.66,11.37S169.34,45.65,163.15,45.65Zm83.31-14.91-6.34-.93c-3-.43-5.18-1.44-5.18-3.82,0-2.59,2.8-3.89,6.62-3.89,4.18,0,6.84,1.8,7.42,4.76h8.35c-.94-7.49-6.7-11.88-15.55-11.88-9.15,0-15.2,4.68-15.2,11.3,0,6.34,4,10,12,11.16l6.33.94c3.1.43,4.83,1.65,4.83,4,0,2.95-3,4.17-7.2,4.17-5.12,0-8-2.09-8.43-5.25h-8.49c.79,7.27,6.48,12.38,16.84,12.38,9.44,0,15.7-4.32,15.7-11.74C258.12,35.28,253.58,31.82,246.46,30.74Zm-27.65-2.3c0-8.06-4.9-13.46-15.27-13.46-9.79,0-15.26,5-16.34,12.6h8.57c.43-3,2.73-5.4,7.63-5.4,4.39,0,6.55,1.94,6.55,4.32,0,3.09-4,3.88-8.85,4.39-6.63.72-14.84,3-14.84,11.66,0,6.7,5,11,12.89,11,6.19,0,10.08-2.59,12-6.7.28,3.67,3,6.05,6.84,6.05h5v-7.7h-4.25Zm-8.5,9.36c0,5-4.32,8.64-9.57,8.64-3.24,0-6-1.37-6-4.25,0-3.67,4.39-4.68,8.42-5.11s6-1.22,7.13-2.88ZM281.09,15c-11.09,0-19.23,8.35-19.23,19.36,0,11.6,8.72,19.3,19.37,19.3,9,0,16.06-5.33,17.86-12.89h-9c-1.3,3.31-4.47,5.19-8.71,5.19-5.55,0-9.72-3.46-10.66-9.51H299.3V33.12C299.3,22.46,291.53,15,281.09,15Zm-9.87,15.26c1.37-5.18,5.26-7.7,9.72-7.7,4.9,0,8.64,2.8,9.51,7.7ZM19.3,23a9.84,9.84,0,0,1,9.5,7h9.14c-1.65-8.93-9-15-18.57-15A19,19,0,0,0,0,34.34c0,11.09,8.28,19.3,19.37,19.3,9.36,0,16.85-6,18.5-15H28.8a9.75,9.75,0,0,1-9.43,7.06c-6.27,0-10.66-4.83-10.66-11.31S13,23,19.3,23Zm41.11-8A19,19,0,0,0,41,34.34c0,11.09,8.28,19.3,19.37,19.3A19,19,0,0,0,79.92,34.27C79.92,23.33,71.64,15,60.41,15Zm.07,30.67c-6.19,0-10.73-4.83-10.73-11.31S54.22,23,60.41,23s10.8,4.89,10.8,11.37S66.67,45.65,60.48,45.65ZM123.41,15c-5.62,0-9.29,2.3-11.45,5.54V15.7h-8.57V52.92H112V32.69C112,27,115.63,23,121,23c5,0,8.06,3.53,8.06,8.64V52.92h8.64V31C137.66,21.6,132.84,15,123.41,15ZM92,.36a5.36,5.36,0,0,0-5.55,5.47,5.55,5.55,0,0,0,11.09,0A5.35,5.35,0,0,0,92,.36Zm-9.72,23h5.4V52.92h8.64V15.7h-14Zm298.17-7.7L366.2,52.92H372L375.29,44H392l3.33,8.88h6L386.87,15.7ZM377,39.23l6.45-17.56h.1l6.56,17.56ZM362.66,15.7l-7.88,29h-.11l-8.14-29H341l-8,28.93h-.1l-8-28.87H319L329.82,53h5.45l8.19-29.24h.11L352,53h5.66L368.1,15.7Zm135.25,0v4.86h12.32V52.92h5.6V20.56h12.32V15.7ZM467.82,52.92h25.54V48.06H473.43v-12h18.35V31.35H473.43V20.56h19.93V15.7H467.82ZM443,15.7h-5.6V52.92h24.32V48.06H443Zm-30.45,0h-5.61V52.92h24.32V48.06H412.52Z'/%3E%3C/svg%3E`;case"textWithLogo":return r=(.25*e).toFixed(2),`data:image/svg+xml,%3Csvg width='${e}' height='${r}' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 308.44 77.61'%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%230052ff;%7D%3C/style%3E%3C/defs%3E%3Cpath class='cls-1' d='M142.94,20.2l-7.88,29H135l-8.15-29h-5.55l-8,28.93h-.11l-8-28.87H99.27l10.84,37.27h5.44l8.2-29.24h.1l8.41,29.24h5.66L148.39,20.2Zm17.82,0L146.48,57.42h5.82l3.28-8.88h16.65l3.34,8.88h6L167.16,20.2Zm-3.44,23.52,6.45-17.55h.11l6.56,17.55ZM278.2,20.2v4.86h12.32V57.42h5.6V25.06h12.32V20.2ZM248.11,57.42h25.54V52.55H253.71V40.61h18.35V35.85H253.71V25.06h19.94V20.2H248.11ZM223.26,20.2h-5.61V57.42H242V52.55H223.26Zm-30.46,0h-5.6V57.42h24.32V52.55H192.8Zm-154,38A19.41,19.41,0,1,1,57.92,35.57H77.47a38.81,38.81,0,1,0,0,6.47H57.92A19.39,19.39,0,0,1,38.81,58.21Z'/%3E%3C/svg%3E`;case"textLight":return r=(.1*e).toFixed(2),`data:image/svg+xml,%3Csvg width='${e}' height='${r}' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 528.15 53.64'%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%23fefefe;%7D%3C/style%3E%3C/defs%3E%3Ctitle%3ECoinbase_Wordmark_SubBrands_ALL%3C/title%3E%3Cpath class='cls-1' d='M164.45,15a15,15,0,0,0-11.74,5.4V0h-8.64V52.92h8.5V48a15,15,0,0,0,11.88,5.62c10.37,0,18.21-8.21,18.21-19.3S174.67,15,164.45,15Zm-1.3,30.67c-6.19,0-10.73-4.83-10.73-11.31S157,23,163.22,23s10.66,4.82,10.66,11.37S169.34,45.65,163.15,45.65Zm83.31-14.91-6.34-.93c-3-.43-5.18-1.44-5.18-3.82,0-2.59,2.8-3.89,6.62-3.89,4.18,0,6.84,1.8,7.42,4.76h8.35c-.94-7.49-6.7-11.88-15.55-11.88-9.15,0-15.2,4.68-15.2,11.3,0,6.34,4,10,12,11.16l6.33.94c3.1.43,4.83,1.65,4.83,4,0,2.95-3,4.17-7.2,4.17-5.12,0-8-2.09-8.43-5.25h-8.49c.79,7.27,6.48,12.38,16.84,12.38,9.44,0,15.7-4.32,15.7-11.74C258.12,35.28,253.58,31.82,246.46,30.74Zm-27.65-2.3c0-8.06-4.9-13.46-15.27-13.46-9.79,0-15.26,5-16.34,12.6h8.57c.43-3,2.73-5.4,7.63-5.4,4.39,0,6.55,1.94,6.55,4.32,0,3.09-4,3.88-8.85,4.39-6.63.72-14.84,3-14.84,11.66,0,6.7,5,11,12.89,11,6.19,0,10.08-2.59,12-6.7.28,3.67,3,6.05,6.84,6.05h5v-7.7h-4.25Zm-8.5,9.36c0,5-4.32,8.64-9.57,8.64-3.24,0-6-1.37-6-4.25,0-3.67,4.39-4.68,8.42-5.11s6-1.22,7.13-2.88ZM281.09,15c-11.09,0-19.23,8.35-19.23,19.36,0,11.6,8.72,19.3,19.37,19.3,9,0,16.06-5.33,17.86-12.89h-9c-1.3,3.31-4.47,5.19-8.71,5.19-5.55,0-9.72-3.46-10.66-9.51H299.3V33.12C299.3,22.46,291.53,15,281.09,15Zm-9.87,15.26c1.37-5.18,5.26-7.7,9.72-7.7,4.9,0,8.64,2.8,9.51,7.7ZM19.3,23a9.84,9.84,0,0,1,9.5,7h9.14c-1.65-8.93-9-15-18.57-15A19,19,0,0,0,0,34.34c0,11.09,8.28,19.3,19.37,19.3,9.36,0,16.85-6,18.5-15H28.8a9.75,9.75,0,0,1-9.43,7.06c-6.27,0-10.66-4.83-10.66-11.31S13,23,19.3,23Zm41.11-8A19,19,0,0,0,41,34.34c0,11.09,8.28,19.3,19.37,19.3A19,19,0,0,0,79.92,34.27C79.92,23.33,71.64,15,60.41,15Zm.07,30.67c-6.19,0-10.73-4.83-10.73-11.31S54.22,23,60.41,23s10.8,4.89,10.8,11.37S66.67,45.65,60.48,45.65ZM123.41,15c-5.62,0-9.29,2.3-11.45,5.54V15.7h-8.57V52.92H112V32.69C112,27,115.63,23,121,23c5,0,8.06,3.53,8.06,8.64V52.92h8.64V31C137.66,21.6,132.84,15,123.41,15ZM92,.36a5.36,5.36,0,0,0-5.55,5.47,5.55,5.55,0,0,0,11.09,0A5.35,5.35,0,0,0,92,.36Zm-9.72,23h5.4V52.92h8.64V15.7h-14Zm298.17-7.7L366.2,52.92H372L375.29,44H392l3.33,8.88h6L386.87,15.7ZM377,39.23l6.45-17.56h.1l6.56,17.56ZM362.66,15.7l-7.88,29h-.11l-8.14-29H341l-8,28.93h-.1l-8-28.87H319L329.82,53h5.45l8.19-29.24h.11L352,53h5.66L368.1,15.7Zm135.25,0v4.86h12.32V52.92h5.6V20.56h12.32V15.7ZM467.82,52.92h25.54V48.06H473.43v-12h18.35V31.35H473.43V20.56h19.93V15.7H467.82ZM443,15.7h-5.6V52.92h24.32V48.06H443Zm-30.45,0h-5.61V52.92h24.32V48.06H412.52Z'/%3E%3C/svg%3E`;case"textWithLogoLight":return r=(.25*e).toFixed(2),`data:image/svg+xml,%3Csvg width='${e}' height='${r}' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 308.44 77.61'%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%23fefefe;%7D%3C/style%3E%3C/defs%3E%3Cpath class='cls-1' d='M142.94,20.2l-7.88,29H135l-8.15-29h-5.55l-8,28.93h-.11l-8-28.87H99.27l10.84,37.27h5.44l8.2-29.24h.1l8.41,29.24h5.66L148.39,20.2Zm17.82,0L146.48,57.42h5.82l3.28-8.88h16.65l3.34,8.88h6L167.16,20.2Zm-3.44,23.52,6.45-17.55h.11l6.56,17.55ZM278.2,20.2v4.86h12.32V57.42h5.6V25.06h12.32V20.2ZM248.11,57.42h25.54V52.55H253.71V40.61h18.35V35.85H253.71V25.06h19.94V20.2H248.11ZM223.26,20.2h-5.61V57.42H242V52.55H223.26Zm-30.46,0h-5.6V57.42h24.32V52.55H192.8Zm-154,38A19.41,19.41,0,1,1,57.92,35.57H77.47a38.81,38.81,0,1,0,0,6.47H57.92A19.39,19.39,0,0,1,38.81,58.21Z'/%3E%3C/svg%3E`;default:return r=e,`data:image/svg+xml,%3Csvg width='${e}' height='${r}' viewBox='0 0 1024 1024' fill='none' xmlns='http://www.w3.org/2000/svg'%3E %3Crect width='1024' height='1024' fill='%230052FF'/%3E %3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M152 512C152 710.823 313.177 872 512 872C710.823 872 872 710.823 872 512C872 313.177 710.823 152 512 152C313.177 152 152 313.177 152 512ZM420 396C406.745 396 396 406.745 396 420V604C396 617.255 406.745 628 420 628H604C617.255 628 628 617.255 628 604V420C628 406.745 617.255 396 604 396H420Z' fill='white'/%3E %3C/svg%3E `}};xi.walletLogo=Ad;var Ci={};Object.defineProperty(Ci,"__esModule",{value:!0});Ci.ScopedLocalStorage=void 0;class Md{constructor(e){this.scope=e}setItem(e,r){localStorage.setItem(this.scopedKey(e),r)}getItem(e){return localStorage.getItem(this.scopedKey(e))}removeItem(e){localStorage.removeItem(this.scopedKey(e))}clear(){const e=this.scopedKey(""),r=[];for(let n=0;n<localStorage.length;n++){const i=localStorage.key(n);typeof i=="string"&&i.startsWith(e)&&r.push(i)}r.forEach(n=>localStorage.removeItem(n))}scopedKey(e){return`${this.scope}:${e}`}}Ci.ScopedLocalStorage=Md;var Sr={},Dr={};Object.defineProperty(Dr,"__esModule",{value:!0});const Id=Si.exports;function Ic(t,e,r){try{Reflect.apply(t,e,r)}catch(n){setTimeout(()=>{throw n})}}function Rd(t){const e=t.length,r=new Array(e);for(let n=0;n<e;n+=1)r[n]=t[n];return r}class Td extends Id.EventEmitter{emit(e,...r){let n=e==="error";const i=this._events;if(i!==void 0)n=n&&i.error===void 0;else if(!n)return!1;if(n){let o;if(r.length>0&&([o]=r),o instanceof Error)throw o;const a=new Error(`Unhandled error.${o?` (${o.message})`:""}`);throw a.context=o,a}const s=i[e];if(s===void 0)return!1;if(typeof s=="function")Ic(s,this,r);else{const o=s.length,a=Rd(s);for(let c=0;c<o;c+=1)Ic(a[c],this,r)}return!0}}Dr.default=Td;var ki={},Lt={},vl=hn;hn.default=hn;hn.stable=wl;hn.stableStringify=wl;var si="[...]",ml="[Circular]",Jt=[],Zt=[];function _l(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function hn(t,e,r,n){typeof n>"u"&&(n=_l()),ca(t,"",0,[],void 0,0,n);var i;try{Zt.length===0?i=JSON.stringify(t,e,r):i=JSON.stringify(t,Sl(e),r)}catch{return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;Jt.length!==0;){var s=Jt.pop();s.length===4?Object.defineProperty(s[0],s[1],s[3]):s[0][s[1]]=s[2]}}return i}function yr(t,e,r,n){var i=Object.getOwnPropertyDescriptor(n,r);i.get!==void 0?i.configurable?(Object.defineProperty(n,r,{value:t}),Jt.push([n,r,e,i])):Zt.push([e,r,t]):(n[r]=t,Jt.push([n,r,e]))}function ca(t,e,r,n,i,s,o){s+=1;var a;if(typeof t=="object"&&t!==null){for(a=0;a<n.length;a++)if(n[a]===t){yr(ml,t,e,i);return}if(typeof o.depthLimit<"u"&&s>o.depthLimit){yr(si,t,e,i);return}if(typeof o.edgesLimit<"u"&&r+1>o.edgesLimit){yr(si,t,e,i);return}if(n.push(t),Array.isArray(t))for(a=0;a<t.length;a++)ca(t[a],a,a,n,t,s,o);else{var c=Object.keys(t);for(a=0;a<c.length;a++){var u=c[a];ca(t[u],u,a,n,t,s,o)}}n.pop()}}function Od(t,e){return t<e?-1:t>e?1:0}function wl(t,e,r,n){typeof n>"u"&&(n=_l());var i=ua(t,"",0,[],void 0,0,n)||t,s;try{Zt.length===0?s=JSON.stringify(i,e,r):s=JSON.stringify(i,Sl(e),r)}catch{return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;Jt.length!==0;){var o=Jt.pop();o.length===4?Object.defineProperty(o[0],o[1],o[3]):o[0][o[1]]=o[2]}}return s}function ua(t,e,r,n,i,s,o){s+=1;var a;if(typeof t=="object"&&t!==null){for(a=0;a<n.length;a++)if(n[a]===t){yr(ml,t,e,i);return}try{if(typeof t.toJSON=="function")return}catch{return}if(typeof o.depthLimit<"u"&&s>o.depthLimit){yr(si,t,e,i);return}if(typeof o.edgesLimit<"u"&&r+1>o.edgesLimit){yr(si,t,e,i);return}if(n.push(t),Array.isArray(t))for(a=0;a<t.length;a++)ua(t[a],a,a,n,t,s,o);else{var c={},u=Object.keys(t).sort(Od);for(a=0;a<u.length;a++){var l=u[a];ua(t[l],l,a,n,t,s,o),c[l]=t[l]}if(typeof i<"u")Jt.push([i,e,t]),i[e]=c;else return c}n.pop()}}function Sl(t){return t=typeof t<"u"?t:function(e,r){return r},function(e,r){if(Zt.length>0)for(var n=0;n<Zt.length;n++){var i=Zt[n];if(i[1]===e&&i[0]===r){r=i[2],Zt.splice(n,1);break}}return t.call(this,e,r)}}Object.defineProperty(Lt,"__esModule",{value:!0});Lt.EthereumProviderError=Lt.EthereumRpcError=void 0;const Nd=vl;class El extends Error{constructor(e,r,n){if(!Number.isInteger(e))throw new Error('"code" must be an integer.');if(!r||typeof r!="string")throw new Error('"message" must be a nonempty string.');super(r),this.code=e,n!==void 0&&(this.data=n)}serialize(){const e={code:this.code,message:this.message};return this.data!==void 0&&(e.data=this.data),this.stack&&(e.stack=this.stack),e}toString(){return Nd.default(this.serialize(),Dd,2)}}Lt.EthereumRpcError=El;class Ld extends El{constructor(e,r,n){if(!Pd(e))throw new Error('"code" must be an integer such that: 1000 <= code <= 4999');super(e,r,n)}}Lt.EthereumProviderError=Ld;function Pd(t){return Number.isInteger(t)&&t>=1e3&&t<=4999}function Dd(t,e){if(e!=="[Circular]")return e}var Pa={},Pt={};Object.defineProperty(Pt,"__esModule",{value:!0});Pt.errorValues=Pt.errorCodes=void 0;Pt.errorCodes={rpc:{invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},provider:{userRejectedRequest:4001,unauthorized:4100,unsupportedMethod:4200,disconnected:4900,chainDisconnected:4901}};Pt.errorValues={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."}};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.serializeError=t.isValidCode=t.getMessageFromCode=t.JSON_RPC_SERVER_ERROR_MESSAGE=void 0;const e=Pt,r=Lt,n=e.errorCodes.rpc.internal,i="Unspecified error message. This is a bug, please report it.",s={code:n,message:o(n)};t.JSON_RPC_SERVER_ERROR_MESSAGE="Unspecified server error.";function o(f,p=i){if(Number.isInteger(f)){const y=f.toString();if(g(e.errorValues,y))return e.errorValues[y].message;if(u(f))return t.JSON_RPC_SERVER_ERROR_MESSAGE}return p}t.getMessageFromCode=o;function a(f){if(!Number.isInteger(f))return!1;const p=f.toString();return!!(e.errorValues[p]||u(f))}t.isValidCode=a;function c(f,{fallbackError:p=s,shouldIncludeStack:y=!1}={}){var E,k;if(!p||!Number.isInteger(p.code)||typeof p.message!="string")throw new Error("Must provide fallback error with integer number code and string message.");if(f instanceof r.EthereumRpcError)return f.serialize();const b={};if(f&&typeof f=="object"&&!Array.isArray(f)&&g(f,"code")&&a(f.code)){const w=f;b.code=w.code,w.message&&typeof w.message=="string"?(b.message=w.message,g(w,"data")&&(b.data=w.data)):(b.message=o(b.code),b.data={originalError:l(f)})}else{b.code=p.code;const w=(E=f)===null||E===void 0?void 0:E.message;b.message=w&&typeof w=="string"?w:p.message,b.data={originalError:l(f)}}const v=(k=f)===null||k===void 0?void 0:k.stack;return y&&f&&v&&typeof v=="string"&&(b.stack=v),b}t.serializeError=c;function u(f){return f>=-32099&&f<=-32e3}function l(f){return f&&typeof f=="object"&&!Array.isArray(f)?Object.assign({},f):f}function g(f,p){return Object.prototype.hasOwnProperty.call(f,p)}})(Pa);var Ai={};Object.defineProperty(Ai,"__esModule",{value:!0});Ai.ethErrors=void 0;const Da=Lt,xl=Pa,Re=Pt;Ai.ethErrors={rpc:{parse:t=>Ve(Re.errorCodes.rpc.parse,t),invalidRequest:t=>Ve(Re.errorCodes.rpc.invalidRequest,t),invalidParams:t=>Ve(Re.errorCodes.rpc.invalidParams,t),methodNotFound:t=>Ve(Re.errorCodes.rpc.methodNotFound,t),internal:t=>Ve(Re.errorCodes.rpc.internal,t),server:t=>{if(!t||typeof t!="object"||Array.isArray(t))throw new Error("Ethereum RPC Server errors must provide single object argument.");const{code:e}=t;if(!Number.isInteger(e)||e>-32005||e<-32099)throw new Error('"code" must be an integer such that: -32099 <= code <= -32005');return Ve(e,t)},invalidInput:t=>Ve(Re.errorCodes.rpc.invalidInput,t),resourceNotFound:t=>Ve(Re.errorCodes.rpc.resourceNotFound,t),resourceUnavailable:t=>Ve(Re.errorCodes.rpc.resourceUnavailable,t),transactionRejected:t=>Ve(Re.errorCodes.rpc.transactionRejected,t),methodNotSupported:t=>Ve(Re.errorCodes.rpc.methodNotSupported,t),limitExceeded:t=>Ve(Re.errorCodes.rpc.limitExceeded,t)},provider:{userRejectedRequest:t=>Zr(Re.errorCodes.provider.userRejectedRequest,t),unauthorized:t=>Zr(Re.errorCodes.provider.unauthorized,t),unsupportedMethod:t=>Zr(Re.errorCodes.provider.unsupportedMethod,t),disconnected:t=>Zr(Re.errorCodes.provider.disconnected,t),chainDisconnected:t=>Zr(Re.errorCodes.provider.chainDisconnected,t),custom:t=>{if(!t||typeof t!="object"||Array.isArray(t))throw new Error("Ethereum Provider custom errors must provide single object argument.");const{code:e,message:r,data:n}=t;if(!r||typeof r!="string")throw new Error('"message" must be a nonempty string');return new Da.EthereumProviderError(e,r,n)}}};function Ve(t,e){const[r,n]=Cl(e);return new Da.EthereumRpcError(t,r||xl.getMessageFromCode(t),n)}function Zr(t,e){const[r,n]=Cl(e);return new Da.EthereumProviderError(t,r||xl.getMessageFromCode(t),n)}function Cl(t){if(t){if(typeof t=="string")return[t];if(typeof t=="object"&&!Array.isArray(t)){const{message:e,data:r}=t;if(e&&typeof e!="string")throw new Error("Must specify string message.");return[e||void 0,r]}}return[]}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.getMessageFromCode=t.serializeError=t.EthereumProviderError=t.EthereumRpcError=t.ethErrors=t.errorCodes=void 0;const e=Lt;Object.defineProperty(t,"EthereumRpcError",{enumerable:!0,get:function(){return e.EthereumRpcError}}),Object.defineProperty(t,"EthereumProviderError",{enumerable:!0,get:function(){return e.EthereumProviderError}});const r=Pa;Object.defineProperty(t,"serializeError",{enumerable:!0,get:function(){return r.serializeError}}),Object.defineProperty(t,"getMessageFromCode",{enumerable:!0,get:function(){return r.getMessageFromCode}});const n=Ai;Object.defineProperty(t,"ethErrors",{enumerable:!0,get:function(){return n.ethErrors}});const i=Pt;Object.defineProperty(t,"errorCodes",{enumerable:!0,get:function(){return i.errorCodes}})})(ki);var jr={};Object.defineProperty(jr,"__esModule",{value:!0});jr.EVENTS=void 0;jr.EVENTS={STARTED_CONNECTING:"walletlink_sdk.started.connecting",CONNECTED_STATE_CHANGE:"walletlink_sdk.connected",DISCONNECTED:"walletlink_sdk.disconnected",METADATA_DESTROYED:"walletlink_sdk_metadata_destroyed",LINKED:"walletlink_sdk.linked",FAILURE:"walletlink_sdk.generic_failure",SESSION_CONFIG_RECEIVED:"walletlink_sdk.session_config_event_received",ETH_ACCOUNTS_STATE:"walletlink_sdk.eth_accounts_state",SESSION_STATE_CHANGE:"walletlink_sdk.session_state_change",UNLINKED_ERROR_STATE:"walletlink_sdk.unlinked_error_state",SKIPPED_CLEARING_SESSION:"walletlink_sdk.skipped_clearing_session",GENERAL_ERROR:"walletlink_sdk.general_error",WEB3_REQUEST:"walletlink_sdk.web3.request",WEB3_REQUEST_PUBLISHED:"walletlink_sdk.web3.request_published",WEB3_RESPONSE:"walletlink_sdk.web3.response",UNKNOWN_ADDRESS_ENCOUNTERED:"walletlink_sdk.unknown_address_encountered"};var Br={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var la=function(t,e){return la=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},la(t,e)};function R(t,e){la(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}function Er(t){return typeof t=="function"}var Rc=!1,Ge={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){var e=new Error;""+e.stack}Rc=t},get useDeprecatedSynchronousErrorHandling(){return Rc}};function pr(t){setTimeout(function(){throw t},0)}var oi={closed:!0,next:function(t){},error:function(t){if(Ge.useDeprecatedSynchronousErrorHandling)throw t;pr(t)},complete:function(){}},je=function(){return Array.isArray||function(t){return t&&typeof t.length=="number"}}();function ja(t){return t!==null&&typeof t=="object"}var jd=function(){function t(e){return Error.call(this),this.message=e?e.length+` errors occurred during unsubscription:
`+e.map(function(r,n){return n+1+") "+r.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=e,this}return t.prototype=Object.create(Error.prototype),t}(),rn=jd,pe=function(){function t(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}return t.prototype.unsubscribe=function(){var e;if(!this.closed){var r=this,n=r._parentOrParents,i=r._ctorUnsubscribe,s=r._unsubscribe,o=r._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(n!==null)for(var a=0;a<n.length;++a){var c=n[a];c.remove(this)}if(Er(s)){i&&(this._unsubscribe=void 0);try{s.call(this)}catch(g){e=g instanceof rn?Tc(g.errors):[g]}}if(je(o))for(var a=-1,u=o.length;++a<u;){var l=o[a];if(ja(l))try{l.unsubscribe()}catch(f){e=e||[],f instanceof rn?e=e.concat(Tc(f.errors)):e.push(f)}}if(e)throw new rn(e)}},t.prototype.add=function(e){var r=e;if(!e)return t.EMPTY;switch(typeof e){case"function":r=new t(e);case"object":if(r===this||r.closed||typeof r.unsubscribe!="function")return r;if(this.closed)return r.unsubscribe(),r;if(!(r instanceof t)){var n=r;r=new t,r._subscriptions=[n]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}var i=r._parentOrParents;if(i===null)r._parentOrParents=this;else if(i instanceof t){if(i===this)return r;r._parentOrParents=[i,this]}else if(i.indexOf(this)===-1)i.push(this);else return r;var s=this._subscriptions;return s===null?this._subscriptions=[r]:s.push(r),r},t.prototype.remove=function(e){var r=this._subscriptions;if(r){var n=r.indexOf(e);n!==-1&&r.splice(n,1)}},t.EMPTY=function(e){return e.closed=!0,e}(new t),t}();function Tc(t){return t.reduce(function(e,r){return e.concat(r instanceof rn?r.errors:r)},[])}var ai=function(){return typeof Symbol=="function"?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),W=function(t){R(e,t);function e(r,n,i){var s=t.call(this)||this;switch(s.syncErrorValue=null,s.syncErrorThrown=!1,s.syncErrorThrowable=!1,s.isStopped=!1,arguments.length){case 0:s.destination=oi;break;case 1:if(!r){s.destination=oi;break}if(typeof r=="object"){r instanceof e?(s.syncErrorThrowable=r.syncErrorThrowable,s.destination=r,r.add(s)):(s.syncErrorThrowable=!0,s.destination=new Oc(s,r));break}default:s.syncErrorThrowable=!0,s.destination=new Oc(s,r,n,i);break}return s}return e.prototype[ai]=function(){return this},e.create=function(r,n,i){var s=new e(r,n,i);return s.syncErrorThrowable=!1,s},e.prototype.next=function(r){this.isStopped||this._next(r)},e.prototype.error=function(r){this.isStopped||(this.isStopped=!0,this._error(r))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(r){this.destination.next(r)},e.prototype._error=function(r){this.destination.error(r),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var r=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=r,this},e}(pe),Oc=function(t){R(e,t);function e(r,n,i,s){var o=t.call(this)||this;o._parentSubscriber=r;var a,c=o;return Er(n)?a=n:n&&(a=n.next,i=n.error,s=n.complete,n!==oi&&(c=Object.create(n),Er(c.unsubscribe)&&o.add(c.unsubscribe.bind(c)),c.unsubscribe=o.unsubscribe.bind(o))),o._context=c,o._next=a,o._error=i,o._complete=s,o}return e.prototype.next=function(r){if(!this.isStopped&&this._next){var n=this._parentSubscriber;!Ge.useDeprecatedSynchronousErrorHandling||!n.syncErrorThrowable?this.__tryOrUnsub(this._next,r):this.__tryOrSetError(n,this._next,r)&&this.unsubscribe()}},e.prototype.error=function(r){if(!this.isStopped){var n=this._parentSubscriber,i=Ge.useDeprecatedSynchronousErrorHandling;if(this._error)!i||!n.syncErrorThrowable?(this.__tryOrUnsub(this._error,r),this.unsubscribe()):(this.__tryOrSetError(n,this._error,r),this.unsubscribe());else if(n.syncErrorThrowable)i?(n.syncErrorValue=r,n.syncErrorThrown=!0):pr(r),this.unsubscribe();else{if(this.unsubscribe(),i)throw r;pr(r)}}},e.prototype.complete=function(){var r=this;if(!this.isStopped){var n=this._parentSubscriber;if(this._complete){var i=function(){return r._complete.call(r._context)};!Ge.useDeprecatedSynchronousErrorHandling||!n.syncErrorThrowable?(this.__tryOrUnsub(i),this.unsubscribe()):(this.__tryOrSetError(n,i),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(r,n){try{r.call(this._context,n)}catch(i){if(this.unsubscribe(),Ge.useDeprecatedSynchronousErrorHandling)throw i;pr(i)}},e.prototype.__tryOrSetError=function(r,n,i){if(!Ge.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{n.call(this._context,i)}catch(s){return Ge.useDeprecatedSynchronousErrorHandling?(r.syncErrorValue=s,r.syncErrorThrown=!0,!0):(pr(s),!0)}return!1},e.prototype._unsubscribe=function(){var r=this._parentSubscriber;this._context=null,this._parentSubscriber=null,r.unsubscribe()},e}(W);function Ba(t){for(;t;){var e=t,r=e.closed,n=e.destination,i=e.isStopped;if(r||i)return!1;n&&n instanceof W?t=n:t=null}return!0}function Bd(t,e,r){if(t){if(t instanceof W)return t;if(t[ai])return t[ai]()}return!t&&!e&&!r?new W(oi):new W(t,e,r)}var Fr=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function Dt(t){return t}function fa(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return kl(t)}function kl(t){return t.length===0?Dt:t.length===1?t[0]:function(r){return t.reduce(function(n,i){return i(n)},r)}}var K=function(){function t(e){this._isScalar=!1,e&&(this._subscribe=e)}return t.prototype.lift=function(e){var r=new t;return r.source=this,r.operator=e,r},t.prototype.subscribe=function(e,r,n){var i=this.operator,s=Bd(e,r,n);if(i?s.add(i.call(s,this.source)):s.add(this.source||Ge.useDeprecatedSynchronousErrorHandling&&!s.syncErrorThrowable?this._subscribe(s):this._trySubscribe(s)),Ge.useDeprecatedSynchronousErrorHandling&&s.syncErrorThrowable&&(s.syncErrorThrowable=!1,s.syncErrorThrown))throw s.syncErrorValue;return s},t.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(r){Ge.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=r),Ba(e)?e.error(r):console.warn(r)}},t.prototype.forEach=function(e,r){var n=this;return r=Nc(r),new r(function(i,s){var o;o=n.subscribe(function(a){try{e(a)}catch(c){s(c),o&&o.unsubscribe()}},s,i)})},t.prototype._subscribe=function(e){var r=this.source;return r&&r.subscribe(e)},t.prototype[Fr]=function(){return this},t.prototype.pipe=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return e.length===0?this:kl(e)(this)},t.prototype.toPromise=function(e){var r=this;return e=Nc(e),new e(function(n,i){var s;r.subscribe(function(o){return s=o},function(o){return i(o)},function(){return n(s)})})},t.create=function(e){return new t(e)},t}();function Nc(t){if(t||(t=Ge.Promise||Promise),!t)throw new Error("no Promise impl found");return t}var Fd=function(){function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t}(),Rt=Fd,Al=function(t){R(e,t);function e(r,n){var i=t.call(this)||this;return i.subject=r,i.subscriber=n,i.closed=!1,i}return e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var r=this.subject,n=r.observers;if(this.subject=null,!(!n||n.length===0||r.isStopped||r.closed)){var i=n.indexOf(this.subscriber);i!==-1&&n.splice(i,1)}}},e}(pe),Ml=function(t){R(e,t);function e(r){var n=t.call(this,r)||this;return n.destination=r,n}return e}(W),ke=function(t){R(e,t);function e(){var r=t.call(this)||this;return r.observers=[],r.closed=!1,r.isStopped=!1,r.hasError=!1,r.thrownError=null,r}return e.prototype[ai]=function(){return new Ml(this)},e.prototype.lift=function(r){var n=new Lc(this,this);return n.operator=r,n},e.prototype.next=function(r){if(this.closed)throw new Rt;if(!this.isStopped)for(var n=this.observers,i=n.length,s=n.slice(),o=0;o<i;o++)s[o].next(r)},e.prototype.error=function(r){if(this.closed)throw new Rt;this.hasError=!0,this.thrownError=r,this.isStopped=!0;for(var n=this.observers,i=n.length,s=n.slice(),o=0;o<i;o++)s[o].error(r);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new Rt;this.isStopped=!0;for(var r=this.observers,n=r.length,i=r.slice(),s=0;s<n;s++)i[s].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(r){if(this.closed)throw new Rt;return t.prototype._trySubscribe.call(this,r)},e.prototype._subscribe=function(r){if(this.closed)throw new Rt;return this.hasError?(r.error(this.thrownError),pe.EMPTY):this.isStopped?(r.complete(),pe.EMPTY):(this.observers.push(r),new Al(this,r))},e.prototype.asObservable=function(){var r=new K;return r.source=this,r},e.create=function(r,n){return new Lc(r,n)},e}(K),Lc=function(t){R(e,t);function e(r,n){var i=t.call(this)||this;return i.destination=r,i.source=n,i}return e.prototype.next=function(r){var n=this.destination;n&&n.next&&n.next(r)},e.prototype.error=function(r){var n=this.destination;n&&n.error&&this.destination.error(r)},e.prototype.complete=function(){var r=this.destination;r&&r.complete&&this.destination.complete()},e.prototype._subscribe=function(r){var n=this.source;return n?this.source.subscribe(r):pe.EMPTY},e}(ke);function Fa(){return function(e){return e.lift(new $d(e))}}var $d=function(){function t(e){this.connectable=e}return t.prototype.call=function(e,r){var n=this.connectable;n._refCount++;var i=new Wd(e,n),s=r.subscribe(i);return i.closed||(i.connection=n.connect()),s},t}(),Wd=function(t){R(e,t);function e(r,n){var i=t.call(this,r)||this;return i.connectable=n,i}return e.prototype._unsubscribe=function(){var r=this.connectable;if(!r){this.connection=null;return}this.connectable=null;var n=r._refCount;if(n<=0){this.connection=null;return}if(r._refCount=n-1,n>1){this.connection=null;return}var i=this.connection,s=r._connection;this.connection=null,s&&(!i||s===i)&&s.unsubscribe()},e}(W),Il=function(t){R(e,t);function e(r,n){var i=t.call(this)||this;return i.source=r,i.subjectFactory=n,i._refCount=0,i._isComplete=!1,i}return e.prototype._subscribe=function(r){return this.getSubject().subscribe(r)},e.prototype.getSubject=function(){var r=this._subject;return(!r||r.isStopped)&&(this._subject=this.subjectFactory()),this._subject},e.prototype.connect=function(){var r=this._connection;return r||(this._isComplete=!1,r=this._connection=new pe,r.add(this.source.subscribe(new Hd(this.getSubject(),this))),r.closed&&(this._connection=null,r=pe.EMPTY)),r},e.prototype.refCount=function(){return Fa()(this)},e}(K),Ud=function(){var t=Il.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}}(),Hd=function(t){R(e,t);function e(r,n){var i=t.call(this,r)||this;return i.connectable=n,i}return e.prototype._error=function(r){this._unsubscribe(),t.prototype._error.call(this,r)},e.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){var r=this.connectable;if(r){this.connectable=null;var n=r._connection;r._refCount=0,r._subject=null,r._connection=null,n&&n.unsubscribe()}},e}(Ml);function Vd(t,e,r,n){return function(i){return i.lift(new zd(t,e,r,n))}}var zd=function(){function t(e,r,n,i){this.keySelector=e,this.elementSelector=r,this.durationSelector=n,this.subjectSelector=i}return t.prototype.call=function(e,r){return r.subscribe(new qd(e,this.keySelector,this.elementSelector,this.durationSelector,this.subjectSelector))},t}(),qd=function(t){R(e,t);function e(r,n,i,s,o){var a=t.call(this,r)||this;return a.keySelector=n,a.elementSelector=i,a.durationSelector=s,a.subjectSelector=o,a.groups=null,a.attemptedToUnsubscribe=!1,a.count=0,a}return e.prototype._next=function(r){var n;try{n=this.keySelector(r)}catch(i){this.error(i);return}this._group(r,n)},e.prototype._group=function(r,n){var i=this.groups;i||(i=this.groups=new Map);var s=i.get(n),o;if(this.elementSelector)try{o=this.elementSelector(r)}catch(u){this.error(u)}else o=r;if(!s){s=this.subjectSelector?this.subjectSelector():new ke,i.set(n,s);var a=new ha(n,s,this);if(this.destination.next(a),this.durationSelector){var c=void 0;try{c=this.durationSelector(new ha(n,s))}catch(u){this.error(u);return}this.add(c.subscribe(new Gd(n,s,this)))}}s.closed||s.next(o)},e.prototype._error=function(r){var n=this.groups;n&&(n.forEach(function(i,s){i.error(r)}),n.clear()),this.destination.error(r)},e.prototype._complete=function(){var r=this.groups;r&&(r.forEach(function(n,i){n.complete()}),r.clear()),this.destination.complete()},e.prototype.removeGroup=function(r){this.groups.delete(r)},e.prototype.unsubscribe=function(){this.closed||(this.attemptedToUnsubscribe=!0,this.count===0&&t.prototype.unsubscribe.call(this))},e}(W),Gd=function(t){R(e,t);function e(r,n,i){var s=t.call(this,n)||this;return s.key=r,s.group=n,s.parent=i,s}return e.prototype._next=function(r){this.complete()},e.prototype._unsubscribe=function(){var r=this,n=r.parent,i=r.key;this.key=this.parent=null,n&&n.removeGroup(i)},e}(W),ha=function(t){R(e,t);function e(r,n,i){var s=t.call(this)||this;return s.key=r,s.groupSubject=n,s.refCountSubscription=i,s}return e.prototype._subscribe=function(r){var n=new pe,i=this,s=i.refCountSubscription,o=i.groupSubject;return s&&!s.closed&&n.add(new Qd(s)),n.add(o.subscribe(r)),n},e}(K),Qd=function(t){R(e,t);function e(r){var n=t.call(this)||this;return n.parent=r,r.count++,n}return e.prototype.unsubscribe=function(){var r=this.parent;!r.closed&&!this.closed&&(t.prototype.unsubscribe.call(this),r.count-=1,r.count===0&&r.attemptedToUnsubscribe&&r.unsubscribe())},e}(pe),Rl=function(t){R(e,t);function e(r){var n=t.call(this)||this;return n._value=r,n}return Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),e.prototype._subscribe=function(r){var n=t.prototype._subscribe.call(this,r);return n&&!n.closed&&r.next(this._value),n},e.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new Rt;return this._value},e.prototype.next=function(r){t.prototype.next.call(this,this._value=r)},e}(ke),Zd=function(t){R(e,t);function e(r,n){return t.call(this)||this}return e.prototype.schedule=function(r,n){return this},e}(pe),mn=function(t){R(e,t);function e(r,n){var i=t.call(this,r,n)||this;return i.scheduler=r,i.work=n,i.pending=!1,i}return e.prototype.schedule=function(r,n){if(n===void 0&&(n=0),this.closed)return this;this.state=r;var i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=this.id||this.requestAsyncId(s,this.id,n),this},e.prototype.requestAsyncId=function(r,n,i){return i===void 0&&(i=0),setInterval(r.flush.bind(r,this),i)},e.prototype.recycleAsyncId=function(r,n,i){if(i===void 0&&(i=0),i!==null&&this.delay===i&&this.pending===!1)return n;clearInterval(n)},e.prototype.execute=function(r,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var i=this._execute(r,n);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(r,n){var i=!1,s=void 0;try{this.work(r)}catch(o){i=!0,s=!!o&&o||new Error(o)}if(i)return this.unsubscribe(),s},e.prototype._unsubscribe=function(){var r=this.id,n=this.scheduler,i=n.actions,s=i.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,s!==-1&&i.splice(s,1),r!=null&&(this.id=this.recycleAsyncId(n,r,null)),this.delay=null},e}(Zd),Yd=function(t){R(e,t);function e(r,n){var i=t.call(this,r,n)||this;return i.scheduler=r,i.work=n,i}return e.prototype.schedule=function(r,n){return n===void 0&&(n=0),n>0?t.prototype.schedule.call(this,r,n):(this.delay=n,this.state=r,this.scheduler.flush(this),this)},e.prototype.execute=function(r,n){return n>0||this.closed?t.prototype.execute.call(this,r,n):this._execute(r,n)},e.prototype.requestAsyncId=function(r,n,i){return i===void 0&&(i=0),i!==null&&i>0||i===null&&this.delay>0?t.prototype.requestAsyncId.call(this,r,n,i):r.flush(this)},e}(mn),da=function(){function t(e,r){r===void 0&&(r=t.now),this.SchedulerAction=e,this.now=r}return t.prototype.schedule=function(e,r,n){return r===void 0&&(r=0),new this.SchedulerAction(this,e).schedule(n,r)},t.now=function(){return Date.now()},t}(),_n=function(t){R(e,t);function e(r,n){n===void 0&&(n=da.now);var i=t.call(this,r,function(){return e.delegate&&e.delegate!==i?e.delegate.now():n()})||this;return i.actions=[],i.active=!1,i.scheduled=void 0,i}return e.prototype.schedule=function(r,n,i){return n===void 0&&(n=0),e.delegate&&e.delegate!==this?e.delegate.schedule(r,n,i):t.prototype.schedule.call(this,r,n,i)},e.prototype.flush=function(r){var n=this.actions;if(this.active){n.push(r);return}var i;this.active=!0;do if(i=r.execute(r.state,r.delay))break;while(r=n.shift());if(this.active=!1,i){for(;r=n.shift();)r.unsubscribe();throw i}},e}(da),Kd=function(t){R(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(_n),Tl=new Kd(Yd),Ol=Tl,xr=new K(function(t){return t.complete()});function $r(t){return t?Jd(t):xr}function Jd(t){return new K(function(e){return t.schedule(function(){return e.complete()})})}function Ue(t){return t&&typeof t.schedule=="function"}var Nl=function(t){return function(e){for(var r=0,n=t.length;r<n&&!e.closed;r++)e.next(t[r]);e.complete()}};function $a(t,e){return new K(function(r){var n=new pe,i=0;return n.add(e.schedule(function(){if(i===t.length){r.complete();return}r.next(t[i++]),r.closed||n.add(this.schedule())})),n})}function wn(t,e){return e?$a(t,e):new K(Nl(t))}function Mi(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=t[t.length-1];return Ue(r)?(t.pop(),$a(t,r)):wn(t)}function Wa(t,e){return e?new K(function(r){return e.schedule(Xd,0,{error:t,subscriber:r})}):new K(function(r){return r.error(t)})}function Xd(t){var e=t.error,r=t.subscriber;r.error(e)}var pa;pa||(pa={});var _t=function(){function t(e,r,n){this.kind=e,this.value=r,this.error=n,this.hasValue=e==="N"}return t.prototype.observe=function(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}},t.prototype.do=function(e,r,n){var i=this.kind;switch(i){case"N":return e&&e(this.value);case"E":return r&&r(this.error);case"C":return n&&n()}},t.prototype.accept=function(e,r,n){return e&&typeof e.next=="function"?this.observe(e):this.do(e,r,n)},t.prototype.toObservable=function(){var e=this.kind;switch(e){case"N":return Mi(this.value);case"E":return Wa(this.error);case"C":return $r()}throw new Error("unexpected notification kind value")},t.createNext=function(e){return typeof e<"u"?new t("N",e):t.undefinedValueNotification},t.createError=function(e){return new t("E",void 0,e)},t.createComplete=function(){return t.completeNotification},t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t}();function ep(t,e){return e===void 0&&(e=0),function(n){return n.lift(new tp(t,e))}}var tp=function(){function t(e,r){r===void 0&&(r=0),this.scheduler=e,this.delay=r}return t.prototype.call=function(e,r){return r.subscribe(new Ll(e,this.scheduler,this.delay))},t}(),Ll=function(t){R(e,t);function e(r,n,i){i===void 0&&(i=0);var s=t.call(this,r)||this;return s.scheduler=n,s.delay=i,s}return e.dispatch=function(r){var n=r.notification,i=r.destination;n.observe(i),this.unsubscribe()},e.prototype.scheduleMessage=function(r){var n=this.destination;n.add(this.scheduler.schedule(e.dispatch,this.delay,new rp(r,this.destination)))},e.prototype._next=function(r){this.scheduleMessage(_t.createNext(r))},e.prototype._error=function(r){this.scheduleMessage(_t.createError(r)),this.unsubscribe()},e.prototype._complete=function(){this.scheduleMessage(_t.createComplete()),this.unsubscribe()},e}(W),rp=function(){function t(e,r){this.notification=e,this.destination=r}return t}(),Ua=function(t){R(e,t);function e(r,n,i){r===void 0&&(r=Number.POSITIVE_INFINITY),n===void 0&&(n=Number.POSITIVE_INFINITY);var s=t.call(this)||this;return s.scheduler=i,s._events=[],s._infiniteTimeWindow=!1,s._bufferSize=r<1?1:r,s._windowTime=n<1?1:n,n===Number.POSITIVE_INFINITY?(s._infiniteTimeWindow=!0,s.next=s.nextInfiniteTimeWindow):s.next=s.nextTimeWindow,s}return e.prototype.nextInfiniteTimeWindow=function(r){if(!this.isStopped){var n=this._events;n.push(r),n.length>this._bufferSize&&n.shift()}t.prototype.next.call(this,r)},e.prototype.nextTimeWindow=function(r){this.isStopped||(this._events.push(new np(this._getNow(),r)),this._trimBufferThenGetEvents()),t.prototype.next.call(this,r)},e.prototype._subscribe=function(r){var n=this._infiniteTimeWindow,i=n?this._events:this._trimBufferThenGetEvents(),s=this.scheduler,o=i.length,a;if(this.closed)throw new Rt;if(this.isStopped||this.hasError?a=pe.EMPTY:(this.observers.push(r),a=new Al(this,r)),s&&r.add(r=new Ll(r,s)),n)for(var c=0;c<o&&!r.closed;c++)r.next(i[c]);else for(var c=0;c<o&&!r.closed;c++)r.next(i[c].value);return this.hasError?r.error(this.thrownError):this.isStopped&&r.complete(),a},e.prototype._getNow=function(){return(this.scheduler||Ol).now()},e.prototype._trimBufferThenGetEvents=function(){for(var r=this._getNow(),n=this._bufferSize,i=this._windowTime,s=this._events,o=s.length,a=0;a<o&&!(r-s[a].time<i);)a++;return o>n&&(a=Math.max(a,o-n)),a>0&&s.splice(0,a),s},e}(ke),np=function(){function t(e,r){this.time=e,this.value=r}return t}(),Wr=function(t){R(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.value=null,r.hasNext=!1,r.hasCompleted=!1,r}return e.prototype._subscribe=function(r){return this.hasError?(r.error(this.thrownError),pe.EMPTY):this.hasCompleted&&this.hasNext?(r.next(this.value),r.complete(),pe.EMPTY):t.prototype._subscribe.call(this,r)},e.prototype.next=function(r){this.hasCompleted||(this.value=r,this.hasNext=!0)},e.prototype.error=function(r){this.hasCompleted||t.prototype.error.call(this,r)},e.prototype.complete=function(){this.hasCompleted=!0,this.hasNext&&t.prototype.next.call(this,this.value),t.prototype.complete.call(this)},e}(ke),ip=1,sp=function(){return Promise.resolve()}(),ba={};function Pc(t){return t in ba?(delete ba[t],!0):!1}var Dc={setImmediate:function(t){var e=ip++;return ba[e]=!0,sp.then(function(){return Pc(e)&&t()}),e},clearImmediate:function(t){Pc(t)}},op=function(t){R(e,t);function e(r,n){var i=t.call(this,r,n)||this;return i.scheduler=r,i.work=n,i}return e.prototype.requestAsyncId=function(r,n,i){return i===void 0&&(i=0),i!==null&&i>0?t.prototype.requestAsyncId.call(this,r,n,i):(r.actions.push(this),r.scheduled||(r.scheduled=Dc.setImmediate(r.flush.bind(r,null))))},e.prototype.recycleAsyncId=function(r,n,i){if(i===void 0&&(i=0),i!==null&&i>0||i===null&&this.delay>0)return t.prototype.recycleAsyncId.call(this,r,n,i);r.actions.length===0&&(Dc.clearImmediate(n),r.scheduled=void 0)},e}(mn),ap=function(t){R(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.flush=function(r){this.active=!0,this.scheduled=void 0;var n=this.actions,i,s=-1,o=n.length;r=r||n.shift();do if(i=r.execute(r.state,r.delay))break;while(++s<o&&(r=n.shift()));if(this.active=!1,i){for(;++s<o&&(r=n.shift());)r.unsubscribe();throw i}},e}(_n),Pl=new ap(op),Yn=Pl,Dl=new _n(mn),Be=Dl,cp=function(t){R(e,t);function e(r,n){var i=t.call(this,r,n)||this;return i.scheduler=r,i.work=n,i}return e.prototype.requestAsyncId=function(r,n,i){return i===void 0&&(i=0),i!==null&&i>0?t.prototype.requestAsyncId.call(this,r,n,i):(r.actions.push(this),r.scheduled||(r.scheduled=requestAnimationFrame(function(){return r.flush(null)})))},e.prototype.recycleAsyncId=function(r,n,i){if(i===void 0&&(i=0),i!==null&&i>0||i===null&&this.delay>0)return t.prototype.recycleAsyncId.call(this,r,n,i);r.actions.length===0&&(cancelAnimationFrame(n),r.scheduled=void 0)},e}(mn),up=function(t){R(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.flush=function(r){this.active=!0,this.scheduled=void 0;var n=this.actions,i,s=-1,o=n.length;r=r||n.shift();do if(i=r.execute(r.state,r.delay))break;while(++s<o&&(r=n.shift()));if(this.active=!1,i){for(;++s<o&&(r=n.shift());)r.unsubscribe();throw i}},e}(_n),jl=new up(cp),lp=jl,fp=function(t){R(e,t);function e(r,n){r===void 0&&(r=Bl),n===void 0&&(n=Number.POSITIVE_INFINITY);var i=t.call(this,r,function(){return i.frame})||this;return i.maxFrames=n,i.frame=0,i.index=-1,i}return e.prototype.flush=function(){for(var r=this,n=r.actions,i=r.maxFrames,s,o;(o=n[0])&&o.delay<=i&&(n.shift(),this.frame=o.delay,!(s=o.execute(o.state,o.delay))););if(s){for(;o=n.shift();)o.unsubscribe();throw s}},e.frameTimeFactor=10,e}(_n),Bl=function(t){R(e,t);function e(r,n,i){i===void 0&&(i=r.index+=1);var s=t.call(this,r,n)||this;return s.scheduler=r,s.work=n,s.index=i,s.active=!0,s.index=r.index=i,s}return e.prototype.schedule=function(r,n){if(n===void 0&&(n=0),!this.id)return t.prototype.schedule.call(this,r,n);this.active=!1;var i=new e(this.scheduler,this.work);return this.add(i),i.schedule(r,n)},e.prototype.requestAsyncId=function(r,n,i){i===void 0&&(i=0),this.delay=r.frame+i;var s=r.actions;return s.push(this),s.sort(e.sortActions),!0},e.prototype.recycleAsyncId=function(r,n,i){},e.prototype._execute=function(r,n){if(this.active===!0)return t.prototype._execute.call(this,r,n)},e.sortActions=function(r,n){return r.delay===n.delay?r.index===n.index?0:r.index>n.index?1:-1:r.delay>n.delay?1:-1},e}(mn);function ct(){}function hp(t){return!!t&&(t instanceof K||typeof t.lift=="function"&&typeof t.subscribe=="function")}var dp=function(){function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t}(),Cr=dp,pp=function(){function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t}(),Sn=pp,bp=function(){function t(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}return t.prototype=Object.create(Error.prototype),t}(),Fl=bp;function Je(t,e){return function(n){if(typeof t!="function")throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new gp(t,e))}}var gp=function(){function t(e,r){this.project=e,this.thisArg=r}return t.prototype.call=function(e,r){return r.subscribe(new yp(e,this.project,this.thisArg))},t}(),yp=function(t){R(e,t);function e(r,n,i){var s=t.call(this,r)||this;return s.project=n,s.count=0,s.thisArg=i||s,s}return e.prototype._next=function(r){var n;try{n=this.project.call(this.thisArg,r,this.count++)}catch(i){this.destination.error(i);return}this.destination.next(n)},e}(W);function $l(t,e,r){if(e)if(Ue(e))r=e;else return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return $l(t,r).apply(void 0,n).pipe(Je(function(s){return je(s)?e.apply(void 0,s):e(s)}))};return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var s=this,o,a={context:s,subject:o,callbackFunc:t,scheduler:r};return new K(function(c){if(r){var l={args:n,subscriber:c,params:a};return r.schedule(vp,0,l)}else{if(!o){o=new Wr;var u=function(){for(var g=[],f=0;f<arguments.length;f++)g[f]=arguments[f];o.next(g.length<=1?g[0]:g),o.complete()};try{t.apply(s,n.concat([u]))}catch(g){Ba(o)?o.error(g):console.warn(g)}}return o.subscribe(c)}})}}function vp(t){var e=this,r=t.args,n=t.subscriber,i=t.params,s=i.callbackFunc,o=i.context,a=i.scheduler,c=i.subject;if(!c){c=i.subject=new Wr;var u=function(){for(var l=[],g=0;g<arguments.length;g++)l[g]=arguments[g];var f=l.length<=1?l[0]:l;e.add(a.schedule(mp,0,{value:f,subject:c}))};try{s.apply(o,r.concat([u]))}catch(l){c.error(l)}}this.add(c.subscribe(n))}function mp(t){var e=t.value,r=t.subject;r.next(e),r.complete()}function Wl(t,e,r){if(e)if(Ue(e))r=e;else return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return Wl(t,r).apply(void 0,n).pipe(Je(function(s){return je(s)?e.apply(void 0,s):e(s)}))};return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var s={subject:void 0,args:n,callbackFunc:t,scheduler:r,context:this};return new K(function(o){var a=s.context,c=s.subject;if(r)return r.schedule(_p,0,{params:s,subscriber:o,context:a});if(!c){c=s.subject=new Wr;var u=function(){for(var l=[],g=0;g<arguments.length;g++)l[g]=arguments[g];var f=l.shift();if(f){c.error(f);return}c.next(l.length<=1?l[0]:l),c.complete()};try{t.apply(a,n.concat([u]))}catch(l){Ba(c)?c.error(l):console.warn(l)}}return c.subscribe(o)})}}function _p(t){var e=this,r=t.params,n=t.subscriber,i=t.context,s=r.callbackFunc,o=r.args,a=r.scheduler,c=r.subject;if(!c){c=r.subject=new Wr;var u=function(){for(var l=[],g=0;g<arguments.length;g++)l[g]=arguments[g];var f=l.shift();if(f)e.add(a.schedule(jc,0,{err:f,subject:c}));else{var p=l.length<=1?l[0]:l;e.add(a.schedule(wp,0,{value:p,subject:c}))}};try{s.apply(i,o.concat([u]))}catch(l){this.add(a.schedule(jc,0,{err:l,subject:c}))}}this.add(c.subscribe(n))}function wp(t){var e=t.value,r=t.subject;r.next(e),r.complete()}function jc(t){var e=t.err,r=t.subject;r.error(e)}var rr=function(t){R(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.notifyNext=function(r,n,i,s,o){this.destination.next(n)},e.prototype.notifyError=function(r,n){this.destination.error(r)},e.prototype.notifyComplete=function(r){this.destination.complete()},e}(W),Sp=function(t){R(e,t);function e(r,n,i){var s=t.call(this)||this;return s.parent=r,s.outerValue=n,s.outerIndex=i,s.index=0,s}return e.prototype._next=function(r){this.parent.notifyNext(this.outerValue,r,this.outerIndex,this.index++,this)},e.prototype._error=function(r){this.parent.notifyError(r,this),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},e}(W),Ep=function(t){return function(e){return t.then(function(r){e.closed||(e.next(r),e.complete())},function(r){return e.error(r)}).then(null,pr),e}};function xp(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var jt=xp(),Cp=function(t){return function(e){var r=t[jt]();do{var n=void 0;try{n=r.next()}catch(i){return e.error(i),e}if(n.done){e.complete();break}if(e.next(n.value),e.closed)break}while(!0);return typeof r.return=="function"&&e.add(function(){r.return&&r.return()}),e}},kp=function(t){return function(e){var r=t[Fr]();if(typeof r.subscribe!="function")throw new TypeError("Provided object does not correctly implement Symbol.observable");return r.subscribe(e)}},Ul=function(t){return t&&typeof t.length=="number"&&typeof t!="function"};function Hl(t){return!!t&&typeof t.subscribe!="function"&&typeof t.then=="function"}var dn=function(t){if(!!t&&typeof t[Fr]=="function")return kp(t);if(Ul(t))return Nl(t);if(Hl(t))return Ep(t);if(!!t&&typeof t[jt]=="function")return Cp(t);var e=ja(t)?"an invalid object":"'"+t+"'",r="You provided "+e+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.";throw new TypeError(r)};function wt(t,e,r,n,i){if(i===void 0&&(i=new Sp(t,r,n)),!i.closed)return e instanceof K?e.subscribe(i):dn(e)(i)}var Bc={};function Ap(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=void 0,n=void 0;return Ue(t[t.length-1])&&(n=t.pop()),typeof t[t.length-1]=="function"&&(r=t.pop()),t.length===1&&je(t[0])&&(t=t[0]),wn(t,n).lift(new Ha(r))}var Ha=function(){function t(e){this.resultSelector=e}return t.prototype.call=function(e,r){return r.subscribe(new Mp(e,this.resultSelector))},t}(),Mp=function(t){R(e,t);function e(r,n){var i=t.call(this,r)||this;return i.resultSelector=n,i.active=0,i.values=[],i.observables=[],i}return e.prototype._next=function(r){this.values.push(Bc),this.observables.push(r)},e.prototype._complete=function(){var r=this.observables,n=r.length;if(n===0)this.destination.complete();else{this.active=n,this.toRespond=n;for(var i=0;i<n;i++){var s=r[i];this.add(wt(this,s,void 0,i))}}},e.prototype.notifyComplete=function(r){(this.active-=1)===0&&this.destination.complete()},e.prototype.notifyNext=function(r,n,i){var s=this.values,o=s[i],a=this.toRespond?o===Bc?--this.toRespond:this.toRespond:0;s[i]=n,a===0&&(this.resultSelector?this._tryResultSelector(s):this.destination.next(s.slice()))},e.prototype._tryResultSelector=function(r){var n;try{n=this.resultSelector.apply(this,r)}catch(i){this.destination.error(i);return}this.destination.next(n)},e}(rr);function Ip(t,e){return new K(function(r){var n=new pe;return n.add(e.schedule(function(){var i=t[Fr]();n.add(i.subscribe({next:function(s){n.add(e.schedule(function(){return r.next(s)}))},error:function(s){n.add(e.schedule(function(){return r.error(s)}))},complete:function(){n.add(e.schedule(function(){return r.complete()}))}}))})),n})}function Rp(t,e){return new K(function(r){var n=new pe;return n.add(e.schedule(function(){return t.then(function(i){n.add(e.schedule(function(){r.next(i),n.add(e.schedule(function(){return r.complete()}))}))},function(i){n.add(e.schedule(function(){return r.error(i)}))})})),n})}function Tp(t,e){if(!t)throw new Error("Iterable cannot be null");return new K(function(r){var n=new pe,i;return n.add(function(){i&&typeof i.return=="function"&&i.return()}),n.add(e.schedule(function(){i=t[jt](),n.add(e.schedule(function(){if(!r.closed){var s,o;try{var a=i.next();s=a.value,o=a.done}catch(c){r.error(c);return}o?r.complete():(r.next(s),this.schedule())}}))})),n})}function Op(t){return t&&typeof t[Fr]=="function"}function Np(t){return t&&typeof t[jt]=="function"}function Vl(t,e){if(t!=null){if(Op(t))return Ip(t,e);if(Hl(t))return Rp(t,e);if(Ul(t))return $a(t,e);if(Np(t)||typeof t=="string")return Tp(t,e)}throw new TypeError((t!==null&&typeof t||t)+" is not observable")}function Et(t,e){return e?Vl(t,e):t instanceof K?t:new K(dn(t))}var be=function(t){R(e,t);function e(r){var n=t.call(this)||this;return n.parent=r,n}return e.prototype._next=function(r){this.parent.notifyNext(r)},e.prototype._error=function(r){this.parent.notifyError(r),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(),this.unsubscribe()},e}(W),ge=function(t){R(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.notifyNext=function(r){this.destination.next(r)},e.prototype.notifyError=function(r){this.destination.error(r)},e.prototype.notifyComplete=function(){this.destination.complete()},e}(W);function ye(t,e){if(!e.closed){if(t instanceof K)return t.subscribe(e);var r;try{r=dn(t)(e)}catch(n){e.error(n)}return r}}function Xt(t,e,r){return r===void 0&&(r=Number.POSITIVE_INFINITY),typeof e=="function"?function(n){return n.pipe(Xt(function(i,s){return Et(t(i,s)).pipe(Je(function(o,a){return e(i,o,s,a)}))},r))}:(typeof e=="number"&&(r=e),function(n){return n.lift(new Lp(t,r))})}var Lp=function(){function t(e,r){r===void 0&&(r=Number.POSITIVE_INFINITY),this.project=e,this.concurrent=r}return t.prototype.call=function(e,r){return r.subscribe(new Pp(e,this.project,this.concurrent))},t}(),Pp=function(t){R(e,t);function e(r,n,i){i===void 0&&(i=Number.POSITIVE_INFINITY);var s=t.call(this,r)||this;return s.project=n,s.concurrent=i,s.hasCompleted=!1,s.buffer=[],s.active=0,s.index=0,s}return e.prototype._next=function(r){this.active<this.concurrent?this._tryNext(r):this.buffer.push(r)},e.prototype._tryNext=function(r){var n,i=this.index++;try{n=this.project(r,i)}catch(s){this.destination.error(s);return}this.active++,this._innerSub(n)},e.prototype._innerSub=function(r){var n=new be(this),i=this.destination;i.add(n);var s=ye(r,n);s!==n&&i.add(s)},e.prototype._complete=function(){this.hasCompleted=!0,this.active===0&&this.buffer.length===0&&this.destination.complete(),this.unsubscribe()},e.prototype.notifyNext=function(r){this.destination.next(r)},e.prototype.notifyComplete=function(){var r=this.buffer;this.active--,r.length>0?this._next(r.shift()):this.active===0&&this.hasCompleted&&this.destination.complete()},e}(ge),Dp=Xt;function Va(t){return t===void 0&&(t=Number.POSITIVE_INFINITY),Xt(Dt,t)}function zl(){return Va(1)}function pn(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return zl()(Mi.apply(void 0,t))}function za(t){return new K(function(e){var r;try{r=t()}catch(i){e.error(i);return}var n=r?Et(r):$r();return n.subscribe(e)})}function jp(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(t.length===1){var r=t[0];if(je(r))return Fn(r,null);if(ja(r)&&Object.getPrototypeOf(r)===Object.prototype){var n=Object.keys(r);return Fn(n.map(function(s){return r[s]}),n)}}if(typeof t[t.length-1]=="function"){var i=t.pop();return t=t.length===1&&je(t[0])?t[0]:t,Fn(t,null).pipe(Je(function(s){return i.apply(void 0,s)}))}return Fn(t,null)}function Fn(t,e){return new K(function(r){var n=t.length;if(n===0){r.complete();return}for(var i=new Array(n),s=0,o=0,a=function(u){var l=Et(t[u]),g=!1;r.add(l.subscribe({next:function(f){g||(g=!0,o++),i[u]=f},error:function(f){return r.error(f)},complete:function(){s++,(s===n||!g)&&(o===n&&r.next(e?e.reduce(function(f,p,y){return f[p]=i[y],f},{}):i),r.complete())}}))},c=0;c<n;c++)a(c)})}function ql(t,e,r,n){return Er(r)&&(n=r,r=void 0),n?ql(t,e,r).pipe(Je(function(i){return je(i)?n.apply(void 0,i):n(i)})):new K(function(i){function s(o){arguments.length>1?i.next(Array.prototype.slice.call(arguments)):i.next(o)}Gl(t,e,s,i,r)})}function Gl(t,e,r,n,i){var s;if($p(t)){var o=t;t.addEventListener(e,r,i),s=function(){return o.removeEventListener(e,r,i)}}else if(Fp(t)){var a=t;t.on(e,r),s=function(){return a.off(e,r)}}else if(Bp(t)){var c=t;t.addListener(e,r),s=function(){return c.removeListener(e,r)}}else if(t&&t.length)for(var u=0,l=t.length;u<l;u++)Gl(t[u],e,r,n,i);else throw new TypeError("Invalid event target");n.add(s)}function Bp(t){return t&&typeof t.addListener=="function"&&typeof t.removeListener=="function"}function Fp(t){return t&&typeof t.on=="function"&&typeof t.off=="function"}function $p(t){return t&&typeof t.addEventListener=="function"&&typeof t.removeEventListener=="function"}function Ql(t,e,r){return r?Ql(t,e).pipe(Je(function(n){return je(n)?r.apply(void 0,n):r(n)})):new K(function(n){var i=function(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];return n.next(o.length===1?o[0]:o)},s;try{s=t(i)}catch(o){n.error(o);return}if(!!Er(e))return function(){return e(i,s)}})}function Wp(t,e,r,n,i){var s,o;if(arguments.length==1){var a=t;o=a.initialState,e=a.condition,r=a.iterate,s=a.resultSelector||Dt,i=a.scheduler}else n===void 0||Ue(n)?(o=t,s=Dt,i=n):(o=t,s=n);return new K(function(c){var u=o;if(i)return i.schedule(Up,0,{subscriber:c,iterate:r,condition:e,resultSelector:s,state:u});do{if(e){var l=void 0;try{l=e(u)}catch(f){c.error(f);return}if(!l){c.complete();break}}var g=void 0;try{g=s(u)}catch(f){c.error(f);return}if(c.next(g),c.closed)break;try{u=r(u)}catch(f){c.error(f);return}}while(!0)})}function Up(t){var e=t.subscriber,r=t.condition;if(!e.closed){if(t.needIterate)try{t.state=t.iterate(t.state)}catch(s){e.error(s);return}else t.needIterate=!0;if(r){var n=void 0;try{n=r(t.state)}catch(s){e.error(s);return}if(!n){e.complete();return}if(e.closed)return}var i;try{i=t.resultSelector(t.state)}catch(s){e.error(s);return}if(!e.closed&&(e.next(i),!e.closed))return this.schedule(t)}}function Hp(t,e,r){return e===void 0&&(e=xr),r===void 0&&(r=xr),za(function(){return t()?e:r})}function kr(t){return!je(t)&&t-parseFloat(t)+1>=0}function Vp(t,e){return t===void 0&&(t=0),e===void 0&&(e=Be),(!kr(t)||t<0)&&(t=0),(!e||typeof e.schedule!="function")&&(e=Be),new K(function(r){return r.add(e.schedule(zp,t,{subscriber:r,counter:0,period:t})),r})}function zp(t){var e=t.subscriber,r=t.counter,n=t.period;e.next(r),this.schedule({subscriber:e,counter:r+1,period:n},n)}function Zl(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Number.POSITIVE_INFINITY,n=null,i=t[t.length-1];return Ue(i)?(n=t.pop(),t.length>1&&typeof t[t.length-1]=="number"&&(r=t.pop())):typeof i=="number"&&(r=t.pop()),n===null&&t.length===1&&t[0]instanceof K?t[0]:Va(r)(wn(t,n))}var Yl=new K(ct);function qp(){return Yl}function ga(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(t.length===0)return xr;var r=t[0],n=t.slice(1);return t.length===1&&je(r)?ga.apply(void 0,r):new K(function(i){var s=function(){return i.add(ga.apply(void 0,n).subscribe(i))};return Et(r).subscribe({next:function(o){i.next(o)},error:s,complete:s})})}function Gp(t,e){return e?new K(function(r){var n=Object.keys(t),i=new pe;return i.add(e.schedule(Qp,0,{keys:n,index:0,subscriber:r,subscription:i,obj:t})),i}):new K(function(r){for(var n=Object.keys(t),i=0;i<n.length&&!r.closed;i++){var s=n[i];t.hasOwnProperty(s)&&r.next([s,t[s]])}r.complete()})}function Qp(t){var e=t.keys,r=t.index,n=t.subscriber,i=t.subscription,s=t.obj;if(!n.closed)if(r<e.length){var o=e[r];n.next([o,s[o]]),i.add(this.schedule({keys:e,index:r+1,subscriber:n,subscription:i,obj:s}))}else n.complete()}function Kl(t,e){function r(){return!r.pred.apply(r.thisArg,arguments)}return r.pred=t,r.thisArg=e,r}function Bt(t,e){return function(n){return n.lift(new Zp(t,e))}}var Zp=function(){function t(e,r){this.predicate=e,this.thisArg=r}return t.prototype.call=function(e,r){return r.subscribe(new Yp(e,this.predicate,this.thisArg))},t}(),Yp=function(t){R(e,t);function e(r,n,i){var s=t.call(this,r)||this;return s.predicate=n,s.thisArg=i,s.count=0,s}return e.prototype._next=function(r){var n;try{n=this.predicate.call(this.thisArg,r,this.count++)}catch(i){this.destination.error(i);return}n&&this.destination.next(r)},e}(W);function Kp(t,e,r){return[Bt(e,r)(new K(dn(t))),Bt(Kl(e,r))(new K(dn(t)))]}function Jl(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(t.length===1)if(je(t[0]))t=t[0];else return t[0];return wn(t,void 0).lift(new Jp)}var Jp=function(){function t(){}return t.prototype.call=function(e,r){return r.subscribe(new Xp(e))},t}(),Xp=function(t){R(e,t);function e(r){var n=t.call(this,r)||this;return n.hasFirst=!1,n.observables=[],n.subscriptions=[],n}return e.prototype._next=function(r){this.observables.push(r)},e.prototype._complete=function(){var r=this.observables,n=r.length;if(n===0)this.destination.complete();else{for(var i=0;i<n&&!this.hasFirst;i++){var s=r[i],o=wt(this,s,void 0,i);this.subscriptions&&this.subscriptions.push(o),this.add(o)}this.observables=null}},e.prototype.notifyNext=function(r,n,i){if(!this.hasFirst){this.hasFirst=!0;for(var s=0;s<this.subscriptions.length;s++)if(s!==i){var o=this.subscriptions[s];o.unsubscribe(),this.remove(o)}this.subscriptions=null}this.destination.next(n)},e}(rr);function e0(t,e,r){return t===void 0&&(t=0),new K(function(n){e===void 0&&(e=t,t=0);var i=0,s=t;if(r)return r.schedule(t0,0,{index:i,count:e,start:t,subscriber:n});do{if(i++>=e){n.complete();break}if(n.next(s++),n.closed)break}while(!0)})}function t0(t){var e=t.start,r=t.index,n=t.count,i=t.subscriber;if(r>=n){i.complete();return}i.next(e),!i.closed&&(t.index=r+1,t.start=e+1,this.schedule(t))}function Xl(t,e,r){t===void 0&&(t=0);var n=-1;return kr(e)?n=Number(e)<1&&1||Number(e):Ue(e)&&(r=e),Ue(r)||(r=Be),new K(function(i){var s=kr(t)?t:+t-r.now();return r.schedule(r0,s,{index:0,period:n,subscriber:i})})}function r0(t){var e=t.index,r=t.period,n=t.subscriber;if(n.next(e),!n.closed){if(r===-1)return n.complete();t.index=e+1,this.schedule(t,r)}}function n0(t,e){return new K(function(r){var n;try{n=t()}catch(a){r.error(a);return}var i;try{i=e(n)}catch(a){r.error(a);return}var s=i?Et(i):xr,o=s.subscribe(r);return function(){o.unsubscribe(),n&&n.unsubscribe()}})}function ef(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=t[t.length-1];return typeof r=="function"&&t.pop(),wn(t,void 0).lift(new tf(r))}var tf=function(){function t(e){this.resultSelector=e}return t.prototype.call=function(e,r){return r.subscribe(new i0(e,this.resultSelector))},t}(),i0=function(t){R(e,t);function e(r,n,i){var s=t.call(this,r)||this;return s.resultSelector=n,s.iterators=[],s.active=0,s.resultSelector=typeof n=="function"?n:void 0,s}return e.prototype._next=function(r){var n=this.iterators;je(r)?n.push(new o0(r)):typeof r[jt]=="function"?n.push(new s0(r[jt]())):n.push(new a0(this.destination,this,r))},e.prototype._complete=function(){var r=this.iterators,n=r.length;if(this.unsubscribe(),n===0){this.destination.complete();return}this.active=n;for(var i=0;i<n;i++){var s=r[i];if(s.stillUnsubscribed){var o=this.destination;o.add(s.subscribe())}else this.active--}},e.prototype.notifyInactive=function(){this.active--,this.active===0&&this.destination.complete()},e.prototype.checkIterators=function(){for(var r=this.iterators,n=r.length,i=this.destination,s=0;s<n;s++){var o=r[s];if(typeof o.hasValue=="function"&&!o.hasValue())return}for(var a=!1,c=[],s=0;s<n;s++){var o=r[s],u=o.next();if(o.hasCompleted()&&(a=!0),u.done){i.complete();return}c.push(u.value)}this.resultSelector?this._tryresultSelector(c):i.next(c),a&&i.complete()},e.prototype._tryresultSelector=function(r){var n;try{n=this.resultSelector.apply(this,r)}catch(i){this.destination.error(i);return}this.destination.next(n)},e}(W),s0=function(){function t(e){this.iterator=e,this.nextResult=e.next()}return t.prototype.hasValue=function(){return!0},t.prototype.next=function(){var e=this.nextResult;return this.nextResult=this.iterator.next(),e},t.prototype.hasCompleted=function(){var e=this.nextResult;return Boolean(e&&e.done)},t}(),o0=function(){function t(e){this.array=e,this.index=0,this.length=0,this.length=e.length}return t.prototype[jt]=function(){return this},t.prototype.next=function(e){var r=this.index++,n=this.array;return r<this.length?{value:n[r],done:!1}:{value:null,done:!0}},t.prototype.hasValue=function(){return this.array.length>this.index},t.prototype.hasCompleted=function(){return this.array.length===this.index},t}(),a0=function(t){R(e,t);function e(r,n,i){var s=t.call(this,r)||this;return s.parent=n,s.observable=i,s.stillUnsubscribed=!0,s.buffer=[],s.isComplete=!1,s}return e.prototype[jt]=function(){return this},e.prototype.next=function(){var r=this.buffer;return r.length===0&&this.isComplete?{value:null,done:!0}:{value:r.shift(),done:!1}},e.prototype.hasValue=function(){return this.buffer.length>0},e.prototype.hasCompleted=function(){return this.buffer.length===0&&this.isComplete},e.prototype.notifyComplete=function(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},e.prototype.notifyNext=function(r){this.buffer.push(r),this.parent.checkIterators()},e.prototype.subscribe=function(){return ye(this.observable,new be(this))},e}(ge);const c0=Object.freeze(Object.defineProperty({__proto__:null,Observable:K,ConnectableObservable:Il,GroupedObservable:ha,observable:Fr,Subject:ke,BehaviorSubject:Rl,ReplaySubject:Ua,AsyncSubject:Wr,asap:Yn,asapScheduler:Pl,async:Be,asyncScheduler:Dl,queue:Ol,queueScheduler:Tl,animationFrame:lp,animationFrameScheduler:jl,VirtualTimeScheduler:fp,VirtualAction:Bl,Scheduler:da,Subscription:pe,Subscriber:W,Notification:_t,get NotificationKind(){return pa},pipe:fa,noop:ct,identity:Dt,isObservable:hp,ArgumentOutOfRangeError:Cr,EmptyError:Sn,ObjectUnsubscribedError:Rt,UnsubscriptionError:rn,TimeoutError:Fl,bindCallback:$l,bindNodeCallback:Wl,combineLatest:Ap,concat:pn,defer:za,empty:$r,forkJoin:jp,from:Et,fromEvent:ql,fromEventPattern:Ql,generate:Wp,iif:Hp,interval:Vp,merge:Zl,never:qp,of:Mi,onErrorResumeNext:ga,pairs:Gp,partition:Kp,race:Jl,range:e0,throwError:Wa,timer:Xl,using:n0,zip:ef,scheduled:Vl,EMPTY:xr,NEVER:Yl,config:Ge},Symbol.toStringTag,{value:"Module"})),Ur=Pr(c0);function rf(t){return function(r){return r.lift(new u0(t))}}var u0=function(){function t(e){this.durationSelector=e}return t.prototype.call=function(e,r){return r.subscribe(new l0(e,this.durationSelector))},t}(),l0=function(t){R(e,t);function e(r,n){var i=t.call(this,r)||this;return i.durationSelector=n,i.hasValue=!1,i}return e.prototype._next=function(r){if(this.value=r,this.hasValue=!0,!this.throttled){var n=void 0;try{var i=this.durationSelector;n=i(r)}catch(o){return this.destination.error(o)}var s=ye(n,new be(this));!s||s.closed?this.clearThrottle():this.add(this.throttled=s)}},e.prototype.clearThrottle=function(){var r=this,n=r.value,i=r.hasValue,s=r.throttled;s&&(this.remove(s),this.throttled=void 0,s.unsubscribe()),i&&(this.value=void 0,this.hasValue=!1,this.destination.next(n))},e.prototype.notifyNext=function(){this.clearThrottle()},e.prototype.notifyComplete=function(){this.clearThrottle()},e}(ge);function f0(t,e){return e===void 0&&(e=Be),rf(function(){return Xl(t,e)})}function h0(t){return function(r){return r.lift(new d0(t))}}var d0=function(){function t(e){this.closingNotifier=e}return t.prototype.call=function(e,r){return r.subscribe(new p0(e,this.closingNotifier))},t}(),p0=function(t){R(e,t);function e(r,n){var i=t.call(this,r)||this;return i.buffer=[],i.add(ye(n,new be(i))),i}return e.prototype._next=function(r){this.buffer.push(r)},e.prototype.notifyNext=function(){var r=this.buffer;this.buffer=[],this.destination.next(r)},e}(ge);function b0(t,e){return e===void 0&&(e=null),function(n){return n.lift(new g0(t,e))}}var g0=function(){function t(e,r){this.bufferSize=e,this.startBufferEvery=r,!r||e===r?this.subscriberClass=y0:this.subscriberClass=v0}return t.prototype.call=function(e,r){return r.subscribe(new this.subscriberClass(e,this.bufferSize,this.startBufferEvery))},t}(),y0=function(t){R(e,t);function e(r,n){var i=t.call(this,r)||this;return i.bufferSize=n,i.buffer=[],i}return e.prototype._next=function(r){var n=this.buffer;n.push(r),n.length==this.bufferSize&&(this.destination.next(n),this.buffer=[])},e.prototype._complete=function(){var r=this.buffer;r.length>0&&this.destination.next(r),t.prototype._complete.call(this)},e}(W),v0=function(t){R(e,t);function e(r,n,i){var s=t.call(this,r)||this;return s.bufferSize=n,s.startBufferEvery=i,s.buffers=[],s.count=0,s}return e.prototype._next=function(r){var n=this,i=n.bufferSize,s=n.startBufferEvery,o=n.buffers,a=n.count;this.count++,a%s===0&&o.push([]);for(var c=o.length;c--;){var u=o[c];u.push(r),u.length===i&&(o.splice(c,1),this.destination.next(u))}},e.prototype._complete=function(){for(var r=this,n=r.buffers,i=r.destination;n.length>0;){var s=n.shift();s.length>0&&i.next(s)}t.prototype._complete.call(this)},e}(W);function m0(t){var e=arguments.length,r=Be;Ue(arguments[arguments.length-1])&&(r=arguments[arguments.length-1],e--);var n=null;e>=2&&(n=arguments[1]);var i=Number.POSITIVE_INFINITY;return e>=3&&(i=arguments[2]),function(o){return o.lift(new _0(t,n,i,r))}}var _0=function(){function t(e,r,n,i){this.bufferTimeSpan=e,this.bufferCreationInterval=r,this.maxBufferSize=n,this.scheduler=i}return t.prototype.call=function(e,r){return r.subscribe(new S0(e,this.bufferTimeSpan,this.bufferCreationInterval,this.maxBufferSize,this.scheduler))},t}(),w0=function(){function t(){this.buffer=[]}return t}(),S0=function(t){R(e,t);function e(r,n,i,s,o){var a=t.call(this,r)||this;a.bufferTimeSpan=n,a.bufferCreationInterval=i,a.maxBufferSize=s,a.scheduler=o,a.contexts=[];var c=a.openContext();if(a.timespanOnly=i==null||i<0,a.timespanOnly){var u={subscriber:a,context:c,bufferTimeSpan:n};a.add(c.closeAction=o.schedule(Fc,n,u))}else{var l={subscriber:a,context:c},g={bufferTimeSpan:n,bufferCreationInterval:i,subscriber:a,scheduler:o};a.add(c.closeAction=o.schedule(nf,n,l)),a.add(o.schedule(E0,i,g))}return a}return e.prototype._next=function(r){for(var n=this.contexts,i=n.length,s,o=0;o<i;o++){var a=n[o],c=a.buffer;c.push(r),c.length==this.maxBufferSize&&(s=a)}s&&this.onBufferFull(s)},e.prototype._error=function(r){this.contexts.length=0,t.prototype._error.call(this,r)},e.prototype._complete=function(){for(var r=this,n=r.contexts,i=r.destination;n.length>0;){var s=n.shift();i.next(s.buffer)}t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){this.contexts=null},e.prototype.onBufferFull=function(r){this.closeContext(r);var n=r.closeAction;if(n.unsubscribe(),this.remove(n),!this.closed&&this.timespanOnly){r=this.openContext();var i=this.bufferTimeSpan,s={subscriber:this,context:r,bufferTimeSpan:i};this.add(r.closeAction=this.scheduler.schedule(Fc,i,s))}},e.prototype.openContext=function(){var r=new w0;return this.contexts.push(r),r},e.prototype.closeContext=function(r){this.destination.next(r.buffer);var n=this.contexts,i=n?n.indexOf(r):-1;i>=0&&n.splice(n.indexOf(r),1)},e}(W);function Fc(t){var e=t.subscriber,r=t.context;r&&e.closeContext(r),e.closed||(t.context=e.openContext(),t.context.closeAction=this.schedule(t,t.bufferTimeSpan))}function E0(t){var e=t.bufferCreationInterval,r=t.bufferTimeSpan,n=t.subscriber,i=t.scheduler,s=n.openContext(),o=this;n.closed||(n.add(s.closeAction=i.schedule(nf,r,{subscriber:n,context:s})),o.schedule(t,e))}function nf(t){var e=t.subscriber,r=t.context;e.closeContext(r)}function x0(t,e){return function(n){return n.lift(new C0(t,e))}}var C0=function(){function t(e,r){this.openings=e,this.closingSelector=r}return t.prototype.call=function(e,r){return r.subscribe(new k0(e,this.openings,this.closingSelector))},t}(),k0=function(t){R(e,t);function e(r,n,i){var s=t.call(this,r)||this;return s.closingSelector=i,s.contexts=[],s.add(wt(s,n)),s}return e.prototype._next=function(r){for(var n=this.contexts,i=n.length,s=0;s<i;s++)n[s].buffer.push(r)},e.prototype._error=function(r){for(var n=this.contexts;n.length>0;){var i=n.shift();i.subscription.unsubscribe(),i.buffer=null,i.subscription=null}this.contexts=null,t.prototype._error.call(this,r)},e.prototype._complete=function(){for(var r=this.contexts;r.length>0;){var n=r.shift();this.destination.next(n.buffer),n.subscription.unsubscribe(),n.buffer=null,n.subscription=null}this.contexts=null,t.prototype._complete.call(this)},e.prototype.notifyNext=function(r,n){r?this.closeBuffer(r):this.openBuffer(n)},e.prototype.notifyComplete=function(r){this.closeBuffer(r.context)},e.prototype.openBuffer=function(r){try{var n=this.closingSelector,i=n.call(this,r);i&&this.trySubscribe(i)}catch(s){this._error(s)}},e.prototype.closeBuffer=function(r){var n=this.contexts;if(n&&r){var i=r.buffer,s=r.subscription;this.destination.next(i),n.splice(n.indexOf(r),1),this.remove(s),s.unsubscribe()}},e.prototype.trySubscribe=function(r){var n=this.contexts,i=[],s=new pe,o={buffer:i,subscription:s};n.push(o);var a=wt(this,r,o);!a||a.closed?this.closeBuffer(o):(a.context=o,this.add(a),s.add(a))},e}(rr);function A0(t){return function(e){return e.lift(new M0(t))}}var M0=function(){function t(e){this.closingSelector=e}return t.prototype.call=function(e,r){return r.subscribe(new I0(e,this.closingSelector))},t}(),I0=function(t){R(e,t);function e(r,n){var i=t.call(this,r)||this;return i.closingSelector=n,i.subscribing=!1,i.openBuffer(),i}return e.prototype._next=function(r){this.buffer.push(r)},e.prototype._complete=function(){var r=this.buffer;r&&this.destination.next(r),t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){this.buffer=void 0,this.subscribing=!1},e.prototype.notifyNext=function(){this.openBuffer()},e.prototype.notifyComplete=function(){this.subscribing?this.complete():this.openBuffer()},e.prototype.openBuffer=function(){var r=this.closingSubscription;r&&(this.remove(r),r.unsubscribe());var n=this.buffer;this.buffer&&this.destination.next(n),this.buffer=[];var i;try{var s=this.closingSelector;i=s()}catch(o){return this.error(o)}r=new pe,this.closingSubscription=r,this.add(r),this.subscribing=!0,r.add(ye(i,new be(this))),this.subscribing=!1},e}(ge);function R0(t){return function(r){var n=new T0(t),i=r.lift(n);return n.caught=i}}var T0=function(){function t(e){this.selector=e}return t.prototype.call=function(e,r){return r.subscribe(new O0(e,this.selector,this.caught))},t}(),O0=function(t){R(e,t);function e(r,n,i){var s=t.call(this,r)||this;return s.selector=n,s.caught=i,s}return e.prototype.error=function(r){if(!this.isStopped){var n=void 0;try{n=this.selector(r,this.caught)}catch(o){t.prototype.error.call(this,o);return}this._unsubscribeAndRecycle();var i=new be(this);this.add(i);var s=ye(n,i);s!==i&&this.add(s)}},e}(ge);function N0(t){return function(e){return e.lift(new Ha(t))}}function L0(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=null;return typeof t[t.length-1]=="function"&&(r=t.pop()),t.length===1&&je(t[0])&&(t=t[0].slice()),function(n){return n.lift.call(Et([n].concat(t)),new Ha(r))}}function P0(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(r){return r.lift.call(pn.apply(void 0,[r].concat(t)))}}function sf(t,e){return Xt(t,e,1)}function D0(t,e){return sf(function(){return t},e)}function j0(t){return function(e){return e.lift(new B0(t,e))}}var B0=function(){function t(e,r){this.predicate=e,this.source=r}return t.prototype.call=function(e,r){return r.subscribe(new F0(e,this.predicate,this.source))},t}(),F0=function(t){R(e,t);function e(r,n,i){var s=t.call(this,r)||this;return s.predicate=n,s.source=i,s.count=0,s.index=0,s}return e.prototype._next=function(r){this.predicate?this._tryPredicate(r):this.count++},e.prototype._tryPredicate=function(r){var n;try{n=this.predicate(r,this.index++,this.source)}catch(i){this.destination.error(i);return}n&&this.count++},e.prototype._complete=function(){this.destination.next(this.count),this.destination.complete()},e}(W);function $0(t){return function(e){return e.lift(new W0(t))}}var W0=function(){function t(e){this.durationSelector=e}return t.prototype.call=function(e,r){return r.subscribe(new U0(e,this.durationSelector))},t}(),U0=function(t){R(e,t);function e(r,n){var i=t.call(this,r)||this;return i.durationSelector=n,i.hasValue=!1,i}return e.prototype._next=function(r){try{var n=this.durationSelector.call(this,r);n&&this._tryNext(r,n)}catch(i){this.destination.error(i)}},e.prototype._complete=function(){this.emitValue(),this.destination.complete()},e.prototype._tryNext=function(r,n){var i=this.durationSubscription;this.value=r,this.hasValue=!0,i&&(i.unsubscribe(),this.remove(i)),i=ye(n,new be(this)),i&&!i.closed&&this.add(this.durationSubscription=i)},e.prototype.notifyNext=function(){this.emitValue()},e.prototype.notifyComplete=function(){this.emitValue()},e.prototype.emitValue=function(){if(this.hasValue){var r=this.value,n=this.durationSubscription;n&&(this.durationSubscription=void 0,n.unsubscribe(),this.remove(n)),this.value=void 0,this.hasValue=!1,t.prototype._next.call(this,r)}},e}(ge);function H0(t,e){return e===void 0&&(e=Be),function(r){return r.lift(new V0(t,e))}}var V0=function(){function t(e,r){this.dueTime=e,this.scheduler=r}return t.prototype.call=function(e,r){return r.subscribe(new z0(e,this.dueTime,this.scheduler))},t}(),z0=function(t){R(e,t);function e(r,n,i){var s=t.call(this,r)||this;return s.dueTime=n,s.scheduler=i,s.debouncedSubscription=null,s.lastValue=null,s.hasValue=!1,s}return e.prototype._next=function(r){this.clearDebounce(),this.lastValue=r,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(q0,this.dueTime,this))},e.prototype._complete=function(){this.debouncedNext(),this.destination.complete()},e.prototype.debouncedNext=function(){if(this.clearDebounce(),this.hasValue){var r=this.lastValue;this.lastValue=null,this.hasValue=!1,this.destination.next(r)}},e.prototype.clearDebounce=function(){var r=this.debouncedSubscription;r!==null&&(this.remove(r),r.unsubscribe(),this.debouncedSubscription=null)},e}(W);function q0(t){t.debouncedNext()}function En(t){return t===void 0&&(t=null),function(e){return e.lift(new G0(t))}}var G0=function(){function t(e){this.defaultValue=e}return t.prototype.call=function(e,r){return r.subscribe(new Q0(e,this.defaultValue))},t}(),Q0=function(t){R(e,t);function e(r,n){var i=t.call(this,r)||this;return i.defaultValue=n,i.isEmpty=!0,i}return e.prototype._next=function(r){this.isEmpty=!1,this.destination.next(r)},e.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},e}(W);function of(t){return t instanceof Date&&!isNaN(+t)}function Z0(t,e){e===void 0&&(e=Be);var r=of(t),n=r?+t-e.now():Math.abs(t);return function(i){return i.lift(new Y0(n,e))}}var Y0=function(){function t(e,r){this.delay=e,this.scheduler=r}return t.prototype.call=function(e,r){return r.subscribe(new K0(e,this.delay,this.scheduler))},t}(),K0=function(t){R(e,t);function e(r,n,i){var s=t.call(this,r)||this;return s.delay=n,s.scheduler=i,s.queue=[],s.active=!1,s.errored=!1,s}return e.dispatch=function(r){for(var n=r.source,i=n.queue,s=r.scheduler,o=r.destination;i.length>0&&i[0].time-s.now()<=0;)i.shift().notification.observe(o);if(i.length>0){var a=Math.max(0,i[0].time-s.now());this.schedule(r,a)}else this.unsubscribe(),n.active=!1},e.prototype._schedule=function(r){this.active=!0;var n=this.destination;n.add(r.schedule(e.dispatch,this.delay,{source:this,destination:this.destination,scheduler:r}))},e.prototype.scheduleNotification=function(r){if(this.errored!==!0){var n=this.scheduler,i=new J0(n.now()+this.delay,r);this.queue.push(i),this.active===!1&&this._schedule(n)}},e.prototype._next=function(r){this.scheduleNotification(_t.createNext(r))},e.prototype._error=function(r){this.errored=!0,this.queue=[],this.destination.error(r),this.unsubscribe()},e.prototype._complete=function(){this.scheduleNotification(_t.createComplete()),this.unsubscribe()},e}(W),J0=function(){function t(e,r){this.time=e,this.notification=r}return t}();function X0(t,e){return e?function(r){return new tb(r,e).lift(new $c(t))}:function(r){return r.lift(new $c(t))}}var $c=function(){function t(e){this.delayDurationSelector=e}return t.prototype.call=function(e,r){return r.subscribe(new eb(e,this.delayDurationSelector))},t}(),eb=function(t){R(e,t);function e(r,n){var i=t.call(this,r)||this;return i.delayDurationSelector=n,i.completed=!1,i.delayNotifierSubscriptions=[],i.index=0,i}return e.prototype.notifyNext=function(r,n,i,s,o){this.destination.next(r),this.removeSubscription(o),this.tryComplete()},e.prototype.notifyError=function(r,n){this._error(r)},e.prototype.notifyComplete=function(r){var n=this.removeSubscription(r);n&&this.destination.next(n),this.tryComplete()},e.prototype._next=function(r){var n=this.index++;try{var i=this.delayDurationSelector(r,n);i&&this.tryDelay(i,r)}catch(s){this.destination.error(s)}},e.prototype._complete=function(){this.completed=!0,this.tryComplete(),this.unsubscribe()},e.prototype.removeSubscription=function(r){r.unsubscribe();var n=this.delayNotifierSubscriptions.indexOf(r);return n!==-1&&this.delayNotifierSubscriptions.splice(n,1),r.outerValue},e.prototype.tryDelay=function(r,n){var i=wt(this,r,n);if(i&&!i.closed){var s=this.destination;s.add(i),this.delayNotifierSubscriptions.push(i)}},e.prototype.tryComplete=function(){this.completed&&this.delayNotifierSubscriptions.length===0&&this.destination.complete()},e}(rr),tb=function(t){R(e,t);function e(r,n){var i=t.call(this)||this;return i.source=r,i.subscriptionDelay=n,i}return e.prototype._subscribe=function(r){this.subscriptionDelay.subscribe(new rb(r,this.source))},e}(K),rb=function(t){R(e,t);function e(r,n){var i=t.call(this)||this;return i.parent=r,i.source=n,i.sourceSubscribed=!1,i}return e.prototype._next=function(r){this.subscribeToSource()},e.prototype._error=function(r){this.unsubscribe(),this.parent.error(r)},e.prototype._complete=function(){this.unsubscribe(),this.subscribeToSource()},e.prototype.subscribeToSource=function(){this.sourceSubscribed||(this.sourceSubscribed=!0,this.unsubscribe(),this.source.subscribe(this.parent))},e}(W);function nb(){return function(e){return e.lift(new ib)}}var ib=function(){function t(){}return t.prototype.call=function(e,r){return r.subscribe(new sb(e))},t}(),sb=function(t){R(e,t);function e(r){return t.call(this,r)||this}return e.prototype._next=function(r){r.observe(this.destination)},e}(W);function ob(t,e){return function(r){return r.lift(new ab(t,e))}}var ab=function(){function t(e,r){this.keySelector=e,this.flushes=r}return t.prototype.call=function(e,r){return r.subscribe(new cb(e,this.keySelector,this.flushes))},t}(),cb=function(t){R(e,t);function e(r,n,i){var s=t.call(this,r)||this;return s.keySelector=n,s.values=new Set,i&&s.add(ye(i,new be(s))),s}return e.prototype.notifyNext=function(){this.values.clear()},e.prototype.notifyError=function(r){this._error(r)},e.prototype._next=function(r){this.keySelector?this._useKeySelector(r):this._finalizeNext(r,r)},e.prototype._useKeySelector=function(r){var n,i=this.destination;try{n=this.keySelector(r)}catch(s){i.error(s);return}this._finalizeNext(n,r)},e.prototype._finalizeNext=function(r,n){var i=this.values;i.has(r)||(i.add(r),this.destination.next(n))},e}(ge);function af(t,e){return function(r){return r.lift(new ub(t,e))}}var ub=function(){function t(e,r){this.compare=e,this.keySelector=r}return t.prototype.call=function(e,r){return r.subscribe(new lb(e,this.compare,this.keySelector))},t}(),lb=function(t){R(e,t);function e(r,n,i){var s=t.call(this,r)||this;return s.keySelector=i,s.hasKey=!1,typeof n=="function"&&(s.compare=n),s}return e.prototype.compare=function(r,n){return r===n},e.prototype._next=function(r){var n;try{var i=this.keySelector;n=i?i(r):r}catch(a){return this.destination.error(a)}var s=!1;if(this.hasKey)try{var o=this.compare;s=o(this.key,n)}catch(a){return this.destination.error(a)}else this.hasKey=!0;s||(this.key=n,this.destination.next(r))},e}(W);function fb(t,e){return af(function(r,n){return e?e(r[t],n[t]):r[t]===n[t]})}function Ii(t){return t===void 0&&(t=pb),function(e){return e.lift(new hb(t))}}var hb=function(){function t(e){this.errorFactory=e}return t.prototype.call=function(e,r){return r.subscribe(new db(e,this.errorFactory))},t}(),db=function(t){R(e,t);function e(r,n){var i=t.call(this,r)||this;return i.errorFactory=n,i.hasValue=!1,i}return e.prototype._next=function(r){this.hasValue=!0,this.destination.next(r)},e.prototype._complete=function(){if(this.hasValue)return this.destination.complete();var r=void 0;try{r=this.errorFactory()}catch(n){r=n}this.destination.error(r)},e}(W);function pb(){return new Sn}function qa(t){return function(e){return t===0?$r():e.lift(new bb(t))}}var bb=function(){function t(e){if(this.total=e,this.total<0)throw new Cr}return t.prototype.call=function(e,r){return r.subscribe(new gb(e,this.total))},t}(),gb=function(t){R(e,t);function e(r,n){var i=t.call(this,r)||this;return i.total=n,i.count=0,i}return e.prototype._next=function(r){var n=this.total,i=++this.count;i<=n&&(this.destination.next(r),i===n&&(this.destination.complete(),this.unsubscribe()))},e}(W);function yb(t,e){if(t<0)throw new Cr;var r=arguments.length>=2;return function(n){return n.pipe(Bt(function(i,s){return s===t}),qa(1),r?En(e):Ii(function(){return new Cr}))}}function vb(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(r){return pn(r,Mi.apply(void 0,t))}}function mb(t,e){return function(r){return r.lift(new _b(t,e,r))}}var _b=function(){function t(e,r,n){this.predicate=e,this.thisArg=r,this.source=n}return t.prototype.call=function(e,r){return r.subscribe(new wb(e,this.predicate,this.thisArg,this.source))},t}(),wb=function(t){R(e,t);function e(r,n,i,s){var o=t.call(this,r)||this;return o.predicate=n,o.thisArg=i,o.source=s,o.index=0,o.thisArg=i||o,o}return e.prototype.notifyComplete=function(r){this.destination.next(r),this.destination.complete()},e.prototype._next=function(r){var n=!1;try{n=this.predicate.call(this.thisArg,r,this.index++,this.source)}catch(i){this.destination.error(i);return}n||this.notifyComplete(!1)},e.prototype._complete=function(){this.notifyComplete(!0)},e}(W);function Sb(){return function(t){return t.lift(new Eb)}}var Eb=function(){function t(){}return t.prototype.call=function(e,r){return r.subscribe(new xb(e))},t}(),xb=function(t){R(e,t);function e(r){var n=t.call(this,r)||this;return n.hasCompleted=!1,n.hasSubscription=!1,n}return e.prototype._next=function(r){this.hasSubscription||(this.hasSubscription=!0,this.add(ye(r,new be(this))))},e.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete()},e.prototype.notifyComplete=function(){this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},e}(ge);function cf(t,e){return e?function(r){return r.pipe(cf(function(n,i){return Et(t(n,i)).pipe(Je(function(s,o){return e(n,s,i,o)}))}))}:function(r){return r.lift(new Cb(t))}}var Cb=function(){function t(e){this.project=e}return t.prototype.call=function(e,r){return r.subscribe(new kb(e,this.project))},t}(),kb=function(t){R(e,t);function e(r,n){var i=t.call(this,r)||this;return i.project=n,i.hasSubscription=!1,i.hasCompleted=!1,i.index=0,i}return e.prototype._next=function(r){this.hasSubscription||this.tryNext(r)},e.prototype.tryNext=function(r){var n,i=this.index++;try{n=this.project(r,i)}catch(s){this.destination.error(s);return}this.hasSubscription=!0,this._innerSub(n)},e.prototype._innerSub=function(r){var n=new be(this),i=this.destination;i.add(n);var s=ye(r,n);s!==n&&i.add(s)},e.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete(),this.unsubscribe()},e.prototype.notifyNext=function(r){this.destination.next(r)},e.prototype.notifyError=function(r){this.destination.error(r)},e.prototype.notifyComplete=function(){this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},e}(ge);function Ab(t,e,r){return e===void 0&&(e=Number.POSITIVE_INFINITY),e=(e||0)<1?Number.POSITIVE_INFINITY:e,function(n){return n.lift(new Mb(t,e,r))}}var Mb=function(){function t(e,r,n){this.project=e,this.concurrent=r,this.scheduler=n}return t.prototype.call=function(e,r){return r.subscribe(new Ib(e,this.project,this.concurrent,this.scheduler))},t}(),Ib=function(t){R(e,t);function e(r,n,i,s){var o=t.call(this,r)||this;return o.project=n,o.concurrent=i,o.scheduler=s,o.index=0,o.active=0,o.hasCompleted=!1,i<Number.POSITIVE_INFINITY&&(o.buffer=[]),o}return e.dispatch=function(r){var n=r.subscriber,i=r.result,s=r.value,o=r.index;n.subscribeToProjection(i,s,o)},e.prototype._next=function(r){var n=this.destination;if(n.closed){this._complete();return}var i=this.index++;if(this.active<this.concurrent){n.next(r);try{var s=this.project,o=s(r,i);if(!this.scheduler)this.subscribeToProjection(o,r,i);else{var a={subscriber:this,result:o,value:r,index:i},c=this.destination;c.add(this.scheduler.schedule(e.dispatch,0,a))}}catch(u){n.error(u)}}else this.buffer.push(r)},e.prototype.subscribeToProjection=function(r,n,i){this.active++;var s=this.destination;s.add(ye(r,new be(this)))},e.prototype._complete=function(){this.hasCompleted=!0,this.hasCompleted&&this.active===0&&this.destination.complete(),this.unsubscribe()},e.prototype.notifyNext=function(r){this._next(r)},e.prototype.notifyComplete=function(){var r=this.buffer;this.active--,r&&r.length>0&&this._next(r.shift()),this.hasCompleted&&this.active===0&&this.destination.complete()},e}(ge);function Rb(t){return function(e){return e.lift(new Tb(t))}}var Tb=function(){function t(e){this.callback=e}return t.prototype.call=function(e,r){return r.subscribe(new Ob(e,this.callback))},t}(),Ob=function(t){R(e,t);function e(r,n){var i=t.call(this,r)||this;return i.add(new pe(n)),i}return e}(W);function Nb(t,e){if(typeof t!="function")throw new TypeError("predicate is not a function");return function(r){return r.lift(new uf(t,r,!1,e))}}var uf=function(){function t(e,r,n,i){this.predicate=e,this.source=r,this.yieldIndex=n,this.thisArg=i}return t.prototype.call=function(e,r){return r.subscribe(new Lb(e,this.predicate,this.source,this.yieldIndex,this.thisArg))},t}(),Lb=function(t){R(e,t);function e(r,n,i,s,o){var a=t.call(this,r)||this;return a.predicate=n,a.source=i,a.yieldIndex=s,a.thisArg=o,a.index=0,a}return e.prototype.notifyComplete=function(r){var n=this.destination;n.next(r),n.complete(),this.unsubscribe()},e.prototype._next=function(r){var n=this,i=n.predicate,s=n.thisArg,o=this.index++;try{var a=i.call(s||this,r,o,this.source);a&&this.notifyComplete(this.yieldIndex?o:r)}catch(c){this.destination.error(c)}},e.prototype._complete=function(){this.notifyComplete(this.yieldIndex?-1:void 0)},e}(W);function Pb(t,e){return function(r){return r.lift(new uf(t,r,!0,e))}}function Db(t,e){var r=arguments.length>=2;return function(n){return n.pipe(t?Bt(function(i,s){return t(i,s,n)}):Dt,qa(1),r?En(e):Ii(function(){return new Sn}))}}function jb(){return function(e){return e.lift(new Bb)}}var Bb=function(){function t(){}return t.prototype.call=function(e,r){return r.subscribe(new Fb(e))},t}(),Fb=function(t){R(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype._next=function(r){},e}(W);function $b(){return function(t){return t.lift(new Wb)}}var Wb=function(){function t(){}return t.prototype.call=function(e,r){return r.subscribe(new Ub(e))},t}(),Ub=function(t){R(e,t);function e(r){return t.call(this,r)||this}return e.prototype.notifyComplete=function(r){var n=this.destination;n.next(r),n.complete()},e.prototype._next=function(r){this.notifyComplete(!1)},e.prototype._complete=function(){this.notifyComplete(!0)},e}(W);function ci(t){return function(r){return t===0?$r():r.lift(new Hb(t))}}var Hb=function(){function t(e){if(this.total=e,this.total<0)throw new Cr}return t.prototype.call=function(e,r){return r.subscribe(new Vb(e,this.total))},t}(),Vb=function(t){R(e,t);function e(r,n){var i=t.call(this,r)||this;return i.total=n,i.ring=new Array,i.count=0,i}return e.prototype._next=function(r){var n=this.ring,i=this.total,s=this.count++;if(n.length<i)n.push(r);else{var o=s%i;n[o]=r}},e.prototype._complete=function(){var r=this.destination,n=this.count;if(n>0)for(var i=this.count>=this.total?this.total:this.count,s=this.ring,o=0;o<i;o++){var a=n++%i;r.next(s[a])}r.complete()},e}(W);function zb(t,e){var r=arguments.length>=2;return function(n){return n.pipe(t?Bt(function(i,s){return t(i,s,n)}):Dt,ci(1),r?En(e):Ii(function(){return new Sn}))}}function qb(t){return function(e){return e.lift(new Gb(t))}}var Gb=function(){function t(e){this.value=e}return t.prototype.call=function(e,r){return r.subscribe(new Qb(e,this.value))},t}(),Qb=function(t){R(e,t);function e(r,n){var i=t.call(this,r)||this;return i.value=n,i}return e.prototype._next=function(r){this.destination.next(this.value)},e}(W);function Zb(){return function(e){return e.lift(new Yb)}}var Yb=function(){function t(){}return t.prototype.call=function(e,r){return r.subscribe(new Kb(e))},t}(),Kb=function(t){R(e,t);function e(r){return t.call(this,r)||this}return e.prototype._next=function(r){this.destination.next(_t.createNext(r))},e.prototype._error=function(r){var n=this.destination;n.next(_t.createError(r)),n.complete()},e.prototype._complete=function(){var r=this.destination;r.next(_t.createComplete()),r.complete()},e}(W);function ui(t,e){var r=!1;return arguments.length>=2&&(r=!0),function(i){return i.lift(new Jb(t,e,r))}}var Jb=function(){function t(e,r,n){n===void 0&&(n=!1),this.accumulator=e,this.seed=r,this.hasSeed=n}return t.prototype.call=function(e,r){return r.subscribe(new Xb(e,this.accumulator,this.seed,this.hasSeed))},t}(),Xb=function(t){R(e,t);function e(r,n,i,s){var o=t.call(this,r)||this;return o.accumulator=n,o._seed=i,o.hasSeed=s,o.index=0,o}return Object.defineProperty(e.prototype,"seed",{get:function(){return this._seed},set:function(r){this.hasSeed=!0,this._seed=r},enumerable:!0,configurable:!0}),e.prototype._next=function(r){if(!this.hasSeed)this.seed=r,this.destination.next(r);else return this._tryNext(r)},e.prototype._tryNext=function(r){var n=this.index++,i;try{i=this.accumulator(this.seed,r,n)}catch(s){this.destination.error(s)}this.seed=i,this.destination.next(i)},e}(W);function Ri(t,e){return arguments.length>=2?function(n){return fa(ui(t,e),ci(1),En(e))(n)}:function(n){return fa(ui(function(i,s,o){return t(i,s,o+1)}),ci(1))(n)}}function eg(t){var e=typeof t=="function"?function(r,n){return t(r,n)>0?r:n}:function(r,n){return r>n?r:n};return Ri(e)}function tg(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(r){return r.lift.call(Zl.apply(void 0,[r].concat(t)))}}function rg(t,e,r){return r===void 0&&(r=Number.POSITIVE_INFINITY),typeof e=="function"?Xt(function(){return t},e,r):(typeof e=="number"&&(r=e),Xt(function(){return t},r))}function ng(t,e,r){return r===void 0&&(r=Number.POSITIVE_INFINITY),function(n){return n.lift(new ig(t,e,r))}}var ig=function(){function t(e,r,n){this.accumulator=e,this.seed=r,this.concurrent=n}return t.prototype.call=function(e,r){return r.subscribe(new sg(e,this.accumulator,this.seed,this.concurrent))},t}(),sg=function(t){R(e,t);function e(r,n,i,s){var o=t.call(this,r)||this;return o.accumulator=n,o.acc=i,o.concurrent=s,o.hasValue=!1,o.hasCompleted=!1,o.buffer=[],o.active=0,o.index=0,o}return e.prototype._next=function(r){if(this.active<this.concurrent){var n=this.index++,i=this.destination,s=void 0;try{var o=this.accumulator;s=o(this.acc,r,n)}catch(a){return i.error(a)}this.active++,this._innerSub(s)}else this.buffer.push(r)},e.prototype._innerSub=function(r){var n=new be(this),i=this.destination;i.add(n);var s=ye(r,n);s!==n&&i.add(s)},e.prototype._complete=function(){this.hasCompleted=!0,this.active===0&&this.buffer.length===0&&(this.hasValue===!1&&this.destination.next(this.acc),this.destination.complete()),this.unsubscribe()},e.prototype.notifyNext=function(r){var n=this.destination;this.acc=r,this.hasValue=!0,n.next(r)},e.prototype.notifyComplete=function(){var r=this.buffer;this.active--,r.length>0?this._next(r.shift()):this.active===0&&this.hasCompleted&&(this.hasValue===!1&&this.destination.next(this.acc),this.destination.complete())},e}(ge);function og(t){var e=typeof t=="function"?function(r,n){return t(r,n)<0?r:n}:function(r,n){return r<n?r:n};return Ri(e)}function er(t,e){return function(n){var i;if(typeof t=="function"?i=t:i=function(){return t},typeof e=="function")return n.lift(new ag(i,e));var s=Object.create(n,Ud);return s.source=n,s.subjectFactory=i,s}}var ag=function(){function t(e,r){this.subjectFactory=e,this.selector=r}return t.prototype.call=function(e,r){var n=this.selector,i=this.subjectFactory(),s=n(i).subscribe(e);return s.add(r.subscribe(i)),s},t}();function cg(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.length===1&&je(t[0])&&(t=t[0]),function(r){return r.lift(new ug(t))}}var ug=function(){function t(e){this.nextSources=e}return t.prototype.call=function(e,r){return r.subscribe(new lg(e,this.nextSources))},t}(),lg=function(t){R(e,t);function e(r,n){var i=t.call(this,r)||this;return i.destination=r,i.nextSources=n,i}return e.prototype.notifyError=function(){this.subscribeToNextSource()},e.prototype.notifyComplete=function(){this.subscribeToNextSource()},e.prototype._error=function(r){this.subscribeToNextSource(),this.unsubscribe()},e.prototype._complete=function(){this.subscribeToNextSource(),this.unsubscribe()},e.prototype.subscribeToNextSource=function(){var r=this.nextSources.shift();if(r){var n=new be(this),i=this.destination;i.add(n);var s=ye(r,n);s!==n&&i.add(s)}else this.destination.complete()},e}(ge);function fg(){return function(t){return t.lift(new hg)}}var hg=function(){function t(){}return t.prototype.call=function(e,r){return r.subscribe(new dg(e))},t}(),dg=function(t){R(e,t);function e(r){var n=t.call(this,r)||this;return n.hasPrev=!1,n}return e.prototype._next=function(r){var n;this.hasPrev?n=[this.prev,r]:this.hasPrev=!0,this.prev=r,n&&this.destination.next(n)},e}(W);function pg(t,e){return function(r){return[Bt(t,e)(r),Bt(Kl(t,e))(r)]}}function bg(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=t.length;if(r===0)throw new Error("list of properties cannot be empty.");return function(n){return Je(gg(t,r))(n)}}function gg(t,e){var r=function(n){for(var i=n,s=0;s<e;s++){var o=i!=null?i[t[s]]:void 0;if(o!==void 0)i=o;else return}return i};return r}function yg(t){return t?er(function(){return new ke},t):er(new ke)}function vg(t){return function(e){return er(new Rl(t))(e)}}function mg(){return function(t){return er(new Wr)(t)}}function _g(t,e,r,n){r&&typeof r!="function"&&(n=r);var i=typeof r=="function"?r:void 0,s=new Ua(t,e,n);return function(o){return er(function(){return s},i)(o)}}function wg(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(n){return t.length===1&&je(t[0])&&(t=t[0]),n.lift.call(Jl.apply(void 0,[n].concat(t)))}}function Sg(t){return t===void 0&&(t=-1),function(e){return t===0?$r():t<0?e.lift(new Wc(-1,e)):e.lift(new Wc(t-1,e))}}var Wc=function(){function t(e,r){this.count=e,this.source=r}return t.prototype.call=function(e,r){return r.subscribe(new Eg(e,this.count,this.source))},t}(),Eg=function(t){R(e,t);function e(r,n,i){var s=t.call(this,r)||this;return s.count=n,s.source=i,s}return e.prototype.complete=function(){if(!this.isStopped){var r=this,n=r.source,i=r.count;if(i===0)return t.prototype.complete.call(this);i>-1&&(this.count=i-1),n.subscribe(this._unsubscribeAndRecycle())}},e}(W);function xg(t){return function(e){return e.lift(new Cg(t))}}var Cg=function(){function t(e){this.notifier=e}return t.prototype.call=function(e,r){return r.subscribe(new kg(e,this.notifier,r))},t}(),kg=function(t){R(e,t);function e(r,n,i){var s=t.call(this,r)||this;return s.notifier=n,s.source=i,s.sourceIsBeingSubscribedTo=!0,s}return e.prototype.notifyNext=function(){this.sourceIsBeingSubscribedTo=!0,this.source.subscribe(this)},e.prototype.notifyComplete=function(){if(this.sourceIsBeingSubscribedTo===!1)return t.prototype.complete.call(this)},e.prototype.complete=function(){if(this.sourceIsBeingSubscribedTo=!1,!this.isStopped){if(this.retries||this.subscribeToRetries(),!this.retriesSubscription||this.retriesSubscription.closed)return t.prototype.complete.call(this);this._unsubscribeAndRecycle(),this.notifications.next(void 0)}},e.prototype._unsubscribe=function(){var r=this,n=r.notifications,i=r.retriesSubscription;n&&(n.unsubscribe(),this.notifications=void 0),i&&(i.unsubscribe(),this.retriesSubscription=void 0),this.retries=void 0},e.prototype._unsubscribeAndRecycle=function(){var r=this._unsubscribe;return this._unsubscribe=null,t.prototype._unsubscribeAndRecycle.call(this),this._unsubscribe=r,this},e.prototype.subscribeToRetries=function(){this.notifications=new ke;var r;try{var n=this.notifier;r=n(this.notifications)}catch{return t.prototype.complete.call(this)}this.retries=r,this.retriesSubscription=ye(r,new be(this))},e}(ge);function Ag(t){return t===void 0&&(t=-1),function(e){return e.lift(new Mg(t,e))}}var Mg=function(){function t(e,r){this.count=e,this.source=r}return t.prototype.call=function(e,r){return r.subscribe(new Ig(e,this.count,this.source))},t}(),Ig=function(t){R(e,t);function e(r,n,i){var s=t.call(this,r)||this;return s.count=n,s.source=i,s}return e.prototype.error=function(r){if(!this.isStopped){var n=this,i=n.source,s=n.count;if(s===0)return t.prototype.error.call(this,r);s>-1&&(this.count=s-1),i.subscribe(this._unsubscribeAndRecycle())}},e}(W);function Rg(t){return function(e){return e.lift(new Tg(t,e))}}var Tg=function(){function t(e,r){this.notifier=e,this.source=r}return t.prototype.call=function(e,r){return r.subscribe(new Og(e,this.notifier,this.source))},t}(),Og=function(t){R(e,t);function e(r,n,i){var s=t.call(this,r)||this;return s.notifier=n,s.source=i,s}return e.prototype.error=function(r){if(!this.isStopped){var n=this.errors,i=this.retries,s=this.retriesSubscription;if(i)this.errors=void 0,this.retriesSubscription=void 0;else{n=new ke;try{var o=this.notifier;i=o(n)}catch(a){return t.prototype.error.call(this,a)}s=ye(i,new be(this))}this._unsubscribeAndRecycle(),this.errors=n,this.retries=i,this.retriesSubscription=s,n.next(r)}},e.prototype._unsubscribe=function(){var r=this,n=r.errors,i=r.retriesSubscription;n&&(n.unsubscribe(),this.errors=void 0),i&&(i.unsubscribe(),this.retriesSubscription=void 0),this.retries=void 0},e.prototype.notifyNext=function(){var r=this._unsubscribe;this._unsubscribe=null,this._unsubscribeAndRecycle(),this._unsubscribe=r,this.source.subscribe(this)},e}(ge);function Ng(t){return function(e){return e.lift(new Lg(t))}}var Lg=function(){function t(e){this.notifier=e}return t.prototype.call=function(e,r){var n=new Pg(e),i=r.subscribe(n);return i.add(ye(this.notifier,new be(n))),i},t}(),Pg=function(t){R(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.hasValue=!1,r}return e.prototype._next=function(r){this.value=r,this.hasValue=!0},e.prototype.notifyNext=function(){this.emitValue()},e.prototype.notifyComplete=function(){this.emitValue()},e.prototype.emitValue=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.value))},e}(ge);function Dg(t,e){return e===void 0&&(e=Be),function(r){return r.lift(new jg(t,e))}}var jg=function(){function t(e,r){this.period=e,this.scheduler=r}return t.prototype.call=function(e,r){return r.subscribe(new Bg(e,this.period,this.scheduler))},t}(),Bg=function(t){R(e,t);function e(r,n,i){var s=t.call(this,r)||this;return s.period=n,s.scheduler=i,s.hasValue=!1,s.add(i.schedule(Fg,n,{subscriber:s,period:n})),s}return e.prototype._next=function(r){this.lastValue=r,this.hasValue=!0},e.prototype.notifyNext=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.lastValue))},e}(W);function Fg(t){var e=t.subscriber,r=t.period;e.notifyNext(),this.schedule(t,r)}function $g(t,e){return function(r){return r.lift(new Wg(t,e))}}var Wg=function(){function t(e,r){this.compareTo=e,this.comparator=r}return t.prototype.call=function(e,r){return r.subscribe(new Ug(e,this.compareTo,this.comparator))},t}(),Ug=function(t){R(e,t);function e(r,n,i){var s=t.call(this,r)||this;return s.compareTo=n,s.comparator=i,s._a=[],s._b=[],s._oneComplete=!1,s.destination.add(n.subscribe(new Hg(r,s))),s}return e.prototype._next=function(r){this._oneComplete&&this._b.length===0?this.emit(!1):(this._a.push(r),this.checkValues())},e.prototype._complete=function(){this._oneComplete?this.emit(this._a.length===0&&this._b.length===0):this._oneComplete=!0,this.unsubscribe()},e.prototype.checkValues=function(){for(var r=this,n=r._a,i=r._b,s=r.comparator;n.length>0&&i.length>0;){var o=n.shift(),a=i.shift(),c=!1;try{c=s?s(o,a):o===a}catch(u){this.destination.error(u)}c||this.emit(!1)}},e.prototype.emit=function(r){var n=this.destination;n.next(r),n.complete()},e.prototype.nextB=function(r){this._oneComplete&&this._a.length===0?this.emit(!1):(this._b.push(r),this.checkValues())},e.prototype.completeB=function(){this._oneComplete?this.emit(this._a.length===0&&this._b.length===0):this._oneComplete=!0},e}(W),Hg=function(t){R(e,t);function e(r,n){var i=t.call(this,r)||this;return i.parent=n,i}return e.prototype._next=function(r){this.parent.nextB(r)},e.prototype._error=function(r){this.parent.error(r),this.unsubscribe()},e.prototype._complete=function(){this.parent.completeB(),this.unsubscribe()},e}(W);function Vg(){return new ke}function zg(){return function(t){return Fa()(er(Vg)(t))}}function qg(t,e,r){var n;return t&&typeof t=="object"?n=t:n={bufferSize:t,windowTime:e,refCount:!1,scheduler:r},function(i){return i.lift(Gg(n))}}function Gg(t){var e=t.bufferSize,r=e===void 0?Number.POSITIVE_INFINITY:e,n=t.windowTime,i=n===void 0?Number.POSITIVE_INFINITY:n,s=t.refCount,o=t.scheduler,a,c=0,u,l=!1,g=!1;return function(p){c++;var y;!a||l?(l=!1,a=new Ua(r,i,o),y=a.subscribe(this),u=p.subscribe({next:function(E){a.next(E)},error:function(E){l=!0,a.error(E)},complete:function(){g=!0,u=void 0,a.complete()}}),g&&(u=void 0)):y=a.subscribe(this),this.add(function(){c--,y.unsubscribe(),y=void 0,u&&!g&&s&&c===0&&(u.unsubscribe(),u=void 0,a=void 0)})}}function Qg(t){return function(e){return e.lift(new Zg(t,e))}}var Zg=function(){function t(e,r){this.predicate=e,this.source=r}return t.prototype.call=function(e,r){return r.subscribe(new Yg(e,this.predicate,this.source))},t}(),Yg=function(t){R(e,t);function e(r,n,i){var s=t.call(this,r)||this;return s.predicate=n,s.source=i,s.seenValue=!1,s.index=0,s}return e.prototype.applySingleValue=function(r){this.seenValue?this.destination.error("Sequence contains more than one element"):(this.seenValue=!0,this.singleValue=r)},e.prototype._next=function(r){var n=this.index++;this.predicate?this.tryNext(r,n):this.applySingleValue(r)},e.prototype.tryNext=function(r,n){try{this.predicate(r,n,this.source)&&this.applySingleValue(r)}catch(i){this.destination.error(i)}},e.prototype._complete=function(){var r=this.destination;this.index>0?(r.next(this.seenValue?this.singleValue:void 0),r.complete()):r.error(new Sn)},e}(W);function Kg(t){return function(e){return e.lift(new Jg(t))}}var Jg=function(){function t(e){this.total=e}return t.prototype.call=function(e,r){return r.subscribe(new Xg(e,this.total))},t}(),Xg=function(t){R(e,t);function e(r,n){var i=t.call(this,r)||this;return i.total=n,i.count=0,i}return e.prototype._next=function(r){++this.count>this.total&&this.destination.next(r)},e}(W);function ey(t){return function(e){return e.lift(new ty(t))}}var ty=function(){function t(e){if(this._skipCount=e,this._skipCount<0)throw new Cr}return t.prototype.call=function(e,r){return this._skipCount===0?r.subscribe(new W(e)):r.subscribe(new ry(e,this._skipCount))},t}(),ry=function(t){R(e,t);function e(r,n){var i=t.call(this,r)||this;return i._skipCount=n,i._count=0,i._ring=new Array(n),i}return e.prototype._next=function(r){var n=this._skipCount,i=this._count++;if(i<n)this._ring[i]=r;else{var s=i%n,o=this._ring,a=o[s];o[s]=r,this.destination.next(a)}},e}(W);function ny(t){return function(e){return e.lift(new iy(t))}}var iy=function(){function t(e){this.notifier=e}return t.prototype.call=function(e,r){return r.subscribe(new sy(e,this.notifier))},t}(),sy=function(t){R(e,t);function e(r,n){var i=t.call(this,r)||this;i.hasValue=!1;var s=new be(i);i.add(s),i.innerSubscription=s;var o=ye(n,s);return o!==s&&(i.add(o),i.innerSubscription=o),i}return e.prototype._next=function(r){this.hasValue&&t.prototype._next.call(this,r)},e.prototype.notifyNext=function(){this.hasValue=!0,this.innerSubscription&&this.innerSubscription.unsubscribe()},e.prototype.notifyComplete=function(){},e}(ge);function oy(t){return function(e){return e.lift(new ay(t))}}var ay=function(){function t(e){this.predicate=e}return t.prototype.call=function(e,r){return r.subscribe(new cy(e,this.predicate))},t}(),cy=function(t){R(e,t);function e(r,n){var i=t.call(this,r)||this;return i.predicate=n,i.skipping=!0,i.index=0,i}return e.prototype._next=function(r){var n=this.destination;this.skipping&&this.tryCallPredicate(r),this.skipping||n.next(r)},e.prototype.tryCallPredicate=function(r){try{var n=this.predicate(r,this.index++);this.skipping=Boolean(n)}catch(i){this.destination.error(i)}},e}(W);function uy(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=t[t.length-1];return Ue(r)?(t.pop(),function(n){return pn(t,n,r)}):function(n){return pn(t,n)}}var ly=function(t){R(e,t);function e(r,n,i){n===void 0&&(n=0),i===void 0&&(i=Yn);var s=t.call(this)||this;return s.source=r,s.delayTime=n,s.scheduler=i,(!kr(n)||n<0)&&(s.delayTime=0),(!i||typeof i.schedule!="function")&&(s.scheduler=Yn),s}return e.create=function(r,n,i){return n===void 0&&(n=0),i===void 0&&(i=Yn),new e(r,n,i)},e.dispatch=function(r){var n=r.source,i=r.subscriber;return this.add(n.subscribe(i))},e.prototype._subscribe=function(r){var n=this.delayTime,i=this.source,s=this.scheduler;return s.schedule(e.dispatch,n,{source:i,subscriber:r})},e}(K);function fy(t,e){return e===void 0&&(e=0),function(n){return n.lift(new hy(t,e))}}var hy=function(){function t(e,r){this.scheduler=e,this.delay=r}return t.prototype.call=function(e,r){return new ly(r,this.delay,this.scheduler).subscribe(e)},t}();function bn(t,e){return typeof e=="function"?function(r){return r.pipe(bn(function(n,i){return Et(t(n,i)).pipe(Je(function(s,o){return e(n,s,i,o)}))}))}:function(r){return r.lift(new dy(t))}}var dy=function(){function t(e){this.project=e}return t.prototype.call=function(e,r){return r.subscribe(new py(e,this.project))},t}(),py=function(t){R(e,t);function e(r,n){var i=t.call(this,r)||this;return i.project=n,i.index=0,i}return e.prototype._next=function(r){var n,i=this.index++;try{n=this.project(r,i)}catch(s){this.destination.error(s);return}this._innerSub(n)},e.prototype._innerSub=function(r){var n=this.innerSubscription;n&&n.unsubscribe();var i=new be(this),s=this.destination;s.add(i),this.innerSubscription=ye(r,i),this.innerSubscription!==i&&s.add(this.innerSubscription)},e.prototype._complete=function(){var r=this.innerSubscription;(!r||r.closed)&&t.prototype._complete.call(this),this.unsubscribe()},e.prototype._unsubscribe=function(){this.innerSubscription=void 0},e.prototype.notifyComplete=function(){this.innerSubscription=void 0,this.isStopped&&t.prototype._complete.call(this)},e.prototype.notifyNext=function(r){this.destination.next(r)},e}(ge);function by(){return bn(Dt)}function gy(t,e){return e?bn(function(){return t},e):bn(function(){return t})}function yy(t){return function(e){return e.lift(new vy(t))}}var vy=function(){function t(e){this.notifier=e}return t.prototype.call=function(e,r){var n=new my(e),i=ye(this.notifier,new be(n));return i&&!n.seenValue?(n.add(i),r.subscribe(n)):n},t}(),my=function(t){R(e,t);function e(r){var n=t.call(this,r)||this;return n.seenValue=!1,n}return e.prototype.notifyNext=function(){this.seenValue=!0,this.complete()},e.prototype.notifyComplete=function(){},e}(ge);function _y(t,e){return e===void 0&&(e=!1),function(r){return r.lift(new wy(t,e))}}var wy=function(){function t(e,r){this.predicate=e,this.inclusive=r}return t.prototype.call=function(e,r){return r.subscribe(new Sy(e,this.predicate,this.inclusive))},t}(),Sy=function(t){R(e,t);function e(r,n,i){var s=t.call(this,r)||this;return s.predicate=n,s.inclusive=i,s.index=0,s}return e.prototype._next=function(r){var n=this.destination,i;try{i=this.predicate(r,this.index++)}catch(s){n.error(s);return}this.nextOrComplete(r,i)},e.prototype.nextOrComplete=function(r,n){var i=this.destination;Boolean(n)?i.next(r):(this.inclusive&&i.next(r),i.complete())},e}(W);function Ey(t,e,r){return function(i){return i.lift(new xy(t,e,r))}}var xy=function(){function t(e,r,n){this.nextOrObserver=e,this.error=r,this.complete=n}return t.prototype.call=function(e,r){return r.subscribe(new Cy(e,this.nextOrObserver,this.error,this.complete))},t}(),Cy=function(t){R(e,t);function e(r,n,i,s){var o=t.call(this,r)||this;return o._tapNext=ct,o._tapError=ct,o._tapComplete=ct,o._tapError=i||ct,o._tapComplete=s||ct,Er(n)?(o._context=o,o._tapNext=n):n&&(o._context=n,o._tapNext=n.next||ct,o._tapError=n.error||ct,o._tapComplete=n.complete||ct),o}return e.prototype._next=function(r){try{this._tapNext.call(this._context,r)}catch(n){this.destination.error(n);return}this.destination.next(r)},e.prototype._error=function(r){try{this._tapError.call(this._context,r)}catch(n){this.destination.error(n);return}this.destination.error(r)},e.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(r){this.destination.error(r);return}return this.destination.complete()},e}(W),lf={leading:!0,trailing:!1};function ky(t,e){return e===void 0&&(e=lf),function(r){return r.lift(new Ay(t,!!e.leading,!!e.trailing))}}var Ay=function(){function t(e,r,n){this.durationSelector=e,this.leading=r,this.trailing=n}return t.prototype.call=function(e,r){return r.subscribe(new My(e,this.durationSelector,this.leading,this.trailing))},t}(),My=function(t){R(e,t);function e(r,n,i,s){var o=t.call(this,r)||this;return o.destination=r,o.durationSelector=n,o._leading=i,o._trailing=s,o._hasValue=!1,o}return e.prototype._next=function(r){this._hasValue=!0,this._sendValue=r,this._throttled||(this._leading?this.send():this.throttle(r))},e.prototype.send=function(){var r=this,n=r._hasValue,i=r._sendValue;n&&(this.destination.next(i),this.throttle(i)),this._hasValue=!1,this._sendValue=void 0},e.prototype.throttle=function(r){var n=this.tryDurationSelector(r);n&&this.add(this._throttled=ye(n,new be(this)))},e.prototype.tryDurationSelector=function(r){try{return this.durationSelector(r)}catch(n){return this.destination.error(n),null}},e.prototype.throttlingDone=function(){var r=this,n=r._throttled,i=r._trailing;n&&n.unsubscribe(),this._throttled=void 0,i&&this.send()},e.prototype.notifyNext=function(){this.throttlingDone()},e.prototype.notifyComplete=function(){this.throttlingDone()},e}(ge);function Iy(t,e,r){return e===void 0&&(e=Be),r===void 0&&(r=lf),function(n){return n.lift(new Ry(t,e,r.leading,r.trailing))}}var Ry=function(){function t(e,r,n,i){this.duration=e,this.scheduler=r,this.leading=n,this.trailing=i}return t.prototype.call=function(e,r){return r.subscribe(new Ty(e,this.duration,this.scheduler,this.leading,this.trailing))},t}(),Ty=function(t){R(e,t);function e(r,n,i,s,o){var a=t.call(this,r)||this;return a.duration=n,a.scheduler=i,a.leading=s,a.trailing=o,a._hasTrailingValue=!1,a._trailingValue=null,a}return e.prototype._next=function(r){this.throttled?this.trailing&&(this._trailingValue=r,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(Oy,this.duration,{subscriber:this})),this.leading?this.destination.next(r):this.trailing&&(this._trailingValue=r,this._hasTrailingValue=!0))},e.prototype._complete=function(){this._hasTrailingValue?(this.destination.next(this._trailingValue),this.destination.complete()):this.destination.complete()},e.prototype.clearThrottle=function(){var r=this.throttled;r&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),r.unsubscribe(),this.remove(r),this.throttled=null)},e}(W);function Oy(t){var e=t.subscriber;e.clearThrottle()}function Ny(t){return t===void 0&&(t=Be),function(e){return za(function(){return e.pipe(ui(function(r,n){var i=r.current;return{value:n,current:t.now(),last:i}},{current:t.now(),value:void 0,last:void 0}),Je(function(r){var n=r.current,i=r.last,s=r.value;return new Ly(s,n-i)}))})}}var Ly=function(){function t(e,r){this.value=e,this.interval=r}return t}();function ff(t,e,r){return r===void 0&&(r=Be),function(n){var i=of(t),s=i?+t-r.now():Math.abs(t);return n.lift(new Py(s,i,e,r))}}var Py=function(){function t(e,r,n,i){this.waitFor=e,this.absoluteTimeout=r,this.withObservable=n,this.scheduler=i}return t.prototype.call=function(e,r){return r.subscribe(new Dy(e,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))},t}(),Dy=function(t){R(e,t);function e(r,n,i,s,o){var a=t.call(this,r)||this;return a.absoluteTimeout=n,a.waitFor=i,a.withObservable=s,a.scheduler=o,a.scheduleTimeout(),a}return e.dispatchTimeout=function(r){var n=r.withObservable;r._unsubscribeAndRecycle(),r.add(ye(n,new be(r)))},e.prototype.scheduleTimeout=function(){var r=this.action;r?this.action=r.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(e.dispatchTimeout,this.waitFor,this))},e.prototype._next=function(r){this.absoluteTimeout||this.scheduleTimeout(),t.prototype._next.call(this,r)},e.prototype._unsubscribe=function(){this.action=void 0,this.scheduler=null,this.withObservable=null},e}(ge);function jy(t,e){return e===void 0&&(e=Be),ff(t,Wa(new Fl),e)}function By(t){return t===void 0&&(t=Be),Je(function(e){return new Fy(e,t.now())})}var Fy=function(){function t(e,r){this.value=e,this.timestamp=r}return t}();function $y(t,e,r){return r===0?[e]:(t.push(e),t)}function Wy(){return Ri($y,[])}function Uy(t){return function(r){return r.lift(new Hy(t))}}var Hy=function(){function t(e){this.windowBoundaries=e}return t.prototype.call=function(e,r){var n=new Vy(e),i=r.subscribe(n);return i.closed||n.add(ye(this.windowBoundaries,new be(n))),i},t}(),Vy=function(t){R(e,t);function e(r){var n=t.call(this,r)||this;return n.window=new ke,r.next(n.window),n}return e.prototype.notifyNext=function(){this.openWindow()},e.prototype.notifyError=function(r){this._error(r)},e.prototype.notifyComplete=function(){this._complete()},e.prototype._next=function(r){this.window.next(r)},e.prototype._error=function(r){this.window.error(r),this.destination.error(r)},e.prototype._complete=function(){this.window.complete(),this.destination.complete()},e.prototype._unsubscribe=function(){this.window=null},e.prototype.openWindow=function(){var r=this.window;r&&r.complete();var n=this.destination,i=this.window=new ke;n.next(i)},e}(ge);function zy(t,e){return e===void 0&&(e=0),function(n){return n.lift(new qy(t,e))}}var qy=function(){function t(e,r){this.windowSize=e,this.startWindowEvery=r}return t.prototype.call=function(e,r){return r.subscribe(new Gy(e,this.windowSize,this.startWindowEvery))},t}(),Gy=function(t){R(e,t);function e(r,n,i){var s=t.call(this,r)||this;return s.destination=r,s.windowSize=n,s.startWindowEvery=i,s.windows=[new ke],s.count=0,r.next(s.windows[0]),s}return e.prototype._next=function(r){for(var n=this.startWindowEvery>0?this.startWindowEvery:this.windowSize,i=this.destination,s=this.windowSize,o=this.windows,a=o.length,c=0;c<a&&!this.closed;c++)o[c].next(r);var u=this.count-s+1;if(u>=0&&u%n===0&&!this.closed&&o.shift().complete(),++this.count%n===0&&!this.closed){var l=new ke;o.push(l),i.next(l)}},e.prototype._error=function(r){var n=this.windows;if(n)for(;n.length>0&&!this.closed;)n.shift().error(r);this.destination.error(r)},e.prototype._complete=function(){var r=this.windows;if(r)for(;r.length>0&&!this.closed;)r.shift().complete();this.destination.complete()},e.prototype._unsubscribe=function(){this.count=0,this.windows=null},e}(W);function Qy(t){var e=Be,r=null,n=Number.POSITIVE_INFINITY;return Ue(arguments[3])&&(e=arguments[3]),Ue(arguments[2])?e=arguments[2]:kr(arguments[2])&&(n=Number(arguments[2])),Ue(arguments[1])?e=arguments[1]:kr(arguments[1])&&(r=Number(arguments[1])),function(s){return s.lift(new Zy(t,r,n,e))}}var Zy=function(){function t(e,r,n,i){this.windowTimeSpan=e,this.windowCreationInterval=r,this.maxWindowSize=n,this.scheduler=i}return t.prototype.call=function(e,r){return r.subscribe(new Ky(e,this.windowTimeSpan,this.windowCreationInterval,this.maxWindowSize,this.scheduler))},t}(),Yy=function(t){R(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r._numberOfNextedValues=0,r}return e.prototype.next=function(r){this._numberOfNextedValues++,t.prototype.next.call(this,r)},Object.defineProperty(e.prototype,"numberOfNextedValues",{get:function(){return this._numberOfNextedValues},enumerable:!0,configurable:!0}),e}(ke),Ky=function(t){R(e,t);function e(r,n,i,s,o){var a=t.call(this,r)||this;a.destination=r,a.windowTimeSpan=n,a.windowCreationInterval=i,a.maxWindowSize=s,a.scheduler=o,a.windows=[];var c=a.openWindow();if(i!==null&&i>=0){var u={subscriber:a,window:c,context:null},l={windowTimeSpan:n,windowCreationInterval:i,subscriber:a,scheduler:o};a.add(o.schedule(hf,n,u)),a.add(o.schedule(Xy,i,l))}else{var g={subscriber:a,window:c,windowTimeSpan:n};a.add(o.schedule(Jy,n,g))}return a}return e.prototype._next=function(r){for(var n=this.windows,i=n.length,s=0;s<i;s++){var o=n[s];o.closed||(o.next(r),o.numberOfNextedValues>=this.maxWindowSize&&this.closeWindow(o))}},e.prototype._error=function(r){for(var n=this.windows;n.length>0;)n.shift().error(r);this.destination.error(r)},e.prototype._complete=function(){for(var r=this.windows;r.length>0;){var n=r.shift();n.closed||n.complete()}this.destination.complete()},e.prototype.openWindow=function(){var r=new Yy;this.windows.push(r);var n=this.destination;return n.next(r),r},e.prototype.closeWindow=function(r){r.complete();var n=this.windows;n.splice(n.indexOf(r),1)},e}(W);function Jy(t){var e=t.subscriber,r=t.windowTimeSpan,n=t.window;n&&e.closeWindow(n),t.window=e.openWindow(),this.schedule(t,r)}function Xy(t){var e=t.windowTimeSpan,r=t.subscriber,n=t.scheduler,i=t.windowCreationInterval,s=r.openWindow(),o=this,a={action:o,subscription:null},c={subscriber:r,window:s,context:a};a.subscription=n.schedule(hf,e,c),o.add(a.subscription),o.schedule(t,i)}function hf(t){var e=t.subscriber,r=t.window,n=t.context;n&&n.action&&n.subscription&&n.action.remove(n.subscription),e.closeWindow(r)}function ev(t,e){return function(r){return r.lift(new tv(t,e))}}var tv=function(){function t(e,r){this.openings=e,this.closingSelector=r}return t.prototype.call=function(e,r){return r.subscribe(new rv(e,this.openings,this.closingSelector))},t}(),rv=function(t){R(e,t);function e(r,n,i){var s=t.call(this,r)||this;return s.openings=n,s.closingSelector=i,s.contexts=[],s.add(s.openSubscription=wt(s,n,n)),s}return e.prototype._next=function(r){var n=this.contexts;if(n)for(var i=n.length,s=0;s<i;s++)n[s].window.next(r)},e.prototype._error=function(r){var n=this.contexts;if(this.contexts=null,n)for(var i=n.length,s=-1;++s<i;){var o=n[s];o.window.error(r),o.subscription.unsubscribe()}t.prototype._error.call(this,r)},e.prototype._complete=function(){var r=this.contexts;if(this.contexts=null,r)for(var n=r.length,i=-1;++i<n;){var s=r[i];s.window.complete(),s.subscription.unsubscribe()}t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){var r=this.contexts;if(this.contexts=null,r)for(var n=r.length,i=-1;++i<n;){var s=r[i];s.window.unsubscribe(),s.subscription.unsubscribe()}},e.prototype.notifyNext=function(r,n,i,s,o){if(r===this.openings){var a=void 0;try{var c=this.closingSelector;a=c(n)}catch(p){return this.error(p)}var u=new ke,l=new pe,g={window:u,subscription:l};this.contexts.push(g);var f=wt(this,a,g);f.closed?this.closeWindow(this.contexts.length-1):(f.context=g,l.add(f)),this.destination.next(u)}else this.closeWindow(this.contexts.indexOf(r))},e.prototype.notifyError=function(r){this.error(r)},e.prototype.notifyComplete=function(r){r!==this.openSubscription&&this.closeWindow(this.contexts.indexOf(r.context))},e.prototype.closeWindow=function(r){if(r!==-1){var n=this.contexts,i=n[r],s=i.window,o=i.subscription;n.splice(r,1),s.complete(),o.unsubscribe()}},e}(rr);function nv(t){return function(r){return r.lift(new iv(t))}}var iv=function(){function t(e){this.closingSelector=e}return t.prototype.call=function(e,r){return r.subscribe(new sv(e,this.closingSelector))},t}(),sv=function(t){R(e,t);function e(r,n){var i=t.call(this,r)||this;return i.destination=r,i.closingSelector=n,i.openWindow(),i}return e.prototype.notifyNext=function(r,n,i,s,o){this.openWindow(o)},e.prototype.notifyError=function(r){this._error(r)},e.prototype.notifyComplete=function(r){this.openWindow(r)},e.prototype._next=function(r){this.window.next(r)},e.prototype._error=function(r){this.window.error(r),this.destination.error(r),this.unsubscribeClosingNotification()},e.prototype._complete=function(){this.window.complete(),this.destination.complete(),this.unsubscribeClosingNotification()},e.prototype.unsubscribeClosingNotification=function(){this.closingNotification&&this.closingNotification.unsubscribe()},e.prototype.openWindow=function(r){r===void 0&&(r=null),r&&(this.remove(r),r.unsubscribe());var n=this.window;n&&n.complete();var i=this.window=new ke;this.destination.next(i);var s;try{var o=this.closingSelector;s=o()}catch(a){this.destination.error(a),this.window.error(a);return}this.add(this.closingNotification=wt(this,s))},e}(rr);function ov(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(r){var n;typeof t[t.length-1]=="function"&&(n=t.pop());var i=t;return r.lift(new av(i,n))}}var av=function(){function t(e,r){this.observables=e,this.project=r}return t.prototype.call=function(e,r){return r.subscribe(new cv(e,this.observables,this.project))},t}(),cv=function(t){R(e,t);function e(r,n,i){var s=t.call(this,r)||this;s.observables=n,s.project=i,s.toRespond=[];var o=n.length;s.values=new Array(o);for(var a=0;a<o;a++)s.toRespond.push(a);for(var a=0;a<o;a++){var c=n[a];s.add(wt(s,c,void 0,a))}return s}return e.prototype.notifyNext=function(r,n,i){this.values[i]=n;var s=this.toRespond;if(s.length>0){var o=s.indexOf(i);o!==-1&&s.splice(o,1)}},e.prototype.notifyComplete=function(){},e.prototype._next=function(r){if(this.toRespond.length===0){var n=[r].concat(this.values);this.project?this._tryProject(n):this.destination.next(n)}},e.prototype._tryProject=function(r){var n;try{n=this.project.apply(this,r)}catch(i){this.destination.error(i);return}this.destination.next(n)},e}(rr);function uv(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(n){return n.lift.call(ef.apply(void 0,[n].concat(t)))}}function lv(t){return function(e){return e.lift(new tf(t))}}const fv=Object.freeze(Object.defineProperty({__proto__:null,audit:rf,auditTime:f0,buffer:h0,bufferCount:b0,bufferTime:m0,bufferToggle:x0,bufferWhen:A0,catchError:R0,combineAll:N0,combineLatest:L0,concat:P0,concatAll:zl,concatMap:sf,concatMapTo:D0,count:j0,debounce:$0,debounceTime:H0,defaultIfEmpty:En,delay:Z0,delayWhen:X0,dematerialize:nb,distinct:ob,distinctUntilChanged:af,distinctUntilKeyChanged:fb,elementAt:yb,endWith:vb,every:mb,exhaust:Sb,exhaustMap:cf,expand:Ab,filter:Bt,finalize:Rb,find:Nb,findIndex:Pb,first:Db,groupBy:Vd,ignoreElements:jb,isEmpty:$b,last:zb,map:Je,mapTo:qb,materialize:Zb,max:eg,merge:tg,mergeAll:Va,mergeMap:Xt,flatMap:Dp,mergeMapTo:rg,mergeScan:ng,min:og,multicast:er,observeOn:ep,onErrorResumeNext:cg,pairwise:fg,partition:pg,pluck:bg,publish:yg,publishBehavior:vg,publishLast:mg,publishReplay:_g,race:wg,reduce:Ri,repeat:Sg,repeatWhen:xg,retry:Ag,retryWhen:Rg,refCount:Fa,sample:Ng,sampleTime:Dg,scan:ui,sequenceEqual:$g,share:zg,shareReplay:qg,single:Qg,skip:Kg,skipLast:ey,skipUntil:ny,skipWhile:oy,startWith:uy,subscribeOn:fy,switchAll:by,switchMap:bn,switchMapTo:gy,take:qa,takeLast:ci,takeUntil:yy,takeWhile:_y,tap:Ey,throttle:ky,throttleTime:Iy,throwIfEmpty:Ii,timeInterval:Ny,timeout:jy,timeoutWith:ff,timestamp:By,toArray:Wy,window:Uy,windowCount:zy,windowTime:Qy,windowToggle:ev,windowWhen:nv,withLatestFrom:ov,zip:uv,zipAll:lv},Symbol.toStringTag,{value:"Module"})),Ti=Pr(fv);var df={exports:{}},pt={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(t,e){var r=Ei,n=r.Buffer;function i(o,a){for(var c in o)a[c]=o[c]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?t.exports=r:(i(r,e),e.Buffer=s);function s(o,a,c){return n(o,a,c)}s.prototype=Object.create(n.prototype),i(n,s),s.from=function(o,a,c){if(typeof o=="number")throw new TypeError("Argument must not be a number");return n(o,a,c)},s.alloc=function(o,a,c){if(typeof o!="number")throw new TypeError("Argument must be a number");var u=n(o);return a!==void 0?typeof c=="string"?u.fill(a,c):u.fill(a):u.fill(0),u},s.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return n(o)},s.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return r.SlowBuffer(o)}})(pt,pt.exports);var pf=pt.exports.Buffer;function Oi(t,e){this._block=pf.alloc(t),this._finalSize=e,this._blockSize=t,this._len=0}Oi.prototype.update=function(t,e){typeof t=="string"&&(e=e||"utf8",t=pf.from(t,e));for(var r=this._block,n=this._blockSize,i=t.length,s=this._len,o=0;o<i;){for(var a=s%n,c=Math.min(i-o,n-a),u=0;u<c;u++)r[a+u]=t[o+u];s+=c,o+=c,s%n===0&&this._update(r)}return this._len+=i,this};Oi.prototype.digest=function(t){var e=this._len%this._blockSize;this._block[e]=128,this._block.fill(0,e+1),e>=this._finalSize&&(this._update(this._block),this._block.fill(0));var r=this._len*8;if(r<=4294967295)this._block.writeUInt32BE(r,this._blockSize-4);else{var n=(r&4294967295)>>>0,i=(r-n)/4294967296;this._block.writeUInt32BE(i,this._blockSize-8),this._block.writeUInt32BE(n,this._blockSize-4)}this._update(this._block);var s=this._hash();return t?s.toString(t):s};Oi.prototype._update=function(){throw new Error("_update must be implemented by subclass")};var Hr=Oi,hv=Ke.exports,bf=Hr,dv=pt.exports.Buffer,pv=[1518500249,1859775393,-1894007588,-899497514],bv=new Array(80);function xn(){this.init(),this._w=bv,bf.call(this,64,56)}hv(xn,bf);xn.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function gv(t){return t<<5|t>>>27}function yv(t){return t<<30|t>>>2}function vv(t,e,r,n){return t===0?e&r|~e&n:t===2?e&r|e&n|r&n:e^r^n}xn.prototype._update=function(t){for(var e=this._w,r=this._a|0,n=this._b|0,i=this._c|0,s=this._d|0,o=this._e|0,a=0;a<16;++a)e[a]=t.readInt32BE(a*4);for(;a<80;++a)e[a]=e[a-3]^e[a-8]^e[a-14]^e[a-16];for(var c=0;c<80;++c){var u=~~(c/20),l=gv(r)+vv(u,n,i,s)+o+e[c]+pv[u]|0;o=s,s=i,i=yv(n),n=r,r=l}this._a=r+this._a|0,this._b=n+this._b|0,this._c=i+this._c|0,this._d=s+this._d|0,this._e=o+this._e|0};xn.prototype._hash=function(){var t=dv.allocUnsafe(20);return t.writeInt32BE(this._a|0,0),t.writeInt32BE(this._b|0,4),t.writeInt32BE(this._c|0,8),t.writeInt32BE(this._d|0,12),t.writeInt32BE(this._e|0,16),t};var mv=xn,_v=Ke.exports,gf=Hr,wv=pt.exports.Buffer,Sv=[1518500249,1859775393,-1894007588,-899497514],Ev=new Array(80);function Cn(){this.init(),this._w=Ev,gf.call(this,64,56)}_v(Cn,gf);Cn.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function xv(t){return t<<1|t>>>31}function Cv(t){return t<<5|t>>>27}function kv(t){return t<<30|t>>>2}function Av(t,e,r,n){return t===0?e&r|~e&n:t===2?e&r|e&n|r&n:e^r^n}Cn.prototype._update=function(t){for(var e=this._w,r=this._a|0,n=this._b|0,i=this._c|0,s=this._d|0,o=this._e|0,a=0;a<16;++a)e[a]=t.readInt32BE(a*4);for(;a<80;++a)e[a]=xv(e[a-3]^e[a-8]^e[a-14]^e[a-16]);for(var c=0;c<80;++c){var u=~~(c/20),l=Cv(r)+Av(u,n,i,s)+o+e[c]+Sv[u]|0;o=s,s=i,i=kv(n),n=r,r=l}this._a=r+this._a|0,this._b=n+this._b|0,this._c=i+this._c|0,this._d=s+this._d|0,this._e=o+this._e|0};Cn.prototype._hash=function(){var t=wv.allocUnsafe(20);return t.writeInt32BE(this._a|0,0),t.writeInt32BE(this._b|0,4),t.writeInt32BE(this._c|0,8),t.writeInt32BE(this._d|0,12),t.writeInt32BE(this._e|0,16),t};var Mv=Cn,Iv=Ke.exports,yf=Hr,Rv=pt.exports.Buffer,Tv=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],Ov=new Array(64);function kn(){this.init(),this._w=Ov,yf.call(this,64,56)}Iv(kn,yf);kn.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this};function Nv(t,e,r){return r^t&(e^r)}function Lv(t,e,r){return t&e|r&(t|e)}function Pv(t){return(t>>>2|t<<30)^(t>>>13|t<<19)^(t>>>22|t<<10)}function Dv(t){return(t>>>6|t<<26)^(t>>>11|t<<21)^(t>>>25|t<<7)}function jv(t){return(t>>>7|t<<25)^(t>>>18|t<<14)^t>>>3}function Bv(t){return(t>>>17|t<<15)^(t>>>19|t<<13)^t>>>10}kn.prototype._update=function(t){for(var e=this._w,r=this._a|0,n=this._b|0,i=this._c|0,s=this._d|0,o=this._e|0,a=this._f|0,c=this._g|0,u=this._h|0,l=0;l<16;++l)e[l]=t.readInt32BE(l*4);for(;l<64;++l)e[l]=Bv(e[l-2])+e[l-7]+jv(e[l-15])+e[l-16]|0;for(var g=0;g<64;++g){var f=u+Dv(o)+Nv(o,a,c)+Tv[g]+e[g]|0,p=Pv(r)+Lv(r,n,i)|0;u=c,c=a,a=o,o=s+f|0,s=i,i=n,n=r,r=f+p|0}this._a=r+this._a|0,this._b=n+this._b|0,this._c=i+this._c|0,this._d=s+this._d|0,this._e=o+this._e|0,this._f=a+this._f|0,this._g=c+this._g|0,this._h=u+this._h|0};kn.prototype._hash=function(){var t=Rv.allocUnsafe(32);return t.writeInt32BE(this._a,0),t.writeInt32BE(this._b,4),t.writeInt32BE(this._c,8),t.writeInt32BE(this._d,12),t.writeInt32BE(this._e,16),t.writeInt32BE(this._f,20),t.writeInt32BE(this._g,24),t.writeInt32BE(this._h,28),t};var vf=kn,Fv=Ke.exports,$v=vf,Wv=Hr,Uv=pt.exports.Buffer,Hv=new Array(64);function Ni(){this.init(),this._w=Hv,Wv.call(this,64,56)}Fv(Ni,$v);Ni.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this};Ni.prototype._hash=function(){var t=Uv.allocUnsafe(28);return t.writeInt32BE(this._a,0),t.writeInt32BE(this._b,4),t.writeInt32BE(this._c,8),t.writeInt32BE(this._d,12),t.writeInt32BE(this._e,16),t.writeInt32BE(this._f,20),t.writeInt32BE(this._g,24),t};var Vv=Ni,zv=Ke.exports,mf=Hr,qv=pt.exports.Buffer,Uc=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],Gv=new Array(160);function An(){this.init(),this._w=Gv,mf.call(this,128,112)}zv(An,mf);An.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this};function Hc(t,e,r){return r^t&(e^r)}function Vc(t,e,r){return t&e|r&(t|e)}function zc(t,e){return(t>>>28|e<<4)^(e>>>2|t<<30)^(e>>>7|t<<25)}function qc(t,e){return(t>>>14|e<<18)^(t>>>18|e<<14)^(e>>>9|t<<23)}function Qv(t,e){return(t>>>1|e<<31)^(t>>>8|e<<24)^t>>>7}function Zv(t,e){return(t>>>1|e<<31)^(t>>>8|e<<24)^(t>>>7|e<<25)}function Yv(t,e){return(t>>>19|e<<13)^(e>>>29|t<<3)^t>>>6}function Kv(t,e){return(t>>>19|e<<13)^(e>>>29|t<<3)^(t>>>6|e<<26)}function Se(t,e){return t>>>0<e>>>0?1:0}An.prototype._update=function(t){for(var e=this._w,r=this._ah|0,n=this._bh|0,i=this._ch|0,s=this._dh|0,o=this._eh|0,a=this._fh|0,c=this._gh|0,u=this._hh|0,l=this._al|0,g=this._bl|0,f=this._cl|0,p=this._dl|0,y=this._el|0,E=this._fl|0,k=this._gl|0,b=this._hl|0,v=0;v<32;v+=2)e[v]=t.readInt32BE(v*4),e[v+1]=t.readInt32BE(v*4+4);for(;v<160;v+=2){var w=e[v-30],A=e[v-15*2+1],N=Qv(w,A),F=Zv(A,w);w=e[v-2*2],A=e[v-2*2+1];var $=Yv(w,A),D=Kv(A,w),P=e[v-7*2],ie=e[v-7*2+1],te=e[v-16*2],q=e[v-16*2+1],Z=F+ie|0,X=N+P+Se(Z,F)|0;Z=Z+D|0,X=X+$+Se(Z,D)|0,Z=Z+q|0,X=X+te+Se(Z,q)|0,e[v]=X,e[v+1]=Z}for(var ne=0;ne<160;ne+=2){X=e[ne],Z=e[ne+1];var he=Vc(r,n,i),we=Vc(l,g,f),me=zc(r,l),ce=zc(l,r),Ie=qc(o,y),Fe=qc(y,o),S=Uc[ne],C=Uc[ne+1],T=Hc(o,a,c),U=Hc(y,E,k),m=b+Fe|0,_=u+Ie+Se(m,b)|0;m=m+U|0,_=_+T+Se(m,U)|0,m=m+C|0,_=_+S+Se(m,C)|0,m=m+Z|0,_=_+X+Se(m,Z)|0;var x=ce+we|0,O=me+he+Se(x,ce)|0;u=c,b=k,c=a,k=E,a=o,E=y,y=p+m|0,o=s+_+Se(y,p)|0,s=i,p=f,i=n,f=g,n=r,g=l,l=m+x|0,r=_+O+Se(l,m)|0}this._al=this._al+l|0,this._bl=this._bl+g|0,this._cl=this._cl+f|0,this._dl=this._dl+p|0,this._el=this._el+y|0,this._fl=this._fl+E|0,this._gl=this._gl+k|0,this._hl=this._hl+b|0,this._ah=this._ah+r+Se(this._al,l)|0,this._bh=this._bh+n+Se(this._bl,g)|0,this._ch=this._ch+i+Se(this._cl,f)|0,this._dh=this._dh+s+Se(this._dl,p)|0,this._eh=this._eh+o+Se(this._el,y)|0,this._fh=this._fh+a+Se(this._fl,E)|0,this._gh=this._gh+c+Se(this._gl,k)|0,this._hh=this._hh+u+Se(this._hl,b)|0};An.prototype._hash=function(){var t=qv.allocUnsafe(64);function e(r,n,i){t.writeInt32BE(r,i),t.writeInt32BE(n,i+4)}return e(this._ah,this._al,0),e(this._bh,this._bl,8),e(this._ch,this._cl,16),e(this._dh,this._dl,24),e(this._eh,this._el,32),e(this._fh,this._fl,40),e(this._gh,this._gl,48),e(this._hh,this._hl,56),t};var _f=An,Jv=Ke.exports,Xv=_f,e1=Hr,t1=pt.exports.Buffer,r1=new Array(160);function Li(){this.init(),this._w=r1,e1.call(this,128,112)}Jv(Li,Xv);Li.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this};Li.prototype._hash=function(){var t=t1.allocUnsafe(48);function e(r,n,i){t.writeInt32BE(r,i),t.writeInt32BE(n,i+4)}return e(this._ah,this._al,0),e(this._bh,this._bl,8),e(this._ch,this._cl,16),e(this._dh,this._dl,24),e(this._eh,this._el,32),e(this._fh,this._fl,40),t};var n1=Li,nr=df.exports=function(e){e=e.toLowerCase();var r=nr[e];if(!r)throw new Error(e+" is not supported (we accept pull requests)");return new r};nr.sha=mv;nr.sha1=Mv;nr.sha224=Vv;nr.sha256=vf;nr.sha384=n1;nr.sha512=_f;var B={},wf=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},r=Symbol("test"),n=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var i=42;e[r]=i;for(r in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var s=Object.getOwnPropertySymbols(e);if(s.length!==1||s[0]!==r||!Object.prototype.propertyIsEnumerable.call(e,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var o=Object.getOwnPropertyDescriptor(e,r);if(o.value!==i||o.enumerable!==!0)return!1}return!0},Gc=typeof Symbol<"u"&&Symbol,i1=wf,s1=function(){return typeof Gc!="function"||typeof Symbol!="function"||typeof Gc("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:i1()},o1="Function.prototype.bind called on incompatible ",vo=Array.prototype.slice,a1=Object.prototype.toString,c1="[object Function]",u1=function(e){var r=this;if(typeof r!="function"||a1.call(r)!==c1)throw new TypeError(o1+r);for(var n=vo.call(arguments,1),i,s=function(){if(this instanceof i){var l=r.apply(this,n.concat(vo.call(arguments)));return Object(l)===l?l:this}else return r.apply(e,n.concat(vo.call(arguments)))},o=Math.max(0,r.length-n.length),a=[],c=0;c<o;c++)a.push("$"+c);if(i=Function("binder","return function ("+a.join(",")+"){ return binder.apply(this,arguments); }")(s),r.prototype){var u=function(){};u.prototype=r.prototype,i.prototype=new u,u.prototype=null}return i},l1=u1,Ga=Function.prototype.bind||l1,f1=Ga,h1=f1.call(Function.call,Object.prototype.hasOwnProperty),re,Ar=SyntaxError,Sf=Function,vr=TypeError,mo=function(t){try{return Sf('"use strict"; return ('+t+").constructor;")()}catch{}},Kt=Object.getOwnPropertyDescriptor;if(Kt)try{Kt({},"")}catch{Kt=null}var _o=function(){throw new vr},d1=Kt?function(){try{return arguments.callee,_o}catch{try{return Kt(arguments,"callee").get}catch{return _o}}}():_o,ur=s1(),Mt=Object.getPrototypeOf||function(t){return t.__proto__},hr={},p1=typeof Uint8Array>"u"?re:Mt(Uint8Array),mr={"%AggregateError%":typeof AggregateError>"u"?re:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?re:ArrayBuffer,"%ArrayIteratorPrototype%":ur?Mt([][Symbol.iterator]()):re,"%AsyncFromSyncIteratorPrototype%":re,"%AsyncFunction%":hr,"%AsyncGenerator%":hr,"%AsyncGeneratorFunction%":hr,"%AsyncIteratorPrototype%":hr,"%Atomics%":typeof Atomics>"u"?re:Atomics,"%BigInt%":typeof BigInt>"u"?re:BigInt,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?re:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?re:Float32Array,"%Float64Array%":typeof Float64Array>"u"?re:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?re:FinalizationRegistry,"%Function%":Sf,"%GeneratorFunction%":hr,"%Int8Array%":typeof Int8Array>"u"?re:Int8Array,"%Int16Array%":typeof Int16Array>"u"?re:Int16Array,"%Int32Array%":typeof Int32Array>"u"?re:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":ur?Mt(Mt([][Symbol.iterator]())):re,"%JSON%":typeof JSON=="object"?JSON:re,"%Map%":typeof Map>"u"?re:Map,"%MapIteratorPrototype%":typeof Map>"u"||!ur?re:Mt(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?re:Promise,"%Proxy%":typeof Proxy>"u"?re:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?re:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?re:Set,"%SetIteratorPrototype%":typeof Set>"u"||!ur?re:Mt(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?re:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":ur?Mt(""[Symbol.iterator]()):re,"%Symbol%":ur?Symbol:re,"%SyntaxError%":Ar,"%ThrowTypeError%":d1,"%TypedArray%":p1,"%TypeError%":vr,"%Uint8Array%":typeof Uint8Array>"u"?re:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?re:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?re:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?re:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?re:WeakMap,"%WeakRef%":typeof WeakRef>"u"?re:WeakRef,"%WeakSet%":typeof WeakSet>"u"?re:WeakSet},b1=function t(e){var r;if(e==="%AsyncFunction%")r=mo("async function () {}");else if(e==="%GeneratorFunction%")r=mo("function* () {}");else if(e==="%AsyncGeneratorFunction%")r=mo("async function* () {}");else if(e==="%AsyncGenerator%"){var n=t("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var i=t("%AsyncGenerator%");i&&(r=Mt(i.prototype))}return mr[e]=r,r},Qc={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Mn=Ga,li=h1,g1=Mn.call(Function.call,Array.prototype.concat),y1=Mn.call(Function.apply,Array.prototype.splice),Zc=Mn.call(Function.call,String.prototype.replace),fi=Mn.call(Function.call,String.prototype.slice),v1=Mn.call(Function.call,RegExp.prototype.exec),m1=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,_1=/\\(\\)?/g,w1=function(e){var r=fi(e,0,1),n=fi(e,-1);if(r==="%"&&n!=="%")throw new Ar("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new Ar("invalid intrinsic syntax, expected opening `%`");var i=[];return Zc(e,m1,function(s,o,a,c){i[i.length]=a?Zc(c,_1,"$1"):o||s}),i},S1=function(e,r){var n=e,i;if(li(Qc,n)&&(i=Qc[n],n="%"+i[0]+"%"),li(mr,n)){var s=mr[n];if(s===hr&&(s=b1(n)),typeof s>"u"&&!r)throw new vr("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:i,name:n,value:s}}throw new Ar("intrinsic "+e+" does not exist!")},Pi=function(e,r){if(typeof e!="string"||e.length===0)throw new vr("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new vr('"allowMissing" argument must be a boolean');if(v1(/^%?[^%]*%?$/,e)===null)throw new Ar("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=w1(e),i=n.length>0?n[0]:"",s=S1("%"+i+"%",r),o=s.name,a=s.value,c=!1,u=s.alias;u&&(i=u[0],y1(n,g1([0,1],u)));for(var l=1,g=!0;l<n.length;l+=1){var f=n[l],p=fi(f,0,1),y=fi(f,-1);if((p==='"'||p==="'"||p==="`"||y==='"'||y==="'"||y==="`")&&p!==y)throw new Ar("property names with quotes must have matching quotes");if((f==="constructor"||!g)&&(c=!0),i+="."+f,o="%"+i+"%",li(mr,o))a=mr[o];else if(a!=null){if(!(f in a)){if(!r)throw new vr("base intrinsic for "+e+" exists, but the property is not available.");return}if(Kt&&l+1>=n.length){var E=Kt(a,f);g=!!E,g&&"get"in E&&!("originalValue"in E.get)?a=E.get:a=a[f]}else g=li(a,f),a=a[f];g&&!c&&(mr[o]=a)}}return a},Ef={exports:{}};(function(t){var e=Ga,r=Pi,n=r("%Function.prototype.apply%"),i=r("%Function.prototype.call%"),s=r("%Reflect.apply%",!0)||e.call(i,n),o=r("%Object.getOwnPropertyDescriptor%",!0),a=r("%Object.defineProperty%",!0),c=r("%Math.max%");if(a)try{a({},"a",{value:1})}catch{a=null}t.exports=function(g){var f=s(e,i,arguments);if(o&&a){var p=o(f,"length");p.configurable&&a(f,"length",{value:1+c(0,g.length-(arguments.length-1))})}return f};var u=function(){return s(e,n,arguments)};a?a(t.exports,"apply",{value:u}):t.exports.apply=u})(Ef);var xf=Pi,Cf=Ef.exports,E1=Cf(xf("String.prototype.indexOf")),Di=function(e,r){var n=xf(e,!!r);return typeof n=="function"&&E1(e,".prototype.")>-1?Cf(n):n},Qa=typeof Map=="function"&&Map.prototype,wo=Object.getOwnPropertyDescriptor&&Qa?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,hi=Qa&&wo&&typeof wo.get=="function"?wo.get:null,x1=Qa&&Map.prototype.forEach,Za=typeof Set=="function"&&Set.prototype,So=Object.getOwnPropertyDescriptor&&Za?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,di=Za&&So&&typeof So.get=="function"?So.get:null,C1=Za&&Set.prototype.forEach,k1=typeof WeakMap=="function"&&WeakMap.prototype,nn=k1?WeakMap.prototype.has:null,A1=typeof WeakSet=="function"&&WeakSet.prototype,sn=A1?WeakSet.prototype.has:null,M1=typeof WeakRef=="function"&&WeakRef.prototype,Yc=M1?WeakRef.prototype.deref:null,I1=Boolean.prototype.valueOf,R1=Object.prototype.toString,T1=Function.prototype.toString,O1=String.prototype.match,Ya=String.prototype.slice,Ot=String.prototype.replace,N1=String.prototype.toUpperCase,Kc=String.prototype.toLowerCase,kf=RegExp.prototype.test,Jc=Array.prototype.concat,lt=Array.prototype.join,L1=Array.prototype.slice,Xc=Math.floor,ya=typeof BigInt=="function"?BigInt.prototype.valueOf:null,Eo=Object.getOwnPropertySymbols,va=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,Mr=typeof Symbol=="function"&&typeof Symbol.iterator=="object",Le=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===Mr?"object":"symbol")?Symbol.toStringTag:null,Af=Object.prototype.propertyIsEnumerable,eu=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null);function tu(t,e){if(t===1/0||t===-1/0||t!==t||t&&t>-1e3&&t<1e3||kf.call(/e/,e))return e;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof t=="number"){var n=t<0?-Xc(-t):Xc(t);if(n!==t){var i=String(n),s=Ya.call(e,i.length+1);return Ot.call(i,r,"$&_")+"."+Ot.call(Ot.call(s,/([0-9]{3})/g,"$&_"),/_$/,"")}}return Ot.call(e,r,"$&_")}var ma=Na,ru=ma.custom,nu=If(ru)?ru:null,P1=function t(e,r,n,i){var s=r||{};if(It(s,"quoteStyle")&&s.quoteStyle!=="single"&&s.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(It(s,"maxStringLength")&&(typeof s.maxStringLength=="number"?s.maxStringLength<0&&s.maxStringLength!==1/0:s.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var o=It(s,"customInspect")?s.customInspect:!0;if(typeof o!="boolean"&&o!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(It(s,"indent")&&s.indent!==null&&s.indent!=="	"&&!(parseInt(s.indent,10)===s.indent&&s.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(It(s,"numericSeparator")&&typeof s.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var a=s.numericSeparator;if(typeof e>"u")return"undefined";if(e===null)return"null";if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return Tf(e,s);if(typeof e=="number"){if(e===0)return 1/0/e>0?"0":"-0";var c=String(e);return a?tu(e,c):c}if(typeof e=="bigint"){var u=String(e)+"n";return a?tu(e,u):u}var l=typeof s.depth>"u"?5:s.depth;if(typeof n>"u"&&(n=0),n>=l&&l>0&&typeof e=="object")return _a(e)?"[Array]":"[Object]";var g=X1(s,n);if(typeof i>"u")i=[];else if(Rf(i,e)>=0)return"[Circular]";function f(Z,X,ne){if(X&&(i=L1.call(i),i.push(X)),ne){var he={depth:s.depth};return It(s,"quoteStyle")&&(he.quoteStyle=s.quoteStyle),t(Z,he,n+1,i)}return t(Z,s,n+1,i)}if(typeof e=="function"&&!iu(e)){var p=V1(e),y=$n(e,f);return"[Function"+(p?": "+p:" (anonymous)")+"]"+(y.length>0?" { "+lt.call(y,", ")+" }":"")}if(If(e)){var E=Mr?Ot.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):va.call(e);return typeof e=="object"&&!Mr?Yr(E):E}if(Y1(e)){for(var k="<"+Kc.call(String(e.nodeName)),b=e.attributes||[],v=0;v<b.length;v++)k+=" "+b[v].name+"="+Mf(D1(b[v].value),"double",s);return k+=">",e.childNodes&&e.childNodes.length&&(k+="..."),k+="</"+Kc.call(String(e.nodeName))+">",k}if(_a(e)){if(e.length===0)return"[]";var w=$n(e,f);return g&&!J1(w)?"["+wa(w,g)+"]":"[ "+lt.call(w,", ")+" ]"}if(B1(e)){var A=$n(e,f);return!("cause"in Error.prototype)&&"cause"in e&&!Af.call(e,"cause")?"{ ["+String(e)+"] "+lt.call(Jc.call("[cause]: "+f(e.cause),A),", ")+" }":A.length===0?"["+String(e)+"]":"{ ["+String(e)+"] "+lt.call(A,", ")+" }"}if(typeof e=="object"&&o){if(nu&&typeof e[nu]=="function"&&ma)return ma(e,{depth:l-n});if(o!=="symbol"&&typeof e.inspect=="function")return e.inspect()}if(z1(e)){var N=[];return x1.call(e,function(Z,X){N.push(f(X,e,!0)+" => "+f(Z,e))}),su("Map",hi.call(e),N,g)}if(Q1(e)){var F=[];return C1.call(e,function(Z){F.push(f(Z,e))}),su("Set",di.call(e),F,g)}if(q1(e))return xo("WeakMap");if(Z1(e))return xo("WeakSet");if(G1(e))return xo("WeakRef");if($1(e))return Yr(f(Number(e)));if(U1(e))return Yr(f(ya.call(e)));if(W1(e))return Yr(I1.call(e));if(F1(e))return Yr(f(String(e)));if(!j1(e)&&!iu(e)){var $=$n(e,f),D=eu?eu(e)===Object.prototype:e instanceof Object||e.constructor===Object,P=e instanceof Object?"":"null prototype",ie=!D&&Le&&Object(e)===e&&Le in e?Ya.call(Wt(e),8,-1):P?"Object":"",te=D||typeof e.constructor!="function"?"":e.constructor.name?e.constructor.name+" ":"",q=te+(ie||P?"["+lt.call(Jc.call([],ie||[],P||[]),": ")+"] ":"");return $.length===0?q+"{}":g?q+"{"+wa($,g)+"}":q+"{ "+lt.call($,", ")+" }"}return String(e)};function Mf(t,e,r){var n=(r.quoteStyle||e)==="double"?'"':"'";return n+t+n}function D1(t){return Ot.call(String(t),/"/g,"&quot;")}function _a(t){return Wt(t)==="[object Array]"&&(!Le||!(typeof t=="object"&&Le in t))}function j1(t){return Wt(t)==="[object Date]"&&(!Le||!(typeof t=="object"&&Le in t))}function iu(t){return Wt(t)==="[object RegExp]"&&(!Le||!(typeof t=="object"&&Le in t))}function B1(t){return Wt(t)==="[object Error]"&&(!Le||!(typeof t=="object"&&Le in t))}function F1(t){return Wt(t)==="[object String]"&&(!Le||!(typeof t=="object"&&Le in t))}function $1(t){return Wt(t)==="[object Number]"&&(!Le||!(typeof t=="object"&&Le in t))}function W1(t){return Wt(t)==="[object Boolean]"&&(!Le||!(typeof t=="object"&&Le in t))}function If(t){if(Mr)return t&&typeof t=="object"&&t instanceof Symbol;if(typeof t=="symbol")return!0;if(!t||typeof t!="object"||!va)return!1;try{return va.call(t),!0}catch{}return!1}function U1(t){if(!t||typeof t!="object"||!ya)return!1;try{return ya.call(t),!0}catch{}return!1}var H1=Object.prototype.hasOwnProperty||function(t){return t in this};function It(t,e){return H1.call(t,e)}function Wt(t){return R1.call(t)}function V1(t){if(t.name)return t.name;var e=O1.call(T1.call(t),/^function\s*([\w$]+)/);return e?e[1]:null}function Rf(t,e){if(t.indexOf)return t.indexOf(e);for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}function z1(t){if(!hi||!t||typeof t!="object")return!1;try{hi.call(t);try{di.call(t)}catch{return!0}return t instanceof Map}catch{}return!1}function q1(t){if(!nn||!t||typeof t!="object")return!1;try{nn.call(t,nn);try{sn.call(t,sn)}catch{return!0}return t instanceof WeakMap}catch{}return!1}function G1(t){if(!Yc||!t||typeof t!="object")return!1;try{return Yc.call(t),!0}catch{}return!1}function Q1(t){if(!di||!t||typeof t!="object")return!1;try{di.call(t);try{hi.call(t)}catch{return!0}return t instanceof Set}catch{}return!1}function Z1(t){if(!sn||!t||typeof t!="object")return!1;try{sn.call(t,sn);try{nn.call(t,nn)}catch{return!0}return t instanceof WeakSet}catch{}return!1}function Y1(t){return!t||typeof t!="object"?!1:typeof HTMLElement<"u"&&t instanceof HTMLElement?!0:typeof t.nodeName=="string"&&typeof t.getAttribute=="function"}function Tf(t,e){if(t.length>e.maxStringLength){var r=t.length-e.maxStringLength,n="... "+r+" more character"+(r>1?"s":"");return Tf(Ya.call(t,0,e.maxStringLength),e)+n}var i=Ot.call(Ot.call(t,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,K1);return Mf(i,"single",e)}function K1(t){var e=t.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return r?"\\"+r:"\\x"+(e<16?"0":"")+N1.call(e.toString(16))}function Yr(t){return"Object("+t+")"}function xo(t){return t+" { ? }"}function su(t,e,r,n){var i=n?wa(r,n):lt.call(r,", ");return t+" ("+e+") {"+i+"}"}function J1(t){for(var e=0;e<t.length;e++)if(Rf(t[e],`
`)>=0)return!1;return!0}function X1(t,e){var r;if(t.indent==="	")r="	";else if(typeof t.indent=="number"&&t.indent>0)r=lt.call(Array(t.indent+1)," ");else return null;return{base:r,prev:lt.call(Array(e+1),r)}}function wa(t,e){if(t.length===0)return"";var r=`
`+e.prev+e.base;return r+lt.call(t,","+r)+`
`+e.prev}function $n(t,e){var r=_a(t),n=[];if(r){n.length=t.length;for(var i=0;i<t.length;i++)n[i]=It(t,i)?e(t[i],t):""}var s=typeof Eo=="function"?Eo(t):[],o;if(Mr){o={};for(var a=0;a<s.length;a++)o["$"+s[a]]=s[a]}for(var c in t)!It(t,c)||r&&String(Number(c))===c&&c<t.length||Mr&&o["$"+c]instanceof Symbol||(kf.call(/[^\w$]/,c)?n.push(e(c,t)+": "+e(t[c],t)):n.push(c+": "+e(t[c],t)));if(typeof Eo=="function")for(var u=0;u<s.length;u++)Af.call(t,s[u])&&n.push("["+e(s[u])+"]: "+e(t[s[u]],t));return n}var Ka=Pi,Vr=Di,em=P1,tm=Ka("%TypeError%"),Wn=Ka("%WeakMap%",!0),Un=Ka("%Map%",!0),rm=Vr("WeakMap.prototype.get",!0),nm=Vr("WeakMap.prototype.set",!0),im=Vr("WeakMap.prototype.has",!0),sm=Vr("Map.prototype.get",!0),om=Vr("Map.prototype.set",!0),am=Vr("Map.prototype.has",!0),Ja=function(t,e){for(var r=t,n;(n=r.next)!==null;r=n)if(n.key===e)return r.next=n.next,n.next=t.next,t.next=n,n},cm=function(t,e){var r=Ja(t,e);return r&&r.value},um=function(t,e,r){var n=Ja(t,e);n?n.value=r:t.next={key:e,next:t.next,value:r}},lm=function(t,e){return!!Ja(t,e)},fm=function(){var e,r,n,i={assert:function(s){if(!i.has(s))throw new tm("Side channel does not contain "+em(s))},get:function(s){if(Wn&&s&&(typeof s=="object"||typeof s=="function")){if(e)return rm(e,s)}else if(Un){if(r)return sm(r,s)}else if(n)return cm(n,s)},has:function(s){if(Wn&&s&&(typeof s=="object"||typeof s=="function")){if(e)return im(e,s)}else if(Un){if(r)return am(r,s)}else if(n)return lm(n,s);return!1},set:function(s,o){Wn&&s&&(typeof s=="object"||typeof s=="function")?(e||(e=new Wn),nm(e,s,o)):Un?(r||(r=new Un),om(r,s,o)):(n||(n={key:{},next:null}),um(n,s,o))}};return i},hm=String.prototype.replace,dm=/%20/g,Co={RFC1738:"RFC1738",RFC3986:"RFC3986"},Xa={default:Co.RFC3986,formatters:{RFC1738:function(t){return hm.call(t,dm,"+")},RFC3986:function(t){return String(t)}},RFC1738:Co.RFC1738,RFC3986:Co.RFC3986},pm=Xa,ko=Object.prototype.hasOwnProperty,qt=Array.isArray,ot=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}(),bm=function(e){for(;e.length>1;){var r=e.pop(),n=r.obj[r.prop];if(qt(n)){for(var i=[],s=0;s<n.length;++s)typeof n[s]<"u"&&i.push(n[s]);r.obj[r.prop]=i}}},Of=function(e,r){for(var n=r&&r.plainObjects?Object.create(null):{},i=0;i<e.length;++i)typeof e[i]<"u"&&(n[i]=e[i]);return n},gm=function t(e,r,n){if(!r)return e;if(typeof r!="object"){if(qt(e))e.push(r);else if(e&&typeof e=="object")(n&&(n.plainObjects||n.allowPrototypes)||!ko.call(Object.prototype,r))&&(e[r]=!0);else return[e,r];return e}if(!e||typeof e!="object")return[e].concat(r);var i=e;return qt(e)&&!qt(r)&&(i=Of(e,n)),qt(e)&&qt(r)?(r.forEach(function(s,o){if(ko.call(e,o)){var a=e[o];a&&typeof a=="object"&&s&&typeof s=="object"?e[o]=t(a,s,n):e.push(s)}else e[o]=s}),e):Object.keys(r).reduce(function(s,o){var a=r[o];return ko.call(s,o)?s[o]=t(s[o],a,n):s[o]=a,s},i)},ym=function(e,r){return Object.keys(r).reduce(function(n,i){return n[i]=r[i],n},e)},vm=function(t,e,r){var n=t.replace(/\+/g," ");if(r==="iso-8859-1")return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch{return n}},mm=function(e,r,n,i,s){if(e.length===0)return e;var o=e;if(typeof e=="symbol"?o=Symbol.prototype.toString.call(e):typeof e!="string"&&(o=String(e)),n==="iso-8859-1")return escape(o).replace(/%u[0-9a-f]{4}/gi,function(l){return"%26%23"+parseInt(l.slice(2),16)+"%3B"});for(var a="",c=0;c<o.length;++c){var u=o.charCodeAt(c);if(u===45||u===46||u===95||u===126||u>=48&&u<=57||u>=65&&u<=90||u>=97&&u<=122||s===pm.RFC1738&&(u===40||u===41)){a+=o.charAt(c);continue}if(u<128){a=a+ot[u];continue}if(u<2048){a=a+(ot[192|u>>6]+ot[128|u&63]);continue}if(u<55296||u>=57344){a=a+(ot[224|u>>12]+ot[128|u>>6&63]+ot[128|u&63]);continue}c+=1,u=65536+((u&1023)<<10|o.charCodeAt(c)&1023),a+=ot[240|u>>18]+ot[128|u>>12&63]+ot[128|u>>6&63]+ot[128|u&63]}return a},_m=function(e){for(var r=[{obj:{o:e},prop:"o"}],n=[],i=0;i<r.length;++i)for(var s=r[i],o=s.obj[s.prop],a=Object.keys(o),c=0;c<a.length;++c){var u=a[c],l=o[u];typeof l=="object"&&l!==null&&n.indexOf(l)===-1&&(r.push({obj:o,prop:u}),n.push(l))}return bm(r),e},wm=function(e){return Object.prototype.toString.call(e)==="[object RegExp]"},Sm=function(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},Em=function(e,r){return[].concat(e,r)},xm=function(e,r){if(qt(e)){for(var n=[],i=0;i<e.length;i+=1)n.push(r(e[i]));return n}return r(e)},Nf={arrayToObject:Of,assign:ym,combine:Em,compact:_m,decode:vm,encode:mm,isBuffer:Sm,isRegExp:wm,maybeMap:xm,merge:gm},Lf=fm,Sa=Nf,on=Xa,Cm=Object.prototype.hasOwnProperty,ou={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,r){return e+"["+r+"]"},repeat:function(e){return e}},vt=Array.isArray,km=String.prototype.split,Am=Array.prototype.push,Pf=function(t,e){Am.apply(t,vt(e)?e:[e])},Mm=Date.prototype.toISOString,au=on.default,Ae={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:Sa.encode,encodeValuesOnly:!1,format:au,formatter:on.formatters[au],indices:!1,serializeDate:function(e){return Mm.call(e)},skipNulls:!1,strictNullHandling:!1},Im=function(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"},Ao={},Rm=function t(e,r,n,i,s,o,a,c,u,l,g,f,p,y,E,k){for(var b=e,v=k,w=0,A=!1;(v=v.get(Ao))!==void 0&&!A;){var N=v.get(e);if(w+=1,typeof N<"u"){if(N===w)throw new RangeError("Cyclic object value");A=!0}typeof v.get(Ao)>"u"&&(w=0)}if(typeof c=="function"?b=c(r,b):b instanceof Date?b=g(b):n==="comma"&&vt(b)&&(b=Sa.maybeMap(b,function(ce){return ce instanceof Date?g(ce):ce})),b===null){if(s)return a&&!y?a(r,Ae.encoder,E,"key",f):r;b=""}if(Im(b)||Sa.isBuffer(b)){if(a){var F=y?r:a(r,Ae.encoder,E,"key",f);if(n==="comma"&&y){for(var $=km.call(String(b),","),D="",P=0;P<$.length;++P)D+=(P===0?"":",")+p(a($[P],Ae.encoder,E,"value",f));return[p(F)+(i&&vt(b)&&$.length===1?"[]":"")+"="+D]}return[p(F)+"="+p(a(b,Ae.encoder,E,"value",f))]}return[p(r)+"="+p(String(b))]}var ie=[];if(typeof b>"u")return ie;var te;if(n==="comma"&&vt(b))te=[{value:b.length>0?b.join(",")||null:void 0}];else if(vt(c))te=c;else{var q=Object.keys(b);te=u?q.sort(u):q}for(var Z=i&&vt(b)&&b.length===1?r+"[]":r,X=0;X<te.length;++X){var ne=te[X],he=typeof ne=="object"&&typeof ne.value<"u"?ne.value:b[ne];if(!(o&&he===null)){var we=vt(b)?typeof n=="function"?n(Z,ne):Z:Z+(l?"."+ne:"["+ne+"]");k.set(e,w);var me=Lf();me.set(Ao,k),Pf(ie,t(he,we,n,i,s,o,a,c,u,l,g,f,p,y,E,me))}}return ie},Tm=function(e){if(!e)return Ae;if(e.encoder!==null&&typeof e.encoder<"u"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");var r=e.charset||Ae.charset;if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=on.default;if(typeof e.format<"u"){if(!Cm.call(on.formatters,e.format))throw new TypeError("Unknown format option provided.");n=e.format}var i=on.formatters[n],s=Ae.filter;return(typeof e.filter=="function"||vt(e.filter))&&(s=e.filter),{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:Ae.addQueryPrefix,allowDots:typeof e.allowDots>"u"?Ae.allowDots:!!e.allowDots,charset:r,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:Ae.charsetSentinel,delimiter:typeof e.delimiter>"u"?Ae.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:Ae.encode,encoder:typeof e.encoder=="function"?e.encoder:Ae.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:Ae.encodeValuesOnly,filter:s,format:n,formatter:i,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:Ae.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:Ae.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:Ae.strictNullHandling}},Om=function(t,e){var r=t,n=Tm(e),i,s;typeof n.filter=="function"?(s=n.filter,r=s("",r)):vt(n.filter)&&(s=n.filter,i=s);var o=[];if(typeof r!="object"||r===null)return"";var a;e&&e.arrayFormat in ou?a=e.arrayFormat:e&&"indices"in e?a=e.indices?"indices":"repeat":a="indices";var c=ou[a];if(e&&"commaRoundTrip"in e&&typeof e.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var u=c==="comma"&&e&&e.commaRoundTrip;i||(i=Object.keys(r)),n.sort&&i.sort(n.sort);for(var l=Lf(),g=0;g<i.length;++g){var f=i[g];n.skipNulls&&r[f]===null||Pf(o,Rm(r[f],f,c,u,n.strictNullHandling,n.skipNulls,n.encode?n.encoder:null,n.filter,n.sort,n.allowDots,n.serializeDate,n.format,n.formatter,n.encodeValuesOnly,n.charset,l))}var p=o.join(n.delimiter),y=n.addQueryPrefix===!0?"?":"";return n.charsetSentinel&&(n.charset==="iso-8859-1"?y+="utf8=%26%2310003%3B&":y+="utf8=%E2%9C%93&"),p.length>0?y+p:""},Ir=Nf,Ea=Object.prototype.hasOwnProperty,Nm=Array.isArray,xe={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:Ir.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},Lm=function(t){return t.replace(/&#(\d+);/g,function(e,r){return String.fromCharCode(parseInt(r,10))})},Df=function(t,e){return t&&typeof t=="string"&&e.comma&&t.indexOf(",")>-1?t.split(","):t},Pm="utf8=%26%2310003%3B",Dm="utf8=%E2%9C%93",jm=function(e,r){var n={},i=r.ignoreQueryPrefix?e.replace(/^\?/,""):e,s=r.parameterLimit===1/0?void 0:r.parameterLimit,o=i.split(r.delimiter,s),a=-1,c,u=r.charset;if(r.charsetSentinel)for(c=0;c<o.length;++c)o[c].indexOf("utf8=")===0&&(o[c]===Dm?u="utf-8":o[c]===Pm&&(u="iso-8859-1"),a=c,c=o.length);for(c=0;c<o.length;++c)if(c!==a){var l=o[c],g=l.indexOf("]="),f=g===-1?l.indexOf("="):g+1,p,y;f===-1?(p=r.decoder(l,xe.decoder,u,"key"),y=r.strictNullHandling?null:""):(p=r.decoder(l.slice(0,f),xe.decoder,u,"key"),y=Ir.maybeMap(Df(l.slice(f+1),r),function(E){return r.decoder(E,xe.decoder,u,"value")})),y&&r.interpretNumericEntities&&u==="iso-8859-1"&&(y=Lm(y)),l.indexOf("[]=")>-1&&(y=Nm(y)?[y]:y),Ea.call(n,p)?n[p]=Ir.combine(n[p],y):n[p]=y}return n},Bm=function(t,e,r,n){for(var i=n?e:Df(e,r),s=t.length-1;s>=0;--s){var o,a=t[s];if(a==="[]"&&r.parseArrays)o=[].concat(i);else{o=r.plainObjects?Object.create(null):{};var c=a.charAt(0)==="["&&a.charAt(a.length-1)==="]"?a.slice(1,-1):a,u=parseInt(c,10);!r.parseArrays&&c===""?o={0:i}:!isNaN(u)&&a!==c&&String(u)===c&&u>=0&&r.parseArrays&&u<=r.arrayLimit?(o=[],o[u]=i):c!=="__proto__"&&(o[c]=i)}i=o}return i},Fm=function(e,r,n,i){if(!!e){var s=n.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,o=/(\[[^[\]]*])/,a=/(\[[^[\]]*])/g,c=n.depth>0&&o.exec(s),u=c?s.slice(0,c.index):s,l=[];if(u){if(!n.plainObjects&&Ea.call(Object.prototype,u)&&!n.allowPrototypes)return;l.push(u)}for(var g=0;n.depth>0&&(c=a.exec(s))!==null&&g<n.depth;){if(g+=1,!n.plainObjects&&Ea.call(Object.prototype,c[1].slice(1,-1))&&!n.allowPrototypes)return;l.push(c[1])}return c&&l.push("["+s.slice(c.index)+"]"),Bm(l,r,n,i)}},$m=function(e){if(!e)return xe;if(e.decoder!==null&&e.decoder!==void 0&&typeof e.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=typeof e.charset>"u"?xe.charset:e.charset;return{allowDots:typeof e.allowDots>"u"?xe.allowDots:!!e.allowDots,allowPrototypes:typeof e.allowPrototypes=="boolean"?e.allowPrototypes:xe.allowPrototypes,allowSparse:typeof e.allowSparse=="boolean"?e.allowSparse:xe.allowSparse,arrayLimit:typeof e.arrayLimit=="number"?e.arrayLimit:xe.arrayLimit,charset:r,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:xe.charsetSentinel,comma:typeof e.comma=="boolean"?e.comma:xe.comma,decoder:typeof e.decoder=="function"?e.decoder:xe.decoder,delimiter:typeof e.delimiter=="string"||Ir.isRegExp(e.delimiter)?e.delimiter:xe.delimiter,depth:typeof e.depth=="number"||e.depth===!1?+e.depth:xe.depth,ignoreQueryPrefix:e.ignoreQueryPrefix===!0,interpretNumericEntities:typeof e.interpretNumericEntities=="boolean"?e.interpretNumericEntities:xe.interpretNumericEntities,parameterLimit:typeof e.parameterLimit=="number"?e.parameterLimit:xe.parameterLimit,parseArrays:e.parseArrays!==!1,plainObjects:typeof e.plainObjects=="boolean"?e.plainObjects:xe.plainObjects,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:xe.strictNullHandling}},Wm=function(t,e){var r=$m(e);if(t===""||t===null||typeof t>"u")return r.plainObjects?Object.create(null):{};for(var n=typeof t=="string"?jm(t,r):t,i=r.plainObjects?Object.create(null):{},s=Object.keys(n),o=0;o<s.length;++o){var a=s[o],c=Fm(a,n[a],r,typeof t=="string");i=Ir.merge(i,c,r)}return r.allowSparse===!0?i:Ir.compact(i)},Um=Om,Hm=Wm,Vm=Xa,zm={formats:Vm,parse:Hm,stringify:Um},In={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ProviderType=t.RegExpString=t.IntNumber=t.BigIntString=t.AddressString=t.HexString=t.OpaqueType=void 0;function e(){return n=>n}t.OpaqueType=e,t.HexString=e(),t.AddressString=e(),t.BigIntString=e();function r(n){return Math.floor(n)}t.IntNumber=r,t.RegExpString=e(),function(n){n.CoinbaseWallet="CoinbaseWallet",n.MetaMask="MetaMask",n.Unselected=""}(t.ProviderType||(t.ProviderType={}))})(In);var qm=Q&&Q.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(B,"__esModule",{value:!0});B.isInIFrame=B.createQrUrl=B.getFavicon=B.range=B.isBigNumber=B.ensureParsedJSONObject=B.ensureBN=B.ensureRegExpString=B.ensureIntNumber=B.ensureBuffer=B.ensureAddressString=B.ensureEvenLengthHexString=B.ensureHexString=B.isHexString=B.prepend0x=B.strip0x=B.has0xPrefix=B.hexStringFromIntNumber=B.intNumberFromHexString=B.bigIntStringFromBN=B.hexStringFromBuffer=B.hexStringToUint8Array=B.uint8ArrayToHex=B.randomBytesHex=void 0;const Tt=qm(wi.exports),Gm=zm,Ye=In,jf=/^[0-9]*$/,Bf=/^[a-f0-9]*$/;function Qm(t){return Ff(crypto.getRandomValues(new Uint8Array(t)))}B.randomBytesHex=Qm;function Ff(t){return[...t].map(e=>e.toString(16).padStart(2,"0")).join("")}B.uint8ArrayToHex=Ff;function Zm(t){return new Uint8Array(t.match(/.{1,2}/g).map(e=>parseInt(e,16)))}B.hexStringToUint8Array=Zm;function Ym(t,e=!1){const r=t.toString("hex");return(0,Ye.HexString)(e?"0x"+r:r)}B.hexStringFromBuffer=Ym;function Km(t){return(0,Ye.BigIntString)(t.toString(10))}B.bigIntStringFromBN=Km;function Jm(t){return(0,Ye.IntNumber)(new Tt.default(Tn(t,!1),16).toNumber())}B.intNumberFromHexString=Jm;function Xm(t){return(0,Ye.HexString)("0x"+new Tt.default(t).toString(16))}B.hexStringFromIntNumber=Xm;function ec(t){return t.startsWith("0x")||t.startsWith("0X")}B.has0xPrefix=ec;function ji(t){return ec(t)?t.slice(2):t}B.strip0x=ji;function $f(t){return ec(t)?"0x"+t.slice(2):"0x"+t}B.prepend0x=$f;function Rn(t){if(typeof t!="string")return!1;const e=ji(t).toLowerCase();return Bf.test(e)}B.isHexString=Rn;function Wf(t,e=!1){if(typeof t=="string"){const r=ji(t).toLowerCase();if(Bf.test(r))return(0,Ye.HexString)(e?"0x"+r:r)}throw new Error(`"${String(t)}" is not a hexadecimal string`)}B.ensureHexString=Wf;function Tn(t,e=!1){let r=Wf(t,!1);return r.length%2===1&&(r=(0,Ye.HexString)("0"+r)),e?(0,Ye.HexString)("0x"+r):r}B.ensureEvenLengthHexString=Tn;function e_(t){if(typeof t=="string"){const e=ji(t).toLowerCase();if(Rn(e)&&e.length===40)return(0,Ye.AddressString)($f(e))}throw new Error(`Invalid Ethereum address: ${String(t)}`)}B.ensureAddressString=e_;function t_(t){if(Buffer.isBuffer(t))return t;if(typeof t=="string")if(Rn(t)){const e=Tn(t,!1);return Buffer.from(e,"hex")}else return Buffer.from(t,"utf8");throw new Error(`Not binary data: ${String(t)}`)}B.ensureBuffer=t_;function Uf(t){if(typeof t=="number"&&Number.isInteger(t))return(0,Ye.IntNumber)(t);if(typeof t=="string"){if(jf.test(t))return(0,Ye.IntNumber)(Number(t));if(Rn(t))return(0,Ye.IntNumber)(new Tt.default(Tn(t,!1),16).toNumber())}throw new Error(`Not an integer: ${String(t)}`)}B.ensureIntNumber=Uf;function r_(t){if(t instanceof RegExp)return(0,Ye.RegExpString)(t.toString());throw new Error(`Not a RegExp: ${String(t)}`)}B.ensureRegExpString=r_;function n_(t){if(t!==null&&(Tt.default.isBN(t)||Hf(t)))return new Tt.default(t.toString(10),10);if(typeof t=="number")return new Tt.default(Uf(t));if(typeof t=="string"){if(jf.test(t))return new Tt.default(t,10);if(Rn(t))return new Tt.default(Tn(t,!1),16)}throw new Error(`Not an integer: ${String(t)}`)}B.ensureBN=n_;function i_(t){if(typeof t=="string")return JSON.parse(t);if(typeof t=="object")return t;throw new Error(`Not a JSON string or an object: ${String(t)}`)}B.ensureParsedJSONObject=i_;function Hf(t){if(t==null||typeof t.constructor!="function")return!1;const{constructor:e}=t;return typeof e.config=="function"&&typeof e.EUCLID=="number"}B.isBigNumber=Hf;function s_(t,e){return Array.from({length:e-t},(r,n)=>t+n)}B.range=s_;function o_(){const t=document.querySelector('link[sizes="192x192"]')||document.querySelector('link[sizes="180x180"]')||document.querySelector('link[rel="icon"]')||document.querySelector('link[rel="shortcut icon"]'),{protocol:e,host:r}=document.location,n=t?t.getAttribute("href"):null;return!n||n.startsWith("javascript:")?null:n.startsWith("http://")||n.startsWith("https://")||n.startsWith("data:")?n:n.startsWith("//")?e+n:`${e}//${r}${n}`}B.getFavicon=o_;function a_(t,e,r,n,i,s){const o=n?"parent-id":"id",a=(0,Gm.stringify)({[o]:t,secret:e,server:r,v:i,chainId:s});return`${r}/#/link?${a}`}B.createQrUrl=a_;function c_(){try{return window.frameElement!==null}catch{return!1}}B.isInIFrame=c_;Object.defineProperty(Br,"__esModule",{value:!0});Br.Session=void 0;const u_=Ur,cu=Ti,uu=df.exports,lu=B,Mo="session:id",fu="session:secret",hu="session:linked";class tc{constructor(e,r,n,i){this._storage=e,this._id=r||(0,lu.randomBytesHex)(16),this._secret=n||(0,lu.randomBytesHex)(32),this._key=new uu.sha256().update(`${this._id}, ${this._secret} WalletLink`).digest("hex"),this._linked=!!i}static load(e){const r=e.getItem(Mo),n=e.getItem(hu),i=e.getItem(fu);return r&&i?new tc(e,r,i,n==="1"):null}static get persistedSessionIdChange$(){return(0,u_.fromEvent)(window,"storage").pipe((0,cu.filter)(e=>e.key===Mo),(0,cu.map)(e=>({oldValue:e.oldValue||null,newValue:e.newValue||null})))}static hash(e){return new uu.sha256().update(e).digest("hex")}get id(){return this._id}get secret(){return this._secret}get key(){return this._key}get linked(){return this._linked}set linked(e){this._linked=e,this.persistLinked()}save(){return this._storage.setItem(Mo,this._id),this._storage.setItem(fu,this._secret),this.persistLinked(),this}persistLinked(){this._storage.setItem(hu,this._linked?"1":"0")}}Br.Session=tc;var it={};Object.defineProperty(it,"__esModule",{value:!0});it.WalletSDKRelayAbstract=it.APP_VERSION_KEY=it.LOCAL_STORAGE_ADDRESSES_KEY=it.WALLET_USER_NAME_KEY=void 0;const du=ki;it.WALLET_USER_NAME_KEY="walletUsername";it.LOCAL_STORAGE_ADDRESSES_KEY="Addresses";it.APP_VERSION_KEY="AppVersion";class l_{async makeEthereumJSONRPCRequest(e,r){if(!r)throw new Error("Error: No jsonRpcUrl provided");return window.fetch(r,{method:"POST",body:JSON.stringify(e),mode:"cors",headers:{"Content-Type":"application/json"}}).then(n=>n.json()).then(n=>{if(!n)throw du.ethErrors.rpc.parse({});const i=n,{error:s}=i;if(s)throw(0,du.serializeError)(s);return i})}}it.WalletSDKRelayAbstract=l_;var pi={exports:{}},Vf=Si.exports.EventEmitter,Io,pu;function f_(){if(pu)return Io;pu=1;function t(f,p){var y=Object.keys(f);if(Object.getOwnPropertySymbols){var E=Object.getOwnPropertySymbols(f);p&&(E=E.filter(function(k){return Object.getOwnPropertyDescriptor(f,k).enumerable})),y.push.apply(y,E)}return y}function e(f){for(var p=1;p<arguments.length;p++){var y=arguments[p]!=null?arguments[p]:{};p%2?t(Object(y),!0).forEach(function(E){r(f,E,y[E])}):Object.getOwnPropertyDescriptors?Object.defineProperties(f,Object.getOwnPropertyDescriptors(y)):t(Object(y)).forEach(function(E){Object.defineProperty(f,E,Object.getOwnPropertyDescriptor(y,E))})}return f}function r(f,p,y){return p in f?Object.defineProperty(f,p,{value:y,enumerable:!0,configurable:!0,writable:!0}):f[p]=y,f}function n(f,p){if(!(f instanceof p))throw new TypeError("Cannot call a class as a function")}function i(f,p){for(var y=0;y<p.length;y++){var E=p[y];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(f,E.key,E)}}function s(f,p,y){return p&&i(f.prototype,p),y&&i(f,y),f}var o=Ei,a=o.Buffer,c=Na,u=c.inspect,l=u&&u.custom||"inspect";function g(f,p,y){a.prototype.copy.call(f,p,y)}return Io=function(){function f(){n(this,f),this.head=null,this.tail=null,this.length=0}return s(f,[{key:"push",value:function(y){var E={data:y,next:null};this.length>0?this.tail.next=E:this.head=E,this.tail=E,++this.length}},{key:"unshift",value:function(y){var E={data:y,next:this.head};this.length===0&&(this.tail=E),this.head=E,++this.length}},{key:"shift",value:function(){if(this.length!==0){var y=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,y}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(y){if(this.length===0)return"";for(var E=this.head,k=""+E.data;E=E.next;)k+=y+E.data;return k}},{key:"concat",value:function(y){if(this.length===0)return a.alloc(0);for(var E=a.allocUnsafe(y>>>0),k=this.head,b=0;k;)g(k.data,E,b),b+=k.data.length,k=k.next;return E}},{key:"consume",value:function(y,E){var k;return y<this.head.data.length?(k=this.head.data.slice(0,y),this.head.data=this.head.data.slice(y)):y===this.head.data.length?k=this.shift():k=E?this._getString(y):this._getBuffer(y),k}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(y){var E=this.head,k=1,b=E.data;for(y-=b.length;E=E.next;){var v=E.data,w=y>v.length?v.length:y;if(w===v.length?b+=v:b+=v.slice(0,y),y-=w,y===0){w===v.length?(++k,E.next?this.head=E.next:this.head=this.tail=null):(this.head=E,E.data=v.slice(w));break}++k}return this.length-=k,b}},{key:"_getBuffer",value:function(y){var E=a.allocUnsafe(y),k=this.head,b=1;for(k.data.copy(E),y-=k.data.length;k=k.next;){var v=k.data,w=y>v.length?v.length:y;if(v.copy(E,E.length-y,0,w),y-=w,y===0){w===v.length?(++b,k.next?this.head=k.next:this.head=this.tail=null):(this.head=k,k.data=v.slice(w));break}++b}return this.length-=b,E}},{key:l,value:function(y,E){return u(this,e({},E,{depth:0,customInspect:!1}))}}]),f}(),Io}function h_(t,e){var r=this,n=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return n||i?(e?e(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(xa,this,t)):process.nextTick(xa,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(s){!e&&s?r._writableState?r._writableState.errorEmitted?process.nextTick(Kn,r):(r._writableState.errorEmitted=!0,process.nextTick(bu,r,s)):process.nextTick(bu,r,s):e?(process.nextTick(Kn,r),e(s)):process.nextTick(Kn,r)}),this)}function bu(t,e){xa(t,e),Kn(t)}function Kn(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function d_(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function xa(t,e){t.emit("error",e)}function p_(t,e){var r=t._readableState,n=t._writableState;r&&r.autoDestroy||n&&n.autoDestroy?t.destroy(e):t.emit("error",e)}var zf={destroy:h_,undestroy:d_,errorOrDestroy:p_},ir={};function b_(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var qf={};function Xe(t,e,r){r||(r=Error);function n(s,o,a){return typeof e=="string"?e:e(s,o,a)}var i=function(s){b_(o,s);function o(a,c,u){return s.call(this,n(a,c,u))||this}return o}(r);i.prototype.name=r.name,i.prototype.code=t,qf[t]=i}function gu(t,e){if(Array.isArray(t)){var r=t.length;return t=t.map(function(n){return String(n)}),r>2?"one of ".concat(e," ").concat(t.slice(0,r-1).join(", "),", or ")+t[r-1]:r===2?"one of ".concat(e," ").concat(t[0]," or ").concat(t[1]):"of ".concat(e," ").concat(t[0])}else return"of ".concat(e," ").concat(String(t))}function g_(t,e,r){return t.substr(!r||r<0?0:+r,e.length)===e}function y_(t,e,r){return(r===void 0||r>t.length)&&(r=t.length),t.substring(r-e.length,r)===e}function v_(t,e,r){return typeof r!="number"&&(r=0),r+e.length>t.length?!1:t.indexOf(e,r)!==-1}Xe("ERR_INVALID_OPT_VALUE",function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'},TypeError);Xe("ERR_INVALID_ARG_TYPE",function(t,e,r){var n;typeof e=="string"&&g_(e,"not ")?(n="must not be",e=e.replace(/^not /,"")):n="must be";var i;if(y_(t," argument"))i="The ".concat(t," ").concat(n," ").concat(gu(e,"type"));else{var s=v_(t,".")?"property":"argument";i='The "'.concat(t,'" ').concat(s," ").concat(n," ").concat(gu(e,"type"))}return i+=". Received type ".concat(typeof r),i},TypeError);Xe("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");Xe("ERR_METHOD_NOT_IMPLEMENTED",function(t){return"The "+t+" method is not implemented"});Xe("ERR_STREAM_PREMATURE_CLOSE","Premature close");Xe("ERR_STREAM_DESTROYED",function(t){return"Cannot call "+t+" after a stream was destroyed"});Xe("ERR_MULTIPLE_CALLBACK","Callback called multiple times");Xe("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");Xe("ERR_STREAM_WRITE_AFTER_END","write after end");Xe("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);Xe("ERR_UNKNOWN_ENCODING",function(t){return"Unknown encoding: "+t},TypeError);Xe("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");ir.codes=qf;var m_=ir.codes.ERR_INVALID_OPT_VALUE;function __(t,e,r){return t.highWaterMark!=null?t.highWaterMark:e?t[r]:null}function w_(t,e,r,n){var i=__(e,n,r);if(i!=null){if(!(isFinite(i)&&Math.floor(i)===i)||i<0){var s=n?r:"highWaterMark";throw new m_(s,i)}return Math.floor(i)}return t.objectMode?16:16*1024}var Gf={getHighWaterMark:w_},S_=E_;function E_(t,e){if(Ro("noDeprecation"))return t;var r=!1;function n(){if(!r){if(Ro("throwDeprecation"))throw new Error(e);Ro("traceDeprecation")?console.trace(e):console.warn(e),r=!0}return t.apply(this,arguments)}return n}function Ro(t){try{if(!Q.localStorage)return!1}catch{return!1}var e=Q.localStorage[t];return e==null?!1:String(e).toLowerCase()==="true"}var To,yu;function Qf(){if(yu)return To;yu=1,To=D;function t(m){var _=this;this.next=null,this.entry=null,this.finish=function(){U(_,m)}}var e;D.WritableState=F;var r={deprecate:S_},n=Vf,i=Ei.Buffer,s=Q.Uint8Array||function(){};function o(m){return i.from(m)}function a(m){return i.isBuffer(m)||m instanceof s}var c=zf,u=Gf,l=u.getHighWaterMark,g=ir.codes,f=g.ERR_INVALID_ARG_TYPE,p=g.ERR_METHOD_NOT_IMPLEMENTED,y=g.ERR_MULTIPLE_CALLBACK,E=g.ERR_STREAM_CANNOT_PIPE,k=g.ERR_STREAM_DESTROYED,b=g.ERR_STREAM_NULL_VALUES,v=g.ERR_STREAM_WRITE_AFTER_END,w=g.ERR_UNKNOWN_ENCODING,A=c.errorOrDestroy;Ke.exports(D,n);function N(){}function F(m,_,x){e=e||Rr(),m=m||{},typeof x!="boolean"&&(x=_ instanceof e),this.objectMode=!!m.objectMode,x&&(this.objectMode=this.objectMode||!!m.writableObjectMode),this.highWaterMark=l(this,m,"writableHighWaterMark",x),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var O=m.decodeStrings===!1;this.decodeStrings=!O,this.defaultEncoding=m.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(j){he(_,j)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=m.emitClose!==!1,this.autoDestroy=!!m.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new t(this)}F.prototype.getBuffer=function(){for(var _=this.bufferedRequest,x=[];_;)x.push(_),_=_.next;return x},function(){try{Object.defineProperty(F.prototype,"buffer",{get:r.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var $;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?($=Function.prototype[Symbol.hasInstance],Object.defineProperty(D,Symbol.hasInstance,{value:function(_){return $.call(this,_)?!0:this!==D?!1:_&&_._writableState instanceof F}})):$=function(_){return _ instanceof this};function D(m){e=e||Rr();var _=this instanceof e;if(!_&&!$.call(D,this))return new D(m);this._writableState=new F(m,this,_),this.writable=!0,m&&(typeof m.write=="function"&&(this._write=m.write),typeof m.writev=="function"&&(this._writev=m.writev),typeof m.destroy=="function"&&(this._destroy=m.destroy),typeof m.final=="function"&&(this._final=m.final)),n.call(this)}D.prototype.pipe=function(){A(this,new E)};function P(m,_){var x=new v;A(m,x),process.nextTick(_,x)}function ie(m,_,x,O){var j;return x===null?j=new b:typeof x!="string"&&!_.objectMode&&(j=new f("chunk",["string","Buffer"],x)),j?(A(m,j),process.nextTick(O,j),!1):!0}D.prototype.write=function(m,_,x){var O=this._writableState,j=!1,h=!O.objectMode&&a(m);return h&&!i.isBuffer(m)&&(m=o(m)),typeof _=="function"&&(x=_,_=null),h?_="buffer":_||(_=O.defaultEncoding),typeof x!="function"&&(x=N),O.ending?P(this,x):(h||ie(this,O,m,x))&&(O.pendingcb++,j=q(this,O,h,m,_,x)),j},D.prototype.cork=function(){this._writableState.corked++},D.prototype.uncork=function(){var m=this._writableState;m.corked&&(m.corked--,!m.writing&&!m.corked&&!m.bufferProcessing&&m.bufferedRequest&&ce(this,m))},D.prototype.setDefaultEncoding=function(_){if(typeof _=="string"&&(_=_.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((_+"").toLowerCase())>-1))throw new w(_);return this._writableState.defaultEncoding=_,this},Object.defineProperty(D.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function te(m,_,x){return!m.objectMode&&m.decodeStrings!==!1&&typeof _=="string"&&(_=i.from(_,x)),_}Object.defineProperty(D.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function q(m,_,x,O,j,h){if(!x){var d=te(_,O,j);O!==d&&(x=!0,j="buffer",O=d)}var I=_.objectMode?1:O.length;_.length+=I;var L=_.length<_.highWaterMark;if(L||(_.needDrain=!0),_.writing||_.corked){var oe=_.lastBufferedRequest;_.lastBufferedRequest={chunk:O,encoding:j,isBuf:x,callback:h,next:null},oe?oe.next=_.lastBufferedRequest:_.bufferedRequest=_.lastBufferedRequest,_.bufferedRequestCount+=1}else Z(m,_,!1,I,O,j,h);return L}function Z(m,_,x,O,j,h,d){_.writelen=O,_.writecb=d,_.writing=!0,_.sync=!0,_.destroyed?_.onwrite(new k("write")):x?m._writev(j,_.onwrite):m._write(j,h,_.onwrite),_.sync=!1}function X(m,_,x,O,j){--_.pendingcb,x?(process.nextTick(j,O),process.nextTick(C,m,_),m._writableState.errorEmitted=!0,A(m,O)):(j(O),m._writableState.errorEmitted=!0,A(m,O),C(m,_))}function ne(m){m.writing=!1,m.writecb=null,m.length-=m.writelen,m.writelen=0}function he(m,_){var x=m._writableState,O=x.sync,j=x.writecb;if(typeof j!="function")throw new y;if(ne(x),_)X(m,x,O,_,j);else{var h=Ie(x)||m.destroyed;!h&&!x.corked&&!x.bufferProcessing&&x.bufferedRequest&&ce(m,x),O?process.nextTick(we,m,x,h,j):we(m,x,h,j)}}function we(m,_,x,O){x||me(m,_),_.pendingcb--,O(),C(m,_)}function me(m,_){_.length===0&&_.needDrain&&(_.needDrain=!1,m.emit("drain"))}function ce(m,_){_.bufferProcessing=!0;var x=_.bufferedRequest;if(m._writev&&x&&x.next){var O=_.bufferedRequestCount,j=new Array(O),h=_.corkedRequestsFree;h.entry=x;for(var d=0,I=!0;x;)j[d]=x,x.isBuf||(I=!1),x=x.next,d+=1;j.allBuffers=I,Z(m,_,!0,_.length,j,"",h.finish),_.pendingcb++,_.lastBufferedRequest=null,h.next?(_.corkedRequestsFree=h.next,h.next=null):_.corkedRequestsFree=new t(_),_.bufferedRequestCount=0}else{for(;x;){var L=x.chunk,oe=x.encoding,G=x.callback,se=_.objectMode?1:L.length;if(Z(m,_,!1,se,L,oe,G),x=x.next,_.bufferedRequestCount--,_.writing)break}x===null&&(_.lastBufferedRequest=null)}_.bufferedRequest=x,_.bufferProcessing=!1}D.prototype._write=function(m,_,x){x(new p("_write()"))},D.prototype._writev=null,D.prototype.end=function(m,_,x){var O=this._writableState;return typeof m=="function"?(x=m,m=null,_=null):typeof _=="function"&&(x=_,_=null),m!=null&&this.write(m,_),O.corked&&(O.corked=1,this.uncork()),O.ending||T(this,O,x),this},Object.defineProperty(D.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function Ie(m){return m.ending&&m.length===0&&m.bufferedRequest===null&&!m.finished&&!m.writing}function Fe(m,_){m._final(function(x){_.pendingcb--,x&&A(m,x),_.prefinished=!0,m.emit("prefinish"),C(m,_)})}function S(m,_){!_.prefinished&&!_.finalCalled&&(typeof m._final=="function"&&!_.destroyed?(_.pendingcb++,_.finalCalled=!0,process.nextTick(Fe,m,_)):(_.prefinished=!0,m.emit("prefinish")))}function C(m,_){var x=Ie(_);if(x&&(S(m,_),_.pendingcb===0&&(_.finished=!0,m.emit("finish"),_.autoDestroy))){var O=m._readableState;(!O||O.autoDestroy&&O.endEmitted)&&m.destroy()}return x}function T(m,_,x){_.ending=!0,C(m,_),x&&(_.finished?process.nextTick(x):m.once("finish",x)),_.ended=!0,m.writable=!1}function U(m,_,x){var O=m.entry;for(m.entry=null;O;){var j=O.callback;_.pendingcb--,j(x),O=O.next}_.corkedRequestsFree.next=m}return Object.defineProperty(D.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(_){!this._writableState||(this._writableState.destroyed=_)}}),D.prototype.destroy=c.destroy,D.prototype._undestroy=c.undestroy,D.prototype._destroy=function(m,_){_(m)},To}var Oo,vu;function Rr(){if(vu)return Oo;vu=1;var t=Object.keys||function(u){var l=[];for(var g in u)l.push(g);return l};Oo=o;var e=Yf(),r=Qf();Ke.exports(o,e);for(var n=t(r.prototype),i=0;i<n.length;i++){var s=n[i];o.prototype[s]||(o.prototype[s]=r.prototype[s])}function o(u){if(!(this instanceof o))return new o(u);e.call(this,u),r.call(this,u),this.allowHalfOpen=!0,u&&(u.readable===!1&&(this.readable=!1),u.writable===!1&&(this.writable=!1),u.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",a)))}Object.defineProperty(o.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(o.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(o.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function a(){this._writableState.ended||process.nextTick(c,this)}function c(u){u.end()}return Object.defineProperty(o.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(l){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=l,this._writableState.destroyed=l)}}),Oo}var No={},mu;function _u(){if(mu)return No;mu=1;var t=pt.exports.Buffer,e=t.isEncoding||function(b){switch(b=""+b,b&&b.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function r(b){if(!b)return"utf8";for(var v;;)switch(b){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return b;default:if(v)return;b=(""+b).toLowerCase(),v=!0}}function n(b){var v=r(b);if(typeof v!="string"&&(t.isEncoding===e||!e(b)))throw new Error("Unknown encoding: "+b);return v||b}No.StringDecoder=i;function i(b){this.encoding=n(b);var v;switch(this.encoding){case"utf16le":this.text=g,this.end=f,v=4;break;case"utf8":this.fillLast=c,v=4;break;case"base64":this.text=p,this.end=y,v=3;break;default:this.write=E,this.end=k;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=t.allocUnsafe(v)}i.prototype.write=function(b){if(b.length===0)return"";var v,w;if(this.lastNeed){if(v=this.fillLast(b),v===void 0)return"";w=this.lastNeed,this.lastNeed=0}else w=0;return w<b.length?v?v+this.text(b,w):this.text(b,w):v||""},i.prototype.end=l,i.prototype.text=u,i.prototype.fillLast=function(b){if(this.lastNeed<=b.length)return b.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);b.copy(this.lastChar,this.lastTotal-this.lastNeed,0,b.length),this.lastNeed-=b.length};function s(b){return b<=127?0:b>>5===6?2:b>>4===14?3:b>>3===30?4:b>>6===2?-1:-2}function o(b,v,w){var A=v.length-1;if(A<w)return 0;var N=s(v[A]);return N>=0?(N>0&&(b.lastNeed=N-1),N):--A<w||N===-2?0:(N=s(v[A]),N>=0?(N>0&&(b.lastNeed=N-2),N):--A<w||N===-2?0:(N=s(v[A]),N>=0?(N>0&&(N===2?N=0:b.lastNeed=N-3),N):0))}function a(b,v,w){if((v[0]&192)!==128)return b.lastNeed=0,"\uFFFD";if(b.lastNeed>1&&v.length>1){if((v[1]&192)!==128)return b.lastNeed=1,"\uFFFD";if(b.lastNeed>2&&v.length>2&&(v[2]&192)!==128)return b.lastNeed=2,"\uFFFD"}}function c(b){var v=this.lastTotal-this.lastNeed,w=a(this,b);if(w!==void 0)return w;if(this.lastNeed<=b.length)return b.copy(this.lastChar,v,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);b.copy(this.lastChar,v,0,b.length),this.lastNeed-=b.length}function u(b,v){var w=o(this,b,v);if(!this.lastNeed)return b.toString("utf8",v);this.lastTotal=w;var A=b.length-(w-this.lastNeed);return b.copy(this.lastChar,0,A),b.toString("utf8",v,A)}function l(b){var v=b&&b.length?this.write(b):"";return this.lastNeed?v+"\uFFFD":v}function g(b,v){if((b.length-v)%2===0){var w=b.toString("utf16le",v);if(w){var A=w.charCodeAt(w.length-1);if(A>=55296&&A<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=b[b.length-2],this.lastChar[1]=b[b.length-1],w.slice(0,-1)}return w}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=b[b.length-1],b.toString("utf16le",v,b.length-1)}function f(b){var v=b&&b.length?this.write(b):"";if(this.lastNeed){var w=this.lastTotal-this.lastNeed;return v+this.lastChar.toString("utf16le",0,w)}return v}function p(b,v){var w=(b.length-v)%3;return w===0?b.toString("base64",v):(this.lastNeed=3-w,this.lastTotal=3,w===1?this.lastChar[0]=b[b.length-1]:(this.lastChar[0]=b[b.length-2],this.lastChar[1]=b[b.length-1]),b.toString("base64",v,b.length-w))}function y(b){var v=b&&b.length?this.write(b):"";return this.lastNeed?v+this.lastChar.toString("base64",0,3-this.lastNeed):v}function E(b){return b.toString(this.encoding)}function k(b){return b&&b.length?this.write(b):""}return No}var wu=ir.codes.ERR_STREAM_PREMATURE_CLOSE;function x_(t){var e=!1;return function(){if(!e){e=!0;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];t.apply(this,n)}}}function C_(){}function k_(t){return t.setHeader&&typeof t.abort=="function"}function Zf(t,e,r){if(typeof e=="function")return Zf(t,null,e);e||(e={}),r=x_(r||C_);var n=e.readable||e.readable!==!1&&t.readable,i=e.writable||e.writable!==!1&&t.writable,s=function(){t.writable||a()},o=t._writableState&&t._writableState.finished,a=function(){i=!1,o=!0,n||r.call(t)},c=t._readableState&&t._readableState.endEmitted,u=function(){n=!1,c=!0,i||r.call(t)},l=function(y){r.call(t,y)},g=function(){var y;if(n&&!c)return(!t._readableState||!t._readableState.ended)&&(y=new wu),r.call(t,y);if(i&&!o)return(!t._writableState||!t._writableState.ended)&&(y=new wu),r.call(t,y)},f=function(){t.req.on("finish",a)};return k_(t)?(t.on("complete",a),t.on("abort",g),t.req?f():t.on("request",f)):i&&!t._writableState&&(t.on("end",s),t.on("close",s)),t.on("end",u),t.on("finish",a),e.error!==!1&&t.on("error",l),t.on("close",g),function(){t.removeListener("complete",a),t.removeListener("abort",g),t.removeListener("request",f),t.req&&t.req.removeListener("finish",a),t.removeListener("end",s),t.removeListener("close",s),t.removeListener("finish",a),t.removeListener("end",u),t.removeListener("error",l),t.removeListener("close",g)}}var rc=Zf,Lo,Su;function A_(){if(Su)return Lo;Su=1;var t;function e(b,v,w){return v in b?Object.defineProperty(b,v,{value:w,enumerable:!0,configurable:!0,writable:!0}):b[v]=w,b}var r=rc,n=Symbol("lastResolve"),i=Symbol("lastReject"),s=Symbol("error"),o=Symbol("ended"),a=Symbol("lastPromise"),c=Symbol("handlePromise"),u=Symbol("stream");function l(b,v){return{value:b,done:v}}function g(b){var v=b[n];if(v!==null){var w=b[u].read();w!==null&&(b[a]=null,b[n]=null,b[i]=null,v(l(w,!1)))}}function f(b){process.nextTick(g,b)}function p(b,v){return function(w,A){b.then(function(){if(v[o]){w(l(void 0,!0));return}v[c](w,A)},A)}}var y=Object.getPrototypeOf(function(){}),E=Object.setPrototypeOf((t={get stream(){return this[u]},next:function(){var v=this,w=this[s];if(w!==null)return Promise.reject(w);if(this[o])return Promise.resolve(l(void 0,!0));if(this[u].destroyed)return new Promise(function($,D){process.nextTick(function(){v[s]?D(v[s]):$(l(void 0,!0))})});var A=this[a],N;if(A)N=new Promise(p(A,this));else{var F=this[u].read();if(F!==null)return Promise.resolve(l(F,!1));N=new Promise(this[c])}return this[a]=N,N}},e(t,Symbol.asyncIterator,function(){return this}),e(t,"return",function(){var v=this;return new Promise(function(w,A){v[u].destroy(null,function(N){if(N){A(N);return}w(l(void 0,!0))})})}),t),y),k=function(v){var w,A=Object.create(E,(w={},e(w,u,{value:v,writable:!0}),e(w,n,{value:null,writable:!0}),e(w,i,{value:null,writable:!0}),e(w,s,{value:null,writable:!0}),e(w,o,{value:v._readableState.endEmitted,writable:!0}),e(w,c,{value:function(F,$){var D=A[u].read();D?(A[a]=null,A[n]=null,A[i]=null,F(l(D,!1))):(A[n]=F,A[i]=$)},writable:!0}),w));return A[a]=null,r(v,function(N){if(N&&N.code!=="ERR_STREAM_PREMATURE_CLOSE"){var F=A[i];F!==null&&(A[a]=null,A[n]=null,A[i]=null,F(N)),A[s]=N;return}var $=A[n];$!==null&&(A[a]=null,A[n]=null,A[i]=null,$(l(void 0,!0))),A[o]=!0}),v.on("readable",f.bind(null,A)),A};return Lo=k,Lo}var Po,Eu;function M_(){return Eu||(Eu=1,Po=function(){throw new Error("Readable.from is not available in the browser")}),Po}var Do,xu;function Yf(){if(xu)return Do;xu=1,Do=P;var t;P.ReadableState=D,Si.exports.EventEmitter;var e=function(d,I){return d.listeners(I).length},r=Vf,n=Ei.Buffer,i=Q.Uint8Array||function(){};function s(h){return n.from(h)}function o(h){return n.isBuffer(h)||h instanceof i}var a=Na,c;a&&a.debuglog?c=a.debuglog("stream"):c=function(){};var u=f_(),l=zf,g=Gf,f=g.getHighWaterMark,p=ir.codes,y=p.ERR_INVALID_ARG_TYPE,E=p.ERR_STREAM_PUSH_AFTER_EOF,k=p.ERR_METHOD_NOT_IMPLEMENTED,b=p.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,v,w,A;Ke.exports(P,r);var N=l.errorOrDestroy,F=["error","close","destroy","pause","resume"];function $(h,d,I){if(typeof h.prependListener=="function")return h.prependListener(d,I);!h._events||!h._events[d]?h.on(d,I):Array.isArray(h._events[d])?h._events[d].unshift(I):h._events[d]=[I,h._events[d]]}function D(h,d,I){t=t||Rr(),h=h||{},typeof I!="boolean"&&(I=d instanceof t),this.objectMode=!!h.objectMode,I&&(this.objectMode=this.objectMode||!!h.readableObjectMode),this.highWaterMark=f(this,h,"readableHighWaterMark",I),this.buffer=new u,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=h.emitClose!==!1,this.autoDestroy=!!h.autoDestroy,this.destroyed=!1,this.defaultEncoding=h.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,h.encoding&&(v||(v=_u().StringDecoder),this.decoder=new v(h.encoding),this.encoding=h.encoding)}function P(h){if(t=t||Rr(),!(this instanceof P))return new P(h);var d=this instanceof t;this._readableState=new D(h,this,d),this.readable=!0,h&&(typeof h.read=="function"&&(this._read=h.read),typeof h.destroy=="function"&&(this._destroy=h.destroy)),r.call(this)}Object.defineProperty(P.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(d){!this._readableState||(this._readableState.destroyed=d)}}),P.prototype.destroy=l.destroy,P.prototype._undestroy=l.undestroy,P.prototype._destroy=function(h,d){d(h)},P.prototype.push=function(h,d){var I=this._readableState,L;return I.objectMode?L=!0:typeof h=="string"&&(d=d||I.defaultEncoding,d!==I.encoding&&(h=n.from(h,d),d=""),L=!0),ie(this,h,d,!1,L)},P.prototype.unshift=function(h){return ie(this,h,null,!0,!1)};function ie(h,d,I,L,oe){c("readableAddChunk",d);var G=h._readableState;if(d===null)G.reading=!1,he(h,G);else{var se;if(oe||(se=q(G,d)),se)N(h,se);else if(G.objectMode||d&&d.length>0)if(typeof d!="string"&&!G.objectMode&&Object.getPrototypeOf(d)!==n.prototype&&(d=s(d)),L)G.endEmitted?N(h,new b):te(h,G,d,!0);else if(G.ended)N(h,new E);else{if(G.destroyed)return!1;G.reading=!1,G.decoder&&!I?(d=G.decoder.write(d),G.objectMode||d.length!==0?te(h,G,d,!1):ce(h,G)):te(h,G,d,!1)}else L||(G.reading=!1,ce(h,G))}return!G.ended&&(G.length<G.highWaterMark||G.length===0)}function te(h,d,I,L){d.flowing&&d.length===0&&!d.sync?(d.awaitDrain=0,h.emit("data",I)):(d.length+=d.objectMode?1:I.length,L?d.buffer.unshift(I):d.buffer.push(I),d.needReadable&&we(h)),ce(h,d)}function q(h,d){var I;return!o(d)&&typeof d!="string"&&d!==void 0&&!h.objectMode&&(I=new y("chunk",["string","Buffer","Uint8Array"],d)),I}P.prototype.isPaused=function(){return this._readableState.flowing===!1},P.prototype.setEncoding=function(h){v||(v=_u().StringDecoder);var d=new v(h);this._readableState.decoder=d,this._readableState.encoding=this._readableState.decoder.encoding;for(var I=this._readableState.buffer.head,L="";I!==null;)L+=d.write(I.data),I=I.next;return this._readableState.buffer.clear(),L!==""&&this._readableState.buffer.push(L),this._readableState.length=L.length,this};var Z=1073741824;function X(h){return h>=Z?h=Z:(h--,h|=h>>>1,h|=h>>>2,h|=h>>>4,h|=h>>>8,h|=h>>>16,h++),h}function ne(h,d){return h<=0||d.length===0&&d.ended?0:d.objectMode?1:h!==h?d.flowing&&d.length?d.buffer.head.data.length:d.length:(h>d.highWaterMark&&(d.highWaterMark=X(h)),h<=d.length?h:d.ended?d.length:(d.needReadable=!0,0))}P.prototype.read=function(h){c("read",h),h=parseInt(h,10);var d=this._readableState,I=h;if(h!==0&&(d.emittedReadable=!1),h===0&&d.needReadable&&((d.highWaterMark!==0?d.length>=d.highWaterMark:d.length>0)||d.ended))return c("read: emitReadable",d.length,d.ended),d.length===0&&d.ended?x(this):we(this),null;if(h=ne(h,d),h===0&&d.ended)return d.length===0&&x(this),null;var L=d.needReadable;c("need readable",L),(d.length===0||d.length-h<d.highWaterMark)&&(L=!0,c("length less than watermark",L)),d.ended||d.reading?(L=!1,c("reading or ended",L)):L&&(c("do read"),d.reading=!0,d.sync=!0,d.length===0&&(d.needReadable=!0),this._read(d.highWaterMark),d.sync=!1,d.reading||(h=ne(I,d)));var oe;return h>0?oe=_(h,d):oe=null,oe===null?(d.needReadable=d.length<=d.highWaterMark,h=0):(d.length-=h,d.awaitDrain=0),d.length===0&&(d.ended||(d.needReadable=!0),I!==h&&d.ended&&x(this)),oe!==null&&this.emit("data",oe),oe};function he(h,d){if(c("onEofChunk"),!d.ended){if(d.decoder){var I=d.decoder.end();I&&I.length&&(d.buffer.push(I),d.length+=d.objectMode?1:I.length)}d.ended=!0,d.sync?we(h):(d.needReadable=!1,d.emittedReadable||(d.emittedReadable=!0,me(h)))}}function we(h){var d=h._readableState;c("emitReadable",d.needReadable,d.emittedReadable),d.needReadable=!1,d.emittedReadable||(c("emitReadable",d.flowing),d.emittedReadable=!0,process.nextTick(me,h))}function me(h){var d=h._readableState;c("emitReadable_",d.destroyed,d.length,d.ended),!d.destroyed&&(d.length||d.ended)&&(h.emit("readable"),d.emittedReadable=!1),d.needReadable=!d.flowing&&!d.ended&&d.length<=d.highWaterMark,m(h)}function ce(h,d){d.readingMore||(d.readingMore=!0,process.nextTick(Ie,h,d))}function Ie(h,d){for(;!d.reading&&!d.ended&&(d.length<d.highWaterMark||d.flowing&&d.length===0);){var I=d.length;if(c("maybeReadMore read 0"),h.read(0),I===d.length)break}d.readingMore=!1}P.prototype._read=function(h){N(this,new k("_read()"))},P.prototype.pipe=function(h,d){var I=this,L=this._readableState;switch(L.pipesCount){case 0:L.pipes=h;break;case 1:L.pipes=[L.pipes,h];break;default:L.pipes.push(h);break}L.pipesCount+=1,c("pipe count=%d opts=%j",L.pipesCount,d);var oe=(!d||d.end!==!1)&&h!==process.stdout&&h!==process.stderr,G=oe?et:xt;L.endEmitted?process.nextTick(G):I.once("end",G),h.on("unpipe",se);function se(gt,st){c("onunpipe"),gt===I&&st&&st.hasUnpiped===!1&&(st.hasUnpiped=!0,Gr())}function et(){c("onend"),h.end()}var M=Fe(I);h.on("drain",M);var Ht=!1;function Gr(){c("cleanup"),h.removeListener("close",ar),h.removeListener("finish",cr),h.removeListener("drain",M),h.removeListener("error",or),h.removeListener("unpipe",se),I.removeListener("end",et),I.removeListener("end",xt),I.removeListener("data",Qr),Ht=!0,L.awaitDrain&&(!h._writableState||h._writableState.needDrain)&&M()}I.on("data",Qr);function Qr(gt){c("ondata");var st=h.write(gt);c("dest.write",st),st===!1&&((L.pipesCount===1&&L.pipes===h||L.pipesCount>1&&j(L.pipes,h)!==-1)&&!Ht&&(c("false write response, pause",L.awaitDrain),L.awaitDrain++),I.pause())}function or(gt){c("onerror",gt),xt(),h.removeListener("error",or),e(h,"error")===0&&N(h,gt)}$(h,"error",or);function ar(){h.removeListener("finish",cr),xt()}h.once("close",ar);function cr(){c("onfinish"),h.removeListener("close",ar),xt()}h.once("finish",cr);function xt(){c("unpipe"),I.unpipe(h)}return h.emit("pipe",I),L.flowing||(c("pipe resume"),I.resume()),h};function Fe(h){return function(){var I=h._readableState;c("pipeOnDrain",I.awaitDrain),I.awaitDrain&&I.awaitDrain--,I.awaitDrain===0&&e(h,"data")&&(I.flowing=!0,m(h))}}P.prototype.unpipe=function(h){var d=this._readableState,I={hasUnpiped:!1};if(d.pipesCount===0)return this;if(d.pipesCount===1)return h&&h!==d.pipes?this:(h||(h=d.pipes),d.pipes=null,d.pipesCount=0,d.flowing=!1,h&&h.emit("unpipe",this,I),this);if(!h){var L=d.pipes,oe=d.pipesCount;d.pipes=null,d.pipesCount=0,d.flowing=!1;for(var G=0;G<oe;G++)L[G].emit("unpipe",this,{hasUnpiped:!1});return this}var se=j(d.pipes,h);return se===-1?this:(d.pipes.splice(se,1),d.pipesCount-=1,d.pipesCount===1&&(d.pipes=d.pipes[0]),h.emit("unpipe",this,I),this)},P.prototype.on=function(h,d){var I=r.prototype.on.call(this,h,d),L=this._readableState;return h==="data"?(L.readableListening=this.listenerCount("readable")>0,L.flowing!==!1&&this.resume()):h==="readable"&&!L.endEmitted&&!L.readableListening&&(L.readableListening=L.needReadable=!0,L.flowing=!1,L.emittedReadable=!1,c("on readable",L.length,L.reading),L.length?we(this):L.reading||process.nextTick(C,this)),I},P.prototype.addListener=P.prototype.on,P.prototype.removeListener=function(h,d){var I=r.prototype.removeListener.call(this,h,d);return h==="readable"&&process.nextTick(S,this),I},P.prototype.removeAllListeners=function(h){var d=r.prototype.removeAllListeners.apply(this,arguments);return(h==="readable"||h===void 0)&&process.nextTick(S,this),d};function S(h){var d=h._readableState;d.readableListening=h.listenerCount("readable")>0,d.resumeScheduled&&!d.paused?d.flowing=!0:h.listenerCount("data")>0&&h.resume()}function C(h){c("readable nexttick read 0"),h.read(0)}P.prototype.resume=function(){var h=this._readableState;return h.flowing||(c("resume"),h.flowing=!h.readableListening,T(this,h)),h.paused=!1,this};function T(h,d){d.resumeScheduled||(d.resumeScheduled=!0,process.nextTick(U,h,d))}function U(h,d){c("resume",d.reading),d.reading||h.read(0),d.resumeScheduled=!1,h.emit("resume"),m(h),d.flowing&&!d.reading&&h.read(0)}P.prototype.pause=function(){return c("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(c("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function m(h){var d=h._readableState;for(c("flow",d.flowing);d.flowing&&h.read()!==null;);}P.prototype.wrap=function(h){var d=this,I=this._readableState,L=!1;h.on("end",function(){if(c("wrapped end"),I.decoder&&!I.ended){var se=I.decoder.end();se&&se.length&&d.push(se)}d.push(null)}),h.on("data",function(se){if(c("wrapped data"),I.decoder&&(se=I.decoder.write(se)),!(I.objectMode&&se==null)&&!(!I.objectMode&&(!se||!se.length))){var et=d.push(se);et||(L=!0,h.pause())}});for(var oe in h)this[oe]===void 0&&typeof h[oe]=="function"&&(this[oe]=function(et){return function(){return h[et].apply(h,arguments)}}(oe));for(var G=0;G<F.length;G++)h.on(F[G],this.emit.bind(this,F[G]));return this._read=function(se){c("wrapped _read",se),L&&(L=!1,h.resume())},this},typeof Symbol=="function"&&(P.prototype[Symbol.asyncIterator]=function(){return w===void 0&&(w=A_()),w(this)}),Object.defineProperty(P.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(P.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(P.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(d){this._readableState&&(this._readableState.flowing=d)}}),P._fromList=_,Object.defineProperty(P.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function _(h,d){if(d.length===0)return null;var I;return d.objectMode?I=d.buffer.shift():!h||h>=d.length?(d.decoder?I=d.buffer.join(""):d.buffer.length===1?I=d.buffer.first():I=d.buffer.concat(d.length),d.buffer.clear()):I=d.buffer.consume(h,d.decoder),I}function x(h){var d=h._readableState;c("endReadable",d.endEmitted),d.endEmitted||(d.ended=!0,process.nextTick(O,d,h))}function O(h,d){if(c("endReadableNT",h.endEmitted,h.length),!h.endEmitted&&h.length===0&&(h.endEmitted=!0,d.readable=!1,d.emit("end"),h.autoDestroy)){var I=d._writableState;(!I||I.autoDestroy&&I.finished)&&d.destroy()}}typeof Symbol=="function"&&(P.from=function(h,d){return A===void 0&&(A=M_()),A(P,h,d)});function j(h,d){for(var I=0,L=h.length;I<L;I++)if(h[I]===d)return I;return-1}return Do}var Kf=St,Bi=ir.codes,I_=Bi.ERR_METHOD_NOT_IMPLEMENTED,R_=Bi.ERR_MULTIPLE_CALLBACK,T_=Bi.ERR_TRANSFORM_ALREADY_TRANSFORMING,O_=Bi.ERR_TRANSFORM_WITH_LENGTH_0,Fi=Rr();Ke.exports(St,Fi);function N_(t,e){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(n===null)return this.emit("error",new R_);r.writechunk=null,r.writecb=null,e!=null&&this.push(e),n(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function St(t){if(!(this instanceof St))return new St(t);Fi.call(this,t),this._transformState={afterTransform:N_.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",L_)}function L_(){var t=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(e,r){Cu(t,e,r)}):Cu(this,null,null)}St.prototype.push=function(t,e){return this._transformState.needTransform=!1,Fi.prototype.push.call(this,t,e)};St.prototype._transform=function(t,e,r){r(new I_("_transform()"))};St.prototype._write=function(t,e,r){var n=this._transformState;if(n.writecb=r,n.writechunk=t,n.writeencoding=e,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}};St.prototype._read=function(t){var e=this._transformState;e.writechunk!==null&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0};St.prototype._destroy=function(t,e){Fi.prototype._destroy.call(this,t,function(r){e(r)})};function Cu(t,e,r){if(e)return t.emit("error",e);if(r!=null&&t.push(r),t._writableState.length)throw new O_;if(t._transformState.transforming)throw new T_;return t.push(null)}var P_=gn,Jf=Kf;Ke.exports(gn,Jf);function gn(t){if(!(this instanceof gn))return new gn(t);Jf.call(this,t)}gn.prototype._transform=function(t,e,r){r(null,t)};var jo;function D_(t){var e=!1;return function(){e||(e=!0,t.apply(void 0,arguments))}}var Xf=ir.codes,j_=Xf.ERR_MISSING_ARGS,B_=Xf.ERR_STREAM_DESTROYED;function ku(t){if(t)throw t}function F_(t){return t.setHeader&&typeof t.abort=="function"}function $_(t,e,r,n){n=D_(n);var i=!1;t.on("close",function(){i=!0}),jo===void 0&&(jo=rc),jo(t,{readable:e,writable:r},function(o){if(o)return n(o);i=!0,n()});var s=!1;return function(o){if(!i&&!s){if(s=!0,F_(t))return t.abort();if(typeof t.destroy=="function")return t.destroy();n(o||new B_("pipe"))}}}function Au(t){t()}function W_(t,e){return t.pipe(e)}function U_(t){return!t.length||typeof t[t.length-1]!="function"?ku:t.pop()}function H_(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n=U_(e);if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new j_("streams");var i,s=e.map(function(o,a){var c=a<e.length-1,u=a>0;return $_(o,c,u,function(l){i||(i=l),l&&s.forEach(Au),!c&&(s.forEach(Au),n(i))})});return e.reduce(W_)}var V_=H_;(function(t,e){e=t.exports=Yf(),e.Stream=e,e.Readable=e,e.Writable=Qf(),e.Duplex=Rr(),e.Transform=Kf,e.PassThrough=P_,e.finished=rc,e.pipeline=V_})(pi,pi.exports);const{Transform:z_}=pi.exports;var q_=t=>class eh extends z_{constructor(r,n,i,s,o){super(o),this._rate=r,this._capacity=n,this._delimitedSuffix=i,this._hashBitLength=s,this._options=o,this._state=new t,this._state.initialize(r,n),this._finalized=!1}_transform(r,n,i){let s=null;try{this.update(r,n)}catch(o){s=o}i(s)}_flush(r){let n=null;try{this.push(this.digest())}catch(i){n=i}r(n)}update(r,n){if(!Buffer.isBuffer(r)&&typeof r!="string")throw new TypeError("Data must be a string or a buffer");if(this._finalized)throw new Error("Digest already called");return Buffer.isBuffer(r)||(r=Buffer.from(r,n)),this._state.absorb(r),this}digest(r){if(this._finalized)throw new Error("Digest already called");this._finalized=!0,this._delimitedSuffix&&this._state.absorbLastFewBits(this._delimitedSuffix);let n=this._state.squeeze(this._hashBitLength/8);return r!==void 0&&(n=n.toString(r)),this._resetState(),n}_resetState(){return this._state.initialize(this._rate,this._capacity),this}_clone(){const r=new eh(this._rate,this._capacity,this._delimitedSuffix,this._hashBitLength,this._options);return this._state.copy(r._state),r._finalized=this._finalized,r}};const{Transform:G_}=pi.exports;var Q_=t=>class th extends G_{constructor(r,n,i,s){super(s),this._rate=r,this._capacity=n,this._delimitedSuffix=i,this._options=s,this._state=new t,this._state.initialize(r,n),this._finalized=!1}_transform(r,n,i){let s=null;try{this.update(r,n)}catch(o){s=o}i(s)}_flush(){}_read(r){this.push(this.squeeze(r))}update(r,n){if(!Buffer.isBuffer(r)&&typeof r!="string")throw new TypeError("Data must be a string or a buffer");if(this._finalized)throw new Error("Squeeze already called");return Buffer.isBuffer(r)||(r=Buffer.from(r,n)),this._state.absorb(r),this}squeeze(r,n){this._finalized||(this._finalized=!0,this._state.absorbLastFewBits(this._delimitedSuffix));let i=this._state.squeeze(r);return n!==void 0&&(i=i.toString(n)),i}_resetState(){return this._state.initialize(this._rate,this._capacity),this}_clone(){const r=new th(this._rate,this._capacity,this._delimitedSuffix,this._options);return this._state.copy(r._state),r._finalized=this._finalized,r}};const Z_=q_,Y_=Q_;var K_=function(t){const e=Z_(t),r=Y_(t);return function(n,i){switch(typeof n=="string"?n.toLowerCase():n){case"keccak224":return new e(1152,448,null,224,i);case"keccak256":return new e(1088,512,null,256,i);case"keccak384":return new e(832,768,null,384,i);case"keccak512":return new e(576,1024,null,512,i);case"sha3-224":return new e(1152,448,6,224,i);case"sha3-256":return new e(1088,512,6,256,i);case"sha3-384":return new e(832,768,6,384,i);case"sha3-512":return new e(576,1024,6,512,i);case"shake128":return new r(1344,256,31,i);case"shake256":return new r(1088,512,31,i);default:throw new Error("Invald algorithm: "+n)}}},rh={};const Mu=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648];rh.p1600=function(t){for(let e=0;e<24;++e){const r=t[0]^t[10]^t[20]^t[30]^t[40],n=t[1]^t[11]^t[21]^t[31]^t[41],i=t[2]^t[12]^t[22]^t[32]^t[42],s=t[3]^t[13]^t[23]^t[33]^t[43],o=t[4]^t[14]^t[24]^t[34]^t[44],a=t[5]^t[15]^t[25]^t[35]^t[45],c=t[6]^t[16]^t[26]^t[36]^t[46],u=t[7]^t[17]^t[27]^t[37]^t[47],l=t[8]^t[18]^t[28]^t[38]^t[48],g=t[9]^t[19]^t[29]^t[39]^t[49];let f=l^(i<<1|s>>>31),p=g^(s<<1|i>>>31);const y=t[0]^f,E=t[1]^p,k=t[10]^f,b=t[11]^p,v=t[20]^f,w=t[21]^p,A=t[30]^f,N=t[31]^p,F=t[40]^f,$=t[41]^p;f=r^(o<<1|a>>>31),p=n^(a<<1|o>>>31);const D=t[2]^f,P=t[3]^p,ie=t[12]^f,te=t[13]^p,q=t[22]^f,Z=t[23]^p,X=t[32]^f,ne=t[33]^p,he=t[42]^f,we=t[43]^p;f=i^(c<<1|u>>>31),p=s^(u<<1|c>>>31);const me=t[4]^f,ce=t[5]^p,Ie=t[14]^f,Fe=t[15]^p,S=t[24]^f,C=t[25]^p,T=t[34]^f,U=t[35]^p,m=t[44]^f,_=t[45]^p;f=o^(l<<1|g>>>31),p=a^(g<<1|l>>>31);const x=t[6]^f,O=t[7]^p,j=t[16]^f,h=t[17]^p,d=t[26]^f,I=t[27]^p,L=t[36]^f,oe=t[37]^p,G=t[46]^f,se=t[47]^p;f=c^(r<<1|n>>>31),p=u^(n<<1|r>>>31);const et=t[8]^f,M=t[9]^p,Ht=t[18]^f,Gr=t[19]^p,Qr=t[28]^f,or=t[29]^p,ar=t[38]^f,cr=t[39]^p,xt=t[48]^f,gt=t[49]^p,st=y,Ss=E,Es=b<<4|k>>>28,xs=k<<4|b>>>28,Cs=v<<3|w>>>29,ks=w<<3|v>>>29,As=N<<9|A>>>23,Ms=A<<9|N>>>23,Is=F<<18|$>>>14,Rs=$<<18|F>>>14,Ts=D<<1|P>>>31,Os=P<<1|D>>>31,Ns=te<<12|ie>>>20,Ls=ie<<12|te>>>20,Ps=q<<10|Z>>>22,Ds=Z<<10|q>>>22,js=ne<<13|X>>>19,Bs=X<<13|ne>>>19,Fs=he<<2|we>>>30,$s=we<<2|he>>>30,Ws=ce<<30|me>>>2,Us=me<<30|ce>>>2,Hs=Ie<<6|Fe>>>26,Vs=Fe<<6|Ie>>>26,zs=C<<11|S>>>21,qs=S<<11|C>>>21,Gs=T<<15|U>>>17,Qs=U<<15|T>>>17,Zs=_<<29|m>>>3,Ys=m<<29|_>>>3,Ks=x<<28|O>>>4,Js=O<<28|x>>>4,Xs=h<<23|j>>>9,eo=j<<23|h>>>9,to=d<<25|I>>>7,ro=I<<25|d>>>7,no=L<<21|oe>>>11,io=oe<<21|L>>>11,so=se<<24|G>>>8,oo=G<<24|se>>>8,ao=et<<27|M>>>5,co=M<<27|et>>>5,uo=Ht<<20|Gr>>>12,lo=Gr<<20|Ht>>>12,fo=or<<7|Qr>>>25,ho=Qr<<7|or>>>25,po=ar<<8|cr>>>24,bo=cr<<8|ar>>>24,go=xt<<14|gt>>>18,yo=gt<<14|xt>>>18;t[0]=st^~Ns&zs,t[1]=Ss^~Ls&qs,t[10]=Ks^~uo&Cs,t[11]=Js^~lo&ks,t[20]=Ts^~Hs&to,t[21]=Os^~Vs&ro,t[30]=ao^~Es&Ps,t[31]=co^~xs&Ds,t[40]=Ws^~Xs&fo,t[41]=Us^~eo&ho,t[2]=Ns^~zs&no,t[3]=Ls^~qs&io,t[12]=uo^~Cs&js,t[13]=lo^~ks&Bs,t[22]=Hs^~to&po,t[23]=Vs^~ro&bo,t[32]=Es^~Ps&Gs,t[33]=xs^~Ds&Qs,t[42]=Xs^~fo&As,t[43]=eo^~ho&Ms,t[4]=zs^~no&go,t[5]=qs^~io&yo,t[14]=Cs^~js&Zs,t[15]=ks^~Bs&Ys,t[24]=to^~po&Is,t[25]=ro^~bo&Rs,t[34]=Ps^~Gs&so,t[35]=Ds^~Qs&oo,t[44]=fo^~As&Fs,t[45]=ho^~Ms&$s,t[6]=no^~go&st,t[7]=io^~yo&Ss,t[16]=js^~Zs&Ks,t[17]=Bs^~Ys&Js,t[26]=po^~Is&Ts,t[27]=bo^~Rs&Os,t[36]=Gs^~so&ao,t[37]=Qs^~oo&co,t[46]=As^~Fs&Ws,t[47]=Ms^~$s&Us,t[8]=go^~st&Ns,t[9]=yo^~Ss&Ls,t[18]=Zs^~Ks&uo,t[19]=Ys^~Js&lo,t[28]=Is^~Ts&Hs,t[29]=Rs^~Os&Vs,t[38]=so^~ao&Es,t[39]=oo^~co&xs,t[48]=Fs^~Ws&Xs,t[49]=$s^~Us&eo,t[0]^=Mu[e*2],t[1]^=Mu[e*2+1]}};const bi=rh;function zr(){this.state=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.blockSize=null,this.count=0,this.squeezing=!1}zr.prototype.initialize=function(t,e){for(let r=0;r<50;++r)this.state[r]=0;this.blockSize=t/8,this.count=0,this.squeezing=!1};zr.prototype.absorb=function(t){for(let e=0;e<t.length;++e)this.state[~~(this.count/4)]^=t[e]<<8*(this.count%4),this.count+=1,this.count===this.blockSize&&(bi.p1600(this.state),this.count=0)};zr.prototype.absorbLastFewBits=function(t){this.state[~~(this.count/4)]^=t<<8*(this.count%4),(t&128)!==0&&this.count===this.blockSize-1&&bi.p1600(this.state),this.state[~~((this.blockSize-1)/4)]^=128<<8*((this.blockSize-1)%4),bi.p1600(this.state),this.count=0,this.squeezing=!0};zr.prototype.squeeze=function(t){this.squeezing||this.absorbLastFewBits(1);const e=Buffer.alloc(t);for(let r=0;r<t;++r)e[r]=this.state[~~(this.count/4)]>>>8*(this.count%4)&255,this.count+=1,this.count===this.blockSize&&(bi.p1600(this.state),this.count=0);return e};zr.prototype.copy=function(t){for(let e=0;e<50;++e)t.state[e]=this.state[e];t.blockSize=this.blockSize,t.count=this.count,t.squeezing=this.squeezing};var J_=zr,X_=K_(J_);const ew=X_,tw=wi.exports;function nh(t){return Buffer.allocUnsafe(t).fill(0)}function ih(t,e,r){const n=nh(e);return t=$i(t),r?t.length<e?(t.copy(n),n):t.slice(0,e):t.length<e?(t.copy(n,e-t.length),n):t.slice(-e)}function rw(t,e){return ih(t,e,!0)}function $i(t){if(!Buffer.isBuffer(t))if(Array.isArray(t))t=Buffer.from(t);else if(typeof t=="string")sh(t)?t=Buffer.from(sw(oh(t)),"hex"):t=Buffer.from(t);else if(typeof t=="number")t=intToBuffer(t);else if(t==null)t=Buffer.allocUnsafe(0);else if(tw.isBN(t))t=t.toArrayLike(Buffer);else if(t.toArray)t=Buffer.from(t.toArray());else throw new Error("invalid type");return t}function nw(t){return t=$i(t),"0x"+t.toString("hex")}function iw(t,e){return t=$i(t),e||(e=256),ew("keccak"+e).update(t).digest()}function sw(t){return t.length%2?"0"+t:t}function sh(t){return typeof t=="string"&&t.match(/^0x[0-9A-Fa-f]*$/)}function oh(t){return typeof t=="string"&&t.startsWith("0x")?t.slice(2):t}var ah={zeros:nh,setLength:ih,setLengthRight:rw,isHexString:sh,stripHexPrefix:oh,toBuffer:$i,bufferToHex:nw,keccak:iw};const tr=ah,Yt=wi.exports;function ch(t){return t.startsWith("int[")?"int256"+t.slice(3):t==="int"?"int256":t.startsWith("uint[")?"uint256"+t.slice(4):t==="uint"?"uint256":t.startsWith("fixed[")?"fixed128x128"+t.slice(5):t==="fixed"?"fixed128x128":t.startsWith("ufixed[")?"ufixed128x128"+t.slice(6):t==="ufixed"?"ufixed128x128":t}function _r(t){return parseInt(/^\D+(\d+)$/.exec(t)[1],10)}function Iu(t){var e=/^\D+(\d+)x(\d+)$/.exec(t);return[parseInt(e[1],10),parseInt(e[2],10)]}function uh(t){var e=t.match(/(.*)\[(.*?)\]$/);return e?e[2]===""?"dynamic":parseInt(e[2],10):null}function Gt(t){var e=typeof t;if(e==="string")return tr.isHexString(t)?new Yt(tr.stripHexPrefix(t),16):new Yt(t,10);if(e==="number")return new Yt(t);if(t.toArray)return t;throw new Error("Argument is not a number")}function ut(t,e){var r,n,i,s;if(t==="address")return ut("uint160",Gt(e));if(t==="bool")return ut("uint8",e?1:0);if(t==="string")return ut("bytes",new Buffer(e,"utf8"));if(aw(t)){if(typeof e.length>"u")throw new Error("Not an array?");if(r=uh(t),r!=="dynamic"&&r!==0&&e.length>r)throw new Error("Elements exceed array size: "+r);i=[],t=t.slice(0,t.lastIndexOf("[")),typeof e=="string"&&(e=JSON.parse(e));for(s in e)i.push(ut(t,e[s]));if(r==="dynamic"){var o=ut("uint256",e.length);i.unshift(o)}return Buffer.concat(i)}else{if(t==="bytes")return e=new Buffer(e),i=Buffer.concat([ut("uint256",e.length),e]),e.length%32!==0&&(i=Buffer.concat([i,tr.zeros(32-e.length%32)])),i;if(t.startsWith("bytes")){if(r=_r(t),r<1||r>32)throw new Error("Invalid bytes<N> width: "+r);return tr.setLengthRight(e,32)}else if(t.startsWith("uint")){if(r=_r(t),r%8||r<8||r>256)throw new Error("Invalid uint<N> width: "+r);if(n=Gt(e),n.bitLength()>r)throw new Error("Supplied uint exceeds width: "+r+" vs "+n.bitLength());if(n<0)throw new Error("Supplied uint is negative");return n.toArrayLike(Buffer,"be",32)}else if(t.startsWith("int")){if(r=_r(t),r%8||r<8||r>256)throw new Error("Invalid int<N> width: "+r);if(n=Gt(e),n.bitLength()>r)throw new Error("Supplied int exceeds width: "+r+" vs "+n.bitLength());return n.toTwos(256).toArrayLike(Buffer,"be",32)}else if(t.startsWith("ufixed")){if(r=Iu(t),n=Gt(e),n<0)throw new Error("Supplied ufixed is negative");return ut("uint256",n.mul(new Yt(2).pow(new Yt(r[1]))))}else if(t.startsWith("fixed"))return r=Iu(t),ut("int256",Gt(e).mul(new Yt(2).pow(new Yt(r[1]))))}throw new Error("Unsupported or invalid type: "+t)}function ow(t){return t==="string"||t==="bytes"||uh(t)==="dynamic"}function aw(t){return t.lastIndexOf("]")===t.length-1}function cw(t,e){var r=[],n=[],i=32*t.length;for(var s in t){var o=ch(t[s]),a=e[s],c=ut(o,a);ow(o)?(r.push(ut("uint256",i)),n.push(c),i+=c.length):r.push(c)}return Buffer.concat(r.concat(n))}function lh(t,e){if(t.length!==e.length)throw new Error("Number of types are not matching the values");for(var r,n,i=[],s=0;s<t.length;s++){var o=ch(t[s]),a=e[s];if(o==="bytes")i.push(a);else if(o==="string")i.push(new Buffer(a,"utf8"));else if(o==="bool")i.push(new Buffer(a?"01":"00","hex"));else if(o==="address")i.push(tr.setLength(a,20));else if(o.startsWith("bytes")){if(r=_r(o),r<1||r>32)throw new Error("Invalid bytes<N> width: "+r);i.push(tr.setLengthRight(a,r))}else if(o.startsWith("uint")){if(r=_r(o),r%8||r<8||r>256)throw new Error("Invalid uint<N> width: "+r);if(n=Gt(a),n.bitLength()>r)throw new Error("Supplied uint exceeds width: "+r+" vs "+n.bitLength());i.push(n.toArrayLike(Buffer,"be",r/8))}else if(o.startsWith("int")){if(r=_r(o),r%8||r<8||r>256)throw new Error("Invalid int<N> width: "+r);if(n=Gt(a),n.bitLength()>r)throw new Error("Supplied int exceeds width: "+r+" vs "+n.bitLength());i.push(n.toTwos(r).toArrayLike(Buffer,"be",r/8))}else throw new Error("Unsupported or invalid type: "+o)}return Buffer.concat(i)}function uw(t,e){return tr.keccak(lh(t,e))}var lw={rawEncode:cw,solidityPack:lh,soliditySHA3:uw};const rt=ah,an=lw,fh={type:"object",properties:{types:{type:"object",additionalProperties:{type:"array",items:{type:"object",properties:{name:{type:"string"},type:{type:"string"}},required:["name","type"]}}},primaryType:{type:"string"},domain:{type:"object"},message:{type:"object"}},required:["types","primaryType","domain","message"]},Bo={encodeData(t,e,r,n=!0){const i=["bytes32"],s=[this.hashType(t,r)];if(n){const o=(a,c,u)=>{if(r[c]!==void 0)return["bytes32",u==null?"0x0000000000000000000000000000000000000000000000000000000000000000":rt.keccak(this.encodeData(c,u,r,n))];if(u===void 0)throw new Error(`missing value for field ${a} of type ${c}`);if(c==="bytes")return["bytes32",rt.keccak(u)];if(c==="string")return typeof u=="string"&&(u=Buffer.from(u,"utf8")),["bytes32",rt.keccak(u)];if(c.lastIndexOf("]")===c.length-1){const l=c.slice(0,c.lastIndexOf("[")),g=u.map(f=>o(a,l,f));return["bytes32",rt.keccak(an.rawEncode(g.map(([f])=>f),g.map(([,f])=>f)))]}return[c,u]};for(const a of r[t]){const[c,u]=o(a.name,a.type,e[a.name]);i.push(c),s.push(u)}}else for(const o of r[t]){let a=e[o.name];if(a!==void 0)if(o.type==="bytes")i.push("bytes32"),a=rt.keccak(a),s.push(a);else if(o.type==="string")i.push("bytes32"),typeof a=="string"&&(a=Buffer.from(a,"utf8")),a=rt.keccak(a),s.push(a);else if(r[o.type]!==void 0)i.push("bytes32"),a=rt.keccak(this.encodeData(o.type,a,r,n)),s.push(a);else{if(o.type.lastIndexOf("]")===o.type.length-1)throw new Error("Arrays currently unimplemented in encodeData");i.push(o.type),s.push(a)}}return an.rawEncode(i,s)},encodeType(t,e){let r="",n=this.findTypeDependencies(t,e).filter(i=>i!==t);n=[t].concat(n.sort());for(const i of n){if(!e[i])throw new Error("No type definition specified: "+i);r+=i+"("+e[i].map(({name:o,type:a})=>a+" "+o).join(",")+")"}return r},findTypeDependencies(t,e,r=[]){if(t=t.match(/^\w*/)[0],r.includes(t)||e[t]===void 0)return r;r.push(t);for(const n of e[t])for(const i of this.findTypeDependencies(n.type,e,r))!r.includes(i)&&r.push(i);return r},hashStruct(t,e,r,n=!0){return rt.keccak(this.encodeData(t,e,r,n))},hashType(t,e){return rt.keccak(this.encodeType(t,e))},sanitizeData(t){const e={};for(const r in fh.properties)t[r]&&(e[r]=t[r]);return e.types&&(e.types=Object.assign({EIP712Domain:[]},e.types)),e},hash(t,e=!0){const r=this.sanitizeData(t),n=[Buffer.from("1901","hex")];return n.push(this.hashStruct("EIP712Domain",r.domain,r.types,e)),r.primaryType!=="EIP712Domain"&&n.push(this.hashStruct(r.primaryType,r.message,r.types,e)),rt.keccak(Buffer.concat(n))}};var fw={TYPED_MESSAGE_SCHEMA:fh,TypedDataUtils:Bo,hashForSignTypedDataLegacy:function(t){return hw(t.data)},hashForSignTypedData_v3:function(t){return Bo.hash(t.data,!1)},hashForSignTypedData_v4:function(t){return Bo.hash(t.data)}};function hw(t){const e=new Error("Expect argument to be non-empty array");if(typeof t!="object"||!t.length)throw e;const r=t.map(function(s){return s.type==="bytes"?rt.toBuffer(s.value):s.value}),n=t.map(function(s){return s.type}),i=t.map(function(s){if(!s.name)throw e;return s.type+" "+s.name});return an.soliditySHA3(["bytes32","bytes32"],[an.soliditySHA3(new Array(t.length).fill("string"),i),an.soliditySHA3(n,r)])}var Tr={};Object.defineProperty(Tr,"__esModule",{value:!0});Tr.filterFromParam=Tr.FilterPolyfill=void 0;const dr=In,De=B,dw=5*60*1e3,Qt={jsonrpc:"2.0",id:0};class pw{constructor(e){this.logFilters=new Map,this.blockFilters=new Set,this.pendingTransactionFilters=new Set,this.cursors=new Map,this.timeouts=new Map,this.nextFilterId=(0,dr.IntNumber)(1),this.provider=e}async newFilter(e){const r=hh(e),n=this.makeFilterId(),i=await this.setInitialCursorPosition(n,r.fromBlock);return console.log(`Installing new log filter(${n}):`,r,"initial cursor position:",i),this.logFilters.set(n,r),this.setFilterTimeout(n),(0,De.hexStringFromIntNumber)(n)}async newBlockFilter(){const e=this.makeFilterId(),r=await this.setInitialCursorPosition(e,"latest");return console.log(`Installing new block filter (${e}) with initial cursor position:`,r),this.blockFilters.add(e),this.setFilterTimeout(e),(0,De.hexStringFromIntNumber)(e)}async newPendingTransactionFilter(){const e=this.makeFilterId(),r=await this.setInitialCursorPosition(e,"latest");return console.log(`Installing new block filter (${e}) with initial cursor position:`,r),this.pendingTransactionFilters.add(e),this.setFilterTimeout(e),(0,De.hexStringFromIntNumber)(e)}uninstallFilter(e){const r=(0,De.intNumberFromHexString)(e);return console.log(`Uninstalling filter (${r})`),this.deleteFilter(r),!0}getFilterChanges(e){const r=(0,De.intNumberFromHexString)(e);return this.timeouts.has(r)&&this.setFilterTimeout(r),this.logFilters.has(r)?this.getLogFilterChanges(r):this.blockFilters.has(r)?this.getBlockFilterChanges(r):this.pendingTransactionFilters.has(r)?this.getPendingTransactionFilterChanges(r):Promise.resolve(Hn())}async getFilterLogs(e){const r=(0,De.intNumberFromHexString)(e),n=this.logFilters.get(r);return n?this.sendAsyncPromise(Object.assign(Object.assign({},Qt),{method:"eth_getLogs",params:[Ru(n)]})):Hn()}makeFilterId(){return(0,dr.IntNumber)(++this.nextFilterId)}sendAsyncPromise(e){return new Promise((r,n)=>{this.provider.sendAsync(e,(i,s)=>{if(i)return n(i);if(Array.isArray(s)||s==null)return n(new Error(`unexpected response received: ${JSON.stringify(s)}`));r(s)})})}deleteFilter(e){console.log(`Deleting filter (${e})`),this.logFilters.delete(e),this.blockFilters.delete(e),this.pendingTransactionFilters.delete(e),this.cursors.delete(e),this.timeouts.delete(e)}async getLogFilterChanges(e){const r=this.logFilters.get(e),n=this.cursors.get(e);if(!n||!r)return Hn();const i=await this.getCurrentBlockHeight(),s=r.toBlock==="latest"?i:r.toBlock;if(n>i||n>r.toBlock)return Vn();console.log(`Fetching logs from ${n} to ${s} for filter ${e}`);const o=await this.sendAsyncPromise(Object.assign(Object.assign({},Qt),{method:"eth_getLogs",params:[Ru(Object.assign(Object.assign({},r),{fromBlock:n,toBlock:s}))]}));if(Array.isArray(o.result)){const a=o.result.map(u=>(0,De.intNumberFromHexString)(u.blockNumber||"0x0")),c=Math.max(...a);if(c&&c>n){const u=(0,dr.IntNumber)(c+1);console.log(`Moving cursor position for filter (${e}) from ${n} to ${u}`),this.cursors.set(e,u)}}return o}async getBlockFilterChanges(e){const r=this.cursors.get(e);if(!r)return Hn();const n=await this.getCurrentBlockHeight();if(r>n)return Vn();console.log(`Fetching blocks from ${r} to ${n} for filter (${e})`);const i=(await Promise.all((0,De.range)(r,n+1).map(o=>this.getBlockHashByNumber((0,dr.IntNumber)(o))))).filter(o=>!!o),s=(0,dr.IntNumber)(r+i.length);return console.log(`Moving cursor position for filter (${e}) from ${r} to ${s}`),this.cursors.set(e,s),Object.assign(Object.assign({},Qt),{result:i})}async getPendingTransactionFilterChanges(e){return Promise.resolve(Vn())}async setInitialCursorPosition(e,r){const n=await this.getCurrentBlockHeight(),i=typeof r=="number"&&r>n?r:n;return this.cursors.set(e,i),i}setFilterTimeout(e){const r=this.timeouts.get(e);r&&window.clearTimeout(r);const n=window.setTimeout(()=>{console.log(`Filter (${e}) timed out`),this.deleteFilter(e)},dw);this.timeouts.set(e,n)}async getCurrentBlockHeight(){const{result:e}=await this.sendAsyncPromise(Object.assign(Object.assign({},Qt),{method:"eth_blockNumber",params:[]}));return(0,De.intNumberFromHexString)((0,De.ensureHexString)(e))}async getBlockHashByNumber(e){const r=await this.sendAsyncPromise(Object.assign(Object.assign({},Qt),{method:"eth_getBlockByNumber",params:[(0,De.hexStringFromIntNumber)(e),!1]}));return r.result&&typeof r.result.hash=="string"?(0,De.ensureHexString)(r.result.hash):null}}Tr.FilterPolyfill=pw;function hh(t){return{fromBlock:Tu(t.fromBlock),toBlock:Tu(t.toBlock),addresses:t.address===void 0?null:Array.isArray(t.address)?t.address:[t.address],topics:t.topics||[]}}Tr.filterFromParam=hh;function Ru(t){const e={fromBlock:Ou(t.fromBlock),toBlock:Ou(t.toBlock),topics:t.topics};return t.addresses!==null&&(e.address=t.addresses),e}function Tu(t){if(t===void 0||t==="latest"||t==="pending")return"latest";if(t==="earliest")return(0,dr.IntNumber)(0);if((0,De.isHexString)(t))return(0,De.intNumberFromHexString)(t);throw new Error(`Invalid block option: ${String(t)}`)}function Ou(t){return t==="latest"?t:(0,De.hexStringFromIntNumber)(t)}function Hn(){return Object.assign(Object.assign({},Qt),{error:{code:-32e3,message:"filter not found"}})}function Vn(){return Object.assign(Object.assign({},Qt),{result:[]})}var dh={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.JSONRPCMethod=void 0,function(e){e.eth_accounts="eth_accounts",e.eth_coinbase="eth_coinbase",e.net_version="net_version",e.eth_chainId="eth_chainId",e.eth_uninstallFilter="eth_uninstallFilter",e.eth_requestAccounts="eth_requestAccounts",e.eth_sign="eth_sign",e.eth_ecRecover="eth_ecRecover",e.personal_sign="personal_sign",e.personal_ecRecover="personal_ecRecover",e.eth_signTransaction="eth_signTransaction",e.eth_sendRawTransaction="eth_sendRawTransaction",e.eth_sendTransaction="eth_sendTransaction",e.eth_signTypedData_v1="eth_signTypedData_v1",e.eth_signTypedData_v2="eth_signTypedData_v2",e.eth_signTypedData_v3="eth_signTypedData_v3",e.eth_signTypedData_v4="eth_signTypedData_v4",e.eth_signTypedData="eth_signTypedData",e.cbWallet_arbitrary="walletlink_arbitrary",e.wallet_addEthereumChain="wallet_addEthereumChain",e.wallet_switchEthereumChain="wallet_switchEthereumChain",e.wallet_watchAsset="wallet_watchAsset",e.eth_subscribe="eth_subscribe",e.eth_unsubscribe="eth_unsubscribe",e.eth_newFilter="eth_newFilter",e.eth_newBlockFilter="eth_newBlockFilter",e.eth_newPendingTransactionFilter="eth_newPendingTransactionFilter",e.eth_getFilterChanges="eth_getFilterChanges",e.eth_getFilterLogs="eth_getFilterLogs"}(t.JSONRPCMethod||(t.JSONRPCMethod={}))})(dh);var Wi={};const Nu=(t,e)=>function(){const r=e.promiseModule,n=new Array(arguments.length);for(let i=0;i<arguments.length;i++)n[i]=arguments[i];return new r((i,s)=>{e.errorFirst?n.push(function(o,a){if(e.multiArgs){const c=new Array(arguments.length-1);for(let u=1;u<arguments.length;u++)c[u-1]=arguments[u];o?(c.unshift(o),s(c)):i(c)}else o?s(o):i(a)}):n.push(function(o){if(e.multiArgs){const a=new Array(arguments.length-1);for(let c=0;c<arguments.length;c++)a[c]=arguments[c];i(a)}else i(o)}),t.apply(this,n)})};var bw=(t,e)=>{e=Object.assign({exclude:[/.+(Sync|Stream)$/],errorFirst:!0,promiseModule:Promise},e);const r=i=>{const s=o=>typeof o=="string"?i===o:o.test(i);return e.include?e.include.some(s):!e.exclude.some(s)};let n;typeof t=="function"?n=function(){return e.excludeMain?t.apply(this,arguments):Nu(t,e).apply(this,arguments)}:n=Object.create(Object.getPrototypeOf(t));for(const i in t){const s=t[i];n[i]=typeof s=="function"&&r(i)?Nu(s,e):s}return n},gw=vw,yw=Object.prototype.hasOwnProperty;function vw(){for(var t={},e=0;e<arguments.length;e++){var r=arguments[e];for(var n in r)yw.call(r,n)&&(t[n]=r[n])}return t}var mw=_w;function _w(t){t=t||{};var e=t.max||Number.MAX_SAFE_INTEGER,r=typeof t.start<"u"?t.start:Math.floor(Math.random()*e);return function(){return r=r%e,r++}}const ww=gw,Sw=mw();var Ew=V;function V(t){const e=this;e.currentProvider=t}V.prototype.getBalance=On(2,"eth_getBalance");V.prototype.getCode=On(2,"eth_getCode");V.prototype.getTransactionCount=On(2,"eth_getTransactionCount");V.prototype.getStorageAt=On(3,"eth_getStorageAt");V.prototype.call=On(2,"eth_call");V.prototype.protocolVersion=J("eth_protocolVersion");V.prototype.syncing=J("eth_syncing");V.prototype.coinbase=J("eth_coinbase");V.prototype.mining=J("eth_mining");V.prototype.hashrate=J("eth_hashrate");V.prototype.gasPrice=J("eth_gasPrice");V.prototype.accounts=J("eth_accounts");V.prototype.blockNumber=J("eth_blockNumber");V.prototype.getBlockTransactionCountByHash=J("eth_getBlockTransactionCountByHash");V.prototype.getBlockTransactionCountByNumber=J("eth_getBlockTransactionCountByNumber");V.prototype.getUncleCountByBlockHash=J("eth_getUncleCountByBlockHash");V.prototype.getUncleCountByBlockNumber=J("eth_getUncleCountByBlockNumber");V.prototype.sign=J("eth_sign");V.prototype.sendTransaction=J("eth_sendTransaction");V.prototype.sendRawTransaction=J("eth_sendRawTransaction");V.prototype.estimateGas=J("eth_estimateGas");V.prototype.getBlockByHash=J("eth_getBlockByHash");V.prototype.getBlockByNumber=J("eth_getBlockByNumber");V.prototype.getTransactionByHash=J("eth_getTransactionByHash");V.prototype.getTransactionByBlockHashAndIndex=J("eth_getTransactionByBlockHashAndIndex");V.prototype.getTransactionByBlockNumberAndIndex=J("eth_getTransactionByBlockNumberAndIndex");V.prototype.getTransactionReceipt=J("eth_getTransactionReceipt");V.prototype.getUncleByBlockHashAndIndex=J("eth_getUncleByBlockHashAndIndex");V.prototype.getUncleByBlockNumberAndIndex=J("eth_getUncleByBlockNumberAndIndex");V.prototype.getCompilers=J("eth_getCompilers");V.prototype.compileLLL=J("eth_compileLLL");V.prototype.compileSolidity=J("eth_compileSolidity");V.prototype.compileSerpent=J("eth_compileSerpent");V.prototype.newFilter=J("eth_newFilter");V.prototype.newBlockFilter=J("eth_newBlockFilter");V.prototype.newPendingTransactionFilter=J("eth_newPendingTransactionFilter");V.prototype.uninstallFilter=J("eth_uninstallFilter");V.prototype.getFilterChanges=J("eth_getFilterChanges");V.prototype.getFilterLogs=J("eth_getFilterLogs");V.prototype.getLogs=J("eth_getLogs");V.prototype.getWork=J("eth_getWork");V.prototype.submitWork=J("eth_submitWork");V.prototype.submitHashrate=J("eth_submitHashrate");V.prototype.sendAsync=function(t,e){this.currentProvider.sendAsync(xw(t),function(n,i){if(!n&&i.error&&(n=new Error("EthQuery - RPC Error - "+i.error.message)),n)return e(n);e(null,i.result)})};function J(t){return function(){const e=this;var r=[].slice.call(arguments),n=r.pop();e.sendAsync({method:t,params:r},n)}}function On(t,e){return function(){const r=this;var n=[].slice.call(arguments),i=n.pop();n.length<t&&n.push("latest"),r.sendAsync({method:e,params:n},i)}}function xw(t){return ww({id:Sw(),jsonrpc:"2.0",params:[]},t)}var ph={},bh={},Cw=wf,Ui=function(){return Cw()&&!!Symbol.toStringTag},kw=Ui(),Aw=Di,Ca=Aw("Object.prototype.toString"),Hi=function(e){return kw&&e&&typeof e=="object"&&Symbol.toStringTag in e?!1:Ca(e)==="[object Arguments]"},gh=function(e){return Hi(e)?!0:e!==null&&typeof e=="object"&&typeof e.length=="number"&&e.length>=0&&Ca(e)!=="[object Array]"&&Ca(e.callee)==="[object Function]"},Mw=function(){return Hi(arguments)}();Hi.isLegacyArguments=gh;var Iw=Mw?Hi:gh,Rw=Object.prototype.toString,Tw=Function.prototype.toString,Ow=/^\s*(?:function)?\*/,yh=Ui(),Fo=Object.getPrototypeOf,Nw=function(){if(!yh)return!1;try{return Function("return function*() {}")()}catch{}},$o,Lw=function(e){if(typeof e!="function")return!1;if(Ow.test(Tw.call(e)))return!0;if(!yh){var r=Rw.call(e);return r==="[object GeneratorFunction]"}if(!Fo)return!1;if(typeof $o>"u"){var n=Nw();$o=n?Fo(n):!1}return Fo(e)===$o},vh=Function.prototype.toString,br=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,ka,Jn;if(typeof br=="function"&&typeof Object.defineProperty=="function")try{ka=Object.defineProperty({},"length",{get:function(){throw Jn}}),Jn={},br(function(){throw 42},null,ka)}catch(t){t!==Jn&&(br=null)}else br=null;var Pw=/^\s*class\b/,Aa=function(e){try{var r=vh.call(e);return Pw.test(r)}catch{return!1}},Wo=function(e){try{return Aa(e)?!1:(vh.call(e),!0)}catch{return!1}},Xn=Object.prototype.toString,Dw="[object Object]",jw="[object Function]",Bw="[object GeneratorFunction]",Fw="[object HTMLAllCollection]",$w="[object HTML document.all class]",Ww="[object HTMLCollection]",Uw=typeof Symbol=="function"&&!!Symbol.toStringTag,Hw=!(0 in[,]),Ma=function(){return!1};if(typeof document=="object"){var Vw=document.all;Xn.call(Vw)===Xn.call(document.all)&&(Ma=function(e){if((Hw||!e)&&(typeof e>"u"||typeof e=="object"))try{var r=Xn.call(e);return(r===Fw||r===$w||r===Ww||r===Dw)&&e("")==null}catch{}return!1})}var zw=br?function(e){if(Ma(e))return!0;if(!e||typeof e!="function"&&typeof e!="object")return!1;try{br(e,null,ka)}catch(r){if(r!==Jn)return!1}return!Aa(e)&&Wo(e)}:function(e){if(Ma(e))return!0;if(!e||typeof e!="function"&&typeof e!="object")return!1;if(Uw)return Wo(e);if(Aa(e))return!1;var r=Xn.call(e);return r!==jw&&r!==Bw&&!/^\[object HTML/.test(r)?!1:Wo(e)},qw=zw,Gw=Object.prototype.toString,mh=Object.prototype.hasOwnProperty,Qw=function(e,r,n){for(var i=0,s=e.length;i<s;i++)mh.call(e,i)&&(n==null?r(e[i],i,e):r.call(n,e[i],i,e))},Zw=function(e,r,n){for(var i=0,s=e.length;i<s;i++)n==null?r(e.charAt(i),i,e):r.call(n,e.charAt(i),i,e)},Yw=function(e,r,n){for(var i in e)mh.call(e,i)&&(n==null?r(e[i],i,e):r.call(n,e[i],i,e))},Kw=function(e,r,n){if(!qw(r))throw new TypeError("iterator must be a function");var i;arguments.length>=3&&(i=n),Gw.call(e)==="[object Array]"?Qw(e,r,i):typeof e=="string"?Zw(e,r,i):Yw(e,r,i)},_h=Kw,Uo=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],Jw=typeof globalThis>"u"?Q:globalThis,wh=function(){for(var e=[],r=0;r<Uo.length;r++)typeof Jw[Uo[r]]=="function"&&(e[e.length]=Uo[r]);return e},Xw=Pi,ei=Xw("%Object.getOwnPropertyDescriptor%",!0);if(ei)try{ei([],"length")}catch{ei=null}var Sh=ei,Eh=_h,e2=wh,nc=Di,t2=nc("Object.prototype.toString"),xh=Ui(),ti=Sh,r2=typeof globalThis>"u"?Q:globalThis,Ch=e2(),n2=nc("Array.prototype.indexOf",!0)||function(e,r){for(var n=0;n<e.length;n+=1)if(e[n]===r)return n;return-1},i2=nc("String.prototype.slice"),kh={},Ho=Object.getPrototypeOf;xh&&ti&&Ho&&Eh(Ch,function(t){var e=new r2[t];if(Symbol.toStringTag in e){var r=Ho(e),n=ti(r,Symbol.toStringTag);if(!n){var i=Ho(r);n=ti(i,Symbol.toStringTag)}kh[t]=n.get}});var s2=function(e){var r=!1;return Eh(kh,function(n,i){if(!r)try{r=n.call(e)===i}catch{}}),r},Ah=function(e){if(!e||typeof e!="object")return!1;if(!xh||!(Symbol.toStringTag in e)){var r=i2(t2(e),8,-1);return n2(Ch,r)>-1}return ti?s2(e):!1},Mh=_h,o2=wh,Ih=Di,Vo=Sh,a2=Ih("Object.prototype.toString"),Rh=Ui(),Lu=typeof globalThis>"u"?Q:globalThis,c2=o2(),u2=Ih("String.prototype.slice"),Th={},zo=Object.getPrototypeOf;Rh&&Vo&&zo&&Mh(c2,function(t){if(typeof Lu[t]=="function"){var e=new Lu[t];if(Symbol.toStringTag in e){var r=zo(e),n=Vo(r,Symbol.toStringTag);if(!n){var i=zo(r);n=Vo(i,Symbol.toStringTag)}Th[t]=n.get}}});var l2=function(e){var r=!1;return Mh(Th,function(n,i){if(!r)try{var s=n.call(e);s===i&&(r=s)}catch{}}),r},f2=Ah,h2=function(e){return f2(e)?!Rh||!(Symbol.toStringTag in e)?u2(a2(e),8,-1):l2(e):!1};(function(t){var e=Iw,r=Lw,n=h2,i=Ah;function s(M){return M.call.bind(M)}var o=typeof BigInt<"u",a=typeof Symbol<"u",c=s(Object.prototype.toString),u=s(Number.prototype.valueOf),l=s(String.prototype.valueOf),g=s(Boolean.prototype.valueOf);if(o)var f=s(BigInt.prototype.valueOf);if(a)var p=s(Symbol.prototype.valueOf);function y(M,Ht){if(typeof M!="object")return!1;try{return Ht(M),!0}catch{return!1}}t.isArgumentsObject=e,t.isGeneratorFunction=r,t.isTypedArray=i;function E(M){return typeof Promise<"u"&&M instanceof Promise||M!==null&&typeof M=="object"&&typeof M.then=="function"&&typeof M.catch=="function"}t.isPromise=E;function k(M){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(M):i(M)||C(M)}t.isArrayBufferView=k;function b(M){return n(M)==="Uint8Array"}t.isUint8Array=b;function v(M){return n(M)==="Uint8ClampedArray"}t.isUint8ClampedArray=v;function w(M){return n(M)==="Uint16Array"}t.isUint16Array=w;function A(M){return n(M)==="Uint32Array"}t.isUint32Array=A;function N(M){return n(M)==="Int8Array"}t.isInt8Array=N;function F(M){return n(M)==="Int16Array"}t.isInt16Array=F;function $(M){return n(M)==="Int32Array"}t.isInt32Array=$;function D(M){return n(M)==="Float32Array"}t.isFloat32Array=D;function P(M){return n(M)==="Float64Array"}t.isFloat64Array=P;function ie(M){return n(M)==="BigInt64Array"}t.isBigInt64Array=ie;function te(M){return n(M)==="BigUint64Array"}t.isBigUint64Array=te;function q(M){return c(M)==="[object Map]"}q.working=typeof Map<"u"&&q(new Map);function Z(M){return typeof Map>"u"?!1:q.working?q(M):M instanceof Map}t.isMap=Z;function X(M){return c(M)==="[object Set]"}X.working=typeof Set<"u"&&X(new Set);function ne(M){return typeof Set>"u"?!1:X.working?X(M):M instanceof Set}t.isSet=ne;function he(M){return c(M)==="[object WeakMap]"}he.working=typeof WeakMap<"u"&&he(new WeakMap);function we(M){return typeof WeakMap>"u"?!1:he.working?he(M):M instanceof WeakMap}t.isWeakMap=we;function me(M){return c(M)==="[object WeakSet]"}me.working=typeof WeakSet<"u"&&me(new WeakSet);function ce(M){return me(M)}t.isWeakSet=ce;function Ie(M){return c(M)==="[object ArrayBuffer]"}Ie.working=typeof ArrayBuffer<"u"&&Ie(new ArrayBuffer);function Fe(M){return typeof ArrayBuffer>"u"?!1:Ie.working?Ie(M):M instanceof ArrayBuffer}t.isArrayBuffer=Fe;function S(M){return c(M)==="[object DataView]"}S.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&S(new DataView(new ArrayBuffer(1),0,1));function C(M){return typeof DataView>"u"?!1:S.working?S(M):M instanceof DataView}t.isDataView=C;var T=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function U(M){return c(M)==="[object SharedArrayBuffer]"}function m(M){return typeof T>"u"?!1:(typeof U.working>"u"&&(U.working=U(new T)),U.working?U(M):M instanceof T)}t.isSharedArrayBuffer=m;function _(M){return c(M)==="[object AsyncFunction]"}t.isAsyncFunction=_;function x(M){return c(M)==="[object Map Iterator]"}t.isMapIterator=x;function O(M){return c(M)==="[object Set Iterator]"}t.isSetIterator=O;function j(M){return c(M)==="[object Generator]"}t.isGeneratorObject=j;function h(M){return c(M)==="[object WebAssembly.Module]"}t.isWebAssemblyCompiledModule=h;function d(M){return y(M,u)}t.isNumberObject=d;function I(M){return y(M,l)}t.isStringObject=I;function L(M){return y(M,g)}t.isBooleanObject=L;function oe(M){return o&&y(M,f)}t.isBigIntObject=oe;function G(M){return a&&y(M,p)}t.isSymbolObject=G;function se(M){return d(M)||I(M)||L(M)||oe(M)||G(M)}t.isBoxedPrimitive=se;function et(M){return typeof Uint8Array<"u"&&(Fe(M)||m(M))}t.isAnyArrayBuffer=et,["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(M){Object.defineProperty(t,M,{enumerable:!1,value:function(){throw new Error(M+" is not supported in userland")}})})})(bh);var d2=function(e){return e&&typeof e=="object"&&typeof e.copy=="function"&&typeof e.fill=="function"&&typeof e.readUInt8=="function"};(function(t){var e=Object.getOwnPropertyDescriptors||function(C){for(var T=Object.keys(C),U={},m=0;m<T.length;m++)U[T[m]]=Object.getOwnPropertyDescriptor(C,T[m]);return U},r=/%[sdj%]/g;t.format=function(S){if(!N(S)){for(var C=[],T=0;T<arguments.length;T++)C.push(o(arguments[T]));return C.join(" ")}for(var T=1,U=arguments,m=U.length,_=String(S).replace(r,function(O){if(O==="%%")return"%";if(T>=m)return O;switch(O){case"%s":return String(U[T++]);case"%d":return Number(U[T++]);case"%j":try{return JSON.stringify(U[T++])}catch{return"[Circular]"}default:return O}}),x=U[T];T<m;x=U[++T])v(x)||!P(x)?_+=" "+x:_+=" "+o(x);return _},t.deprecate=function(S,C){if(typeof process<"u"&&process.noDeprecation===!0)return S;if(typeof process>"u")return function(){return t.deprecate(S,C).apply(this,arguments)};var T=!1;function U(){if(!T){if(process.throwDeprecation)throw new Error(C);process.traceDeprecation?console.trace(C):console.error(C),T=!0}return S.apply(this,arguments)}return U};var n={},i=/^$/;if(process.env.NODE_DEBUG){var s=process.env.NODE_DEBUG;s=s.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),i=new RegExp("^"+s+"$","i")}t.debuglog=function(S){if(S=S.toUpperCase(),!n[S])if(i.test(S)){var C=process.pid;n[S]=function(){var T=t.format.apply(t,arguments);console.error("%s %d: %s",S,C,T)}}else n[S]=function(){};return n[S]};function o(S,C){var T={seen:[],stylize:c};return arguments.length>=3&&(T.depth=arguments[2]),arguments.length>=4&&(T.colors=arguments[3]),b(C)?T.showHidden=C:C&&t._extend(T,C),$(T.showHidden)&&(T.showHidden=!1),$(T.depth)&&(T.depth=2),$(T.colors)&&(T.colors=!1),$(T.customInspect)&&(T.customInspect=!0),T.colors&&(T.stylize=a),l(T,S,T.depth)}t.inspect=o,o.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},o.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function a(S,C){var T=o.styles[C];return T?"\x1B["+o.colors[T][0]+"m"+S+"\x1B["+o.colors[T][1]+"m":S}function c(S,C){return S}function u(S){var C={};return S.forEach(function(T,U){C[T]=!0}),C}function l(S,C,T){if(S.customInspect&&C&&q(C.inspect)&&C.inspect!==t.inspect&&!(C.constructor&&C.constructor.prototype===C)){var U=C.inspect(T,S);return N(U)||(U=l(S,U,T)),U}var m=g(S,C);if(m)return m;var _=Object.keys(C),x=u(_);if(S.showHidden&&(_=Object.getOwnPropertyNames(C)),te(C)&&(_.indexOf("message")>=0||_.indexOf("description")>=0))return f(C);if(_.length===0){if(q(C)){var O=C.name?": "+C.name:"";return S.stylize("[Function"+O+"]","special")}if(D(C))return S.stylize(RegExp.prototype.toString.call(C),"regexp");if(ie(C))return S.stylize(Date.prototype.toString.call(C),"date");if(te(C))return f(C)}var j="",h=!1,d=["{","}"];if(k(C)&&(h=!0,d=["[","]"]),q(C)){var I=C.name?": "+C.name:"";j=" [Function"+I+"]"}if(D(C)&&(j=" "+RegExp.prototype.toString.call(C)),ie(C)&&(j=" "+Date.prototype.toUTCString.call(C)),te(C)&&(j=" "+f(C)),_.length===0&&(!h||C.length==0))return d[0]+j+d[1];if(T<0)return D(C)?S.stylize(RegExp.prototype.toString.call(C),"regexp"):S.stylize("[Object]","special");S.seen.push(C);var L;return h?L=p(S,C,T,x,_):L=_.map(function(oe){return y(S,C,T,x,oe,h)}),S.seen.pop(),E(L,j,d)}function g(S,C){if($(C))return S.stylize("undefined","undefined");if(N(C)){var T="'"+JSON.stringify(C).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return S.stylize(T,"string")}if(A(C))return S.stylize(""+C,"number");if(b(C))return S.stylize(""+C,"boolean");if(v(C))return S.stylize("null","null")}function f(S){return"["+Error.prototype.toString.call(S)+"]"}function p(S,C,T,U,m){for(var _=[],x=0,O=C.length;x<O;++x)me(C,String(x))?_.push(y(S,C,T,U,String(x),!0)):_.push("");return m.forEach(function(j){j.match(/^\d+$/)||_.push(y(S,C,T,U,j,!0))}),_}function y(S,C,T,U,m,_){var x,O,j;if(j=Object.getOwnPropertyDescriptor(C,m)||{value:C[m]},j.get?j.set?O=S.stylize("[Getter/Setter]","special"):O=S.stylize("[Getter]","special"):j.set&&(O=S.stylize("[Setter]","special")),me(U,m)||(x="["+m+"]"),O||(S.seen.indexOf(j.value)<0?(v(T)?O=l(S,j.value,null):O=l(S,j.value,T-1),O.indexOf(`
`)>-1&&(_?O=O.split(`
`).map(function(h){return"  "+h}).join(`
`).slice(2):O=`
`+O.split(`
`).map(function(h){return"   "+h}).join(`
`))):O=S.stylize("[Circular]","special")),$(x)){if(_&&m.match(/^\d+$/))return O;x=JSON.stringify(""+m),x.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(x=x.slice(1,-1),x=S.stylize(x,"name")):(x=x.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),x=S.stylize(x,"string"))}return x+": "+O}function E(S,C,T){var U=S.reduce(function(m,_){return _.indexOf(`
`)>=0,m+_.replace(/\u001b\[\d\d?m/g,"").length+1},0);return U>60?T[0]+(C===""?"":C+`
 `)+" "+S.join(`,
  `)+" "+T[1]:T[0]+C+" "+S.join(", ")+" "+T[1]}t.types=bh;function k(S){return Array.isArray(S)}t.isArray=k;function b(S){return typeof S=="boolean"}t.isBoolean=b;function v(S){return S===null}t.isNull=v;function w(S){return S==null}t.isNullOrUndefined=w;function A(S){return typeof S=="number"}t.isNumber=A;function N(S){return typeof S=="string"}t.isString=N;function F(S){return typeof S=="symbol"}t.isSymbol=F;function $(S){return S===void 0}t.isUndefined=$;function D(S){return P(S)&&X(S)==="[object RegExp]"}t.isRegExp=D,t.types.isRegExp=D;function P(S){return typeof S=="object"&&S!==null}t.isObject=P;function ie(S){return P(S)&&X(S)==="[object Date]"}t.isDate=ie,t.types.isDate=ie;function te(S){return P(S)&&(X(S)==="[object Error]"||S instanceof Error)}t.isError=te,t.types.isNativeError=te;function q(S){return typeof S=="function"}t.isFunction=q;function Z(S){return S===null||typeof S=="boolean"||typeof S=="number"||typeof S=="string"||typeof S=="symbol"||typeof S>"u"}t.isPrimitive=Z,t.isBuffer=d2;function X(S){return Object.prototype.toString.call(S)}function ne(S){return S<10?"0"+S.toString(10):S.toString(10)}var he=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function we(){var S=new Date,C=[ne(S.getHours()),ne(S.getMinutes()),ne(S.getSeconds())].join(":");return[S.getDate(),he[S.getMonth()],C].join(" ")}t.log=function(){console.log("%s - %s",we(),t.format.apply(t,arguments))},t.inherits=Ke.exports,t._extend=function(S,C){if(!C||!P(C))return S;for(var T=Object.keys(C),U=T.length;U--;)S[T[U]]=C[T[U]];return S};function me(S,C){return Object.prototype.hasOwnProperty.call(S,C)}var ce=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;t.promisify=function(C){if(typeof C!="function")throw new TypeError('The "original" argument must be of type Function');if(ce&&C[ce]){var T=C[ce];if(typeof T!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(T,ce,{value:T,enumerable:!1,writable:!1,configurable:!0}),T}function T(){for(var U,m,_=new Promise(function(j,h){U=j,m=h}),x=[],O=0;O<arguments.length;O++)x.push(arguments[O]);x.push(function(j,h){j?m(j):U(h)});try{C.apply(this,x)}catch(j){m(j)}return _}return Object.setPrototypeOf(T,Object.getPrototypeOf(C)),ce&&Object.defineProperty(T,ce,{value:T,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(T,e(C))},t.promisify.custom=ce;function Ie(S,C){if(!S){var T=new Error("Promise was rejected with a falsy value");T.reason=S,S=T}return C(S)}function Fe(S){if(typeof S!="function")throw new TypeError('The "original" argument must be of type Function');function C(){for(var T=[],U=0;U<arguments.length;U++)T.push(arguments[U]);var m=T.pop();if(typeof m!="function")throw new TypeError("The last argument must be of type Function");var _=this,x=function(){return m.apply(_,arguments)};S.apply(this,T).then(function(O){process.nextTick(x.bind(null,null,O))},function(O){process.nextTick(Ie.bind(null,O,x))})}return Object.setPrototypeOf(C,Object.getPrototypeOf(S)),Object.defineProperties(C,e(S)),C}t.callbackify=Fe})(ph);const p2=ph,Oh=Si.exports;var qo=typeof Reflect=="object"?Reflect:null,b2=qo&&typeof qo.apply=="function"?qo.apply:function(e,r,n){return Function.prototype.apply.call(e,r,n)},g2=ic;function ic(){Oh.call(this)}p2.inherits(ic,Oh);ic.prototype.emit=function(t){for(var e=[],r=1;r<arguments.length;r++)e.push(arguments[r]);var n=t==="error",i=this._events;if(i!==void 0)n=n&&i.error===void 0;else if(!n)return!1;if(n){var s;if(e.length>0&&(s=e[0]),s instanceof Error)throw s;var o=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw o.context=s,o}var a=i[t];if(a===void 0)return!1;if(typeof a=="function")Pu(a,this,e);else for(var c=a.length,u=y2(a,c),r=0;r<c;++r)Pu(u[r],this,e);return!0};function Pu(t,e,r){try{b2(t,e,r)}catch(n){setTimeout(()=>{throw n})}}function y2(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}const v2=g2,m2=1e3,_2=(t,e)=>t+e,Du=["sync","latest"];class w2 extends v2{constructor(e={}){super(),this._blockResetDuration=e.blockResetDuration||20*m2,this._blockResetTimeout,this._currentBlock=null,this._isRunning=!1,this._onNewListener=this._onNewListener.bind(this),this._onRemoveListener=this._onRemoveListener.bind(this),this._resetCurrentBlock=this._resetCurrentBlock.bind(this),this._setupInternalEvents()}isRunning(){return this._isRunning}getCurrentBlock(){return this._currentBlock}async getLatestBlock(){return this._currentBlock?this._currentBlock:await new Promise(r=>this.once("latest",r))}removeAllListeners(e){e?super.removeAllListeners(e):super.removeAllListeners(),this._setupInternalEvents(),this._onRemoveListener()}_start(){}_end(){}_setupInternalEvents(){this.removeListener("newListener",this._onNewListener),this.removeListener("removeListener",this._onRemoveListener),this.on("newListener",this._onNewListener),this.on("removeListener",this._onRemoveListener)}_onNewListener(e,r){!Du.includes(e)||this._maybeStart()}_onRemoveListener(e,r){this._getBlockTrackerEventCount()>0||this._maybeEnd()}_maybeStart(){this._isRunning||(this._isRunning=!0,this._cancelBlockResetTimeout(),this._start())}_maybeEnd(){!this._isRunning||(this._isRunning=!1,this._setupBlockResetTimeout(),this._end())}_getBlockTrackerEventCount(){return Du.map(e=>this.listenerCount(e)).reduce(_2)}_newPotentialLatest(e){const r=this._currentBlock;r&&ju(e)<=ju(r)||this._setCurrentBlock(e)}_setCurrentBlock(e){const r=this._currentBlock;this._currentBlock=e,this.emit("latest",e),this.emit("sync",{oldBlock:r,newBlock:e})}_setupBlockResetTimeout(){this._cancelBlockResetTimeout(),this._blockResetTimeout=setTimeout(this._resetCurrentBlock,this._blockResetDuration),this._blockResetTimeout.unref&&this._blockResetTimeout.unref()}_cancelBlockResetTimeout(){clearTimeout(this._blockResetTimeout)}_resetCurrentBlock(){this._currentBlock=null}}var S2=w2;function ju(t){return Number.parseInt(t,16)}const E2=bw,x2=S2,C2=1e3;class k2 extends x2{constructor(e={}){if(!e.provider)throw new Error("PollingBlockTracker - no provider specified.");const r=e.pollingInterval||20*C2,n=e.retryTimeout||r/10,i=e.keepEventLoopActive!==void 0?e.keepEventLoopActive:!0,s=e.setSkipCacheFlag||!1;super(Object.assign({blockResetDuration:r},e)),this._provider=e.provider,this._pollingInterval=r,this._retryTimeout=n,this._keepEventLoopActive=i,this._setSkipCacheFlag=s}async checkForLatestBlock(){return await this._updateLatestBlock(),await this.getLatestBlock()}_start(){this._performSync().catch(e=>this.emit("error",e))}async _performSync(){for(;this._isRunning;)try{await this._updateLatestBlock(),await Bu(this._pollingInterval,!this._keepEventLoopActive)}catch(e){const r=new Error(`PollingBlockTracker - encountered an error while attempting to update latest block:
${e.stack}`);try{this.emit("error",r)}catch{console.error(r)}await Bu(this._retryTimeout,!this._keepEventLoopActive)}}async _updateLatestBlock(){const e=await this._fetchLatestBlock();this._newPotentialLatest(e)}async _fetchLatestBlock(){const e={jsonrpc:"2.0",id:1,method:"eth_blockNumber",params:[]};this._setSkipCacheFlag&&(e.skipCache=!0);const r=await E2(n=>this._provider.sendAsync(e,n))();if(r.error)throw new Error(`PollingBlockTracker - encountered error fetching block:
${r.error}`);return r.result}}var A2=k2;function Bu(t,e){return new Promise(r=>{const n=setTimeout(r,t);n.unref&&e&&n.unref()})}var sc={exports:{}},M2=function(e){return(r,n,i,s)=>{const o=e[r.method];return o===void 0?i():typeof o=="function"?o(r,n,i,s):(n.result=o,s())}};(function(t){t.exports=M2})(sc);var oc={},Vi={},Nn={};Object.defineProperty(Nn,"__esModule",{value:!0});Nn.getUniqueId=void 0;const Nh=4294967295;let Go=Math.floor(Math.random()*Nh);function I2(){return Go=(Go+1)%Nh,Go}Nn.getUniqueId=I2;Object.defineProperty(Vi,"__esModule",{value:!0});Vi.createIdRemapMiddleware=void 0;const R2=Nn;function T2(){return(t,e,r,n)=>{const i=t.id,s=R2.getUniqueId();t.id=s,e.id=s,r(o=>{t.id=i,e.id=i,o()})}}Vi.createIdRemapMiddleware=T2;var zi={};Object.defineProperty(zi,"__esModule",{value:!0});zi.createAsyncMiddleware=void 0;function O2(t){return async(e,r,n,i)=>{let s;const o=new Promise(l=>{s=l});let a=null,c=!1;const u=async()=>{c=!0,n(l=>{a=l,s()}),await o};try{await t(e,r,u),c?(await o,a(null)):i(null)}catch(l){a?a(l):i(l)}}}zi.createAsyncMiddleware=O2;var qi={};Object.defineProperty(qi,"__esModule",{value:!0});qi.createScaffoldMiddleware=void 0;function N2(t){return(e,r,n,i)=>{const s=t[e.method];return s===void 0?n():typeof s=="function"?s(e,r,n,i):(r.result=s,i())}}qi.createScaffoldMiddleware=N2;var Ln={},Lh={},Ft={};Object.defineProperty(Ft,"__esModule",{value:!0});Ft.EthereumProviderError=Ft.EthereumRpcError=void 0;const L2=vl;class Ph extends Error{constructor(e,r,n){if(!Number.isInteger(e))throw new Error('"code" must be an integer.');if(!r||typeof r!="string")throw new Error('"message" must be a nonempty string.');super(r),this.code=e,n!==void 0&&(this.data=n)}serialize(){const e={code:this.code,message:this.message};return this.data!==void 0&&(e.data=this.data),this.stack&&(e.stack=this.stack),e}toString(){return L2.default(this.serialize(),j2,2)}}Ft.EthereumRpcError=Ph;class P2 extends Ph{constructor(e,r,n){if(!D2(e))throw new Error('"code" must be an integer such that: 1000 <= code <= 4999');super(e,r,n)}}Ft.EthereumProviderError=P2;function D2(t){return Number.isInteger(t)&&t>=1e3&&t<=4999}function j2(t,e){if(e!=="[Circular]")return e}var ac={},$t={};Object.defineProperty($t,"__esModule",{value:!0});$t.errorValues=$t.errorCodes=void 0;$t.errorCodes={rpc:{invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},provider:{userRejectedRequest:4001,unauthorized:4100,unsupportedMethod:4200,disconnected:4900,chainDisconnected:4901}};$t.errorValues={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."}};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.serializeError=t.isValidCode=t.getMessageFromCode=t.JSON_RPC_SERVER_ERROR_MESSAGE=void 0;const e=$t,r=Ft,n=e.errorCodes.rpc.internal,i="Unspecified error message. This is a bug, please report it.",s={code:n,message:o(n)};t.JSON_RPC_SERVER_ERROR_MESSAGE="Unspecified server error.";function o(f,p=i){if(Number.isInteger(f)){const y=f.toString();if(g(e.errorValues,y))return e.errorValues[y].message;if(u(f))return t.JSON_RPC_SERVER_ERROR_MESSAGE}return p}t.getMessageFromCode=o;function a(f){if(!Number.isInteger(f))return!1;const p=f.toString();return!!(e.errorValues[p]||u(f))}t.isValidCode=a;function c(f,{fallbackError:p=s,shouldIncludeStack:y=!1}={}){var E,k;if(!p||!Number.isInteger(p.code)||typeof p.message!="string")throw new Error("Must provide fallback error with integer number code and string message.");if(f instanceof r.EthereumRpcError)return f.serialize();const b={};if(f&&typeof f=="object"&&!Array.isArray(f)&&g(f,"code")&&a(f.code)){const w=f;b.code=w.code,w.message&&typeof w.message=="string"?(b.message=w.message,g(w,"data")&&(b.data=w.data)):(b.message=o(b.code),b.data={originalError:l(f)})}else{b.code=p.code;const w=(E=f)===null||E===void 0?void 0:E.message;b.message=w&&typeof w=="string"?w:p.message,b.data={originalError:l(f)}}const v=(k=f)===null||k===void 0?void 0:k.stack;return y&&f&&v&&typeof v=="string"&&(b.stack=v),b}t.serializeError=c;function u(f){return f>=-32099&&f<=-32e3}function l(f){return f&&typeof f=="object"&&!Array.isArray(f)?Object.assign({},f):f}function g(f,p){return Object.prototype.hasOwnProperty.call(f,p)}})(ac);var Gi={};Object.defineProperty(Gi,"__esModule",{value:!0});Gi.ethErrors=void 0;const cc=Ft,Dh=ac,Te=$t;Gi.ethErrors={rpc:{parse:t=>ze(Te.errorCodes.rpc.parse,t),invalidRequest:t=>ze(Te.errorCodes.rpc.invalidRequest,t),invalidParams:t=>ze(Te.errorCodes.rpc.invalidParams,t),methodNotFound:t=>ze(Te.errorCodes.rpc.methodNotFound,t),internal:t=>ze(Te.errorCodes.rpc.internal,t),server:t=>{if(!t||typeof t!="object"||Array.isArray(t))throw new Error("Ethereum RPC Server errors must provide single object argument.");const{code:e}=t;if(!Number.isInteger(e)||e>-32005||e<-32099)throw new Error('"code" must be an integer such that: -32099 <= code <= -32005');return ze(e,t)},invalidInput:t=>ze(Te.errorCodes.rpc.invalidInput,t),resourceNotFound:t=>ze(Te.errorCodes.rpc.resourceNotFound,t),resourceUnavailable:t=>ze(Te.errorCodes.rpc.resourceUnavailable,t),transactionRejected:t=>ze(Te.errorCodes.rpc.transactionRejected,t),methodNotSupported:t=>ze(Te.errorCodes.rpc.methodNotSupported,t),limitExceeded:t=>ze(Te.errorCodes.rpc.limitExceeded,t)},provider:{userRejectedRequest:t=>Kr(Te.errorCodes.provider.userRejectedRequest,t),unauthorized:t=>Kr(Te.errorCodes.provider.unauthorized,t),unsupportedMethod:t=>Kr(Te.errorCodes.provider.unsupportedMethod,t),disconnected:t=>Kr(Te.errorCodes.provider.disconnected,t),chainDisconnected:t=>Kr(Te.errorCodes.provider.chainDisconnected,t),custom:t=>{if(!t||typeof t!="object"||Array.isArray(t))throw new Error("Ethereum Provider custom errors must provide single object argument.");const{code:e,message:r,data:n}=t;if(!r||typeof r!="string")throw new Error('"message" must be a nonempty string');return new cc.EthereumProviderError(e,r,n)}}};function ze(t,e){const[r,n]=jh(e);return new cc.EthereumRpcError(t,r||Dh.getMessageFromCode(t),n)}function Kr(t,e){const[r,n]=jh(e);return new cc.EthereumProviderError(t,r||Dh.getMessageFromCode(t),n)}function jh(t){if(t){if(typeof t=="string")return[t];if(typeof t=="object"&&!Array.isArray(t)){const{message:e,data:r}=t;if(e&&typeof e!="string")throw new Error("Must specify string message.");return[e||void 0,r]}}return[]}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.getMessageFromCode=t.serializeError=t.EthereumProviderError=t.EthereumRpcError=t.ethErrors=t.errorCodes=void 0;const e=Ft;Object.defineProperty(t,"EthereumRpcError",{enumerable:!0,get:function(){return e.EthereumRpcError}}),Object.defineProperty(t,"EthereumProviderError",{enumerable:!0,get:function(){return e.EthereumProviderError}});const r=ac;Object.defineProperty(t,"serializeError",{enumerable:!0,get:function(){return r.serializeError}}),Object.defineProperty(t,"getMessageFromCode",{enumerable:!0,get:function(){return r.getMessageFromCode}});const n=Gi;Object.defineProperty(t,"ethErrors",{enumerable:!0,get:function(){return n.ethErrors}});const i=$t;Object.defineProperty(t,"errorCodes",{enumerable:!0,get:function(){return i.errorCodes}})})(Lh);var B2=Q&&Q.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ln,"__esModule",{value:!0});Ln.JsonRpcEngine=void 0;const F2=B2(Dr),qe=Lh;class yt extends F2.default{constructor(){super(),this._middleware=[]}push(e){this._middleware.push(e)}handle(e,r){if(r&&typeof r!="function")throw new Error('"callback" must be a function if provided.');return Array.isArray(e)?r?this._handleBatch(e,r):this._handleBatch(e):r?this._handle(e,r):this._promiseHandle(e)}asMiddleware(){return async(e,r,n,i)=>{try{const[s,o,a]=await yt._runAllMiddleware(e,r,this._middleware);return o?(await yt._runReturnHandlers(a),i(s)):n(async c=>{try{await yt._runReturnHandlers(a)}catch(u){return c(u)}return c()})}catch(s){return i(s)}}}async _handleBatch(e,r){try{const n=await Promise.all(e.map(this._promiseHandle.bind(this)));return r?r(null,n):n}catch(n){if(r)return r(n);throw n}}_promiseHandle(e){return new Promise(r=>{this._handle(e,(n,i)=>{r(i)})})}async _handle(e,r){if(!e||Array.isArray(e)||typeof e!="object"){const o=new qe.EthereumRpcError(qe.errorCodes.rpc.invalidRequest,`Requests must be plain objects. Received: ${typeof e}`,{request:e});return r(o,{id:void 0,jsonrpc:"2.0",error:o})}if(typeof e.method!="string"){const o=new qe.EthereumRpcError(qe.errorCodes.rpc.invalidRequest,`Must specify a string method. Received: ${typeof e.method}`,{request:e});return r(o,{id:e.id,jsonrpc:"2.0",error:o})}const n=Object.assign({},e),i={id:n.id,jsonrpc:n.jsonrpc};let s=null;try{await this._processRequest(n,i)}catch(o){s=o}return s&&(delete i.result,i.error||(i.error=qe.serializeError(s))),r(s,i)}async _processRequest(e,r){const[n,i,s]=await yt._runAllMiddleware(e,r,this._middleware);if(yt._checkForCompletion(e,r,i),await yt._runReturnHandlers(s),n)throw n}static async _runAllMiddleware(e,r,n){const i=[];let s=null,o=!1;for(const a of n)if([s,o]=await yt._runMiddleware(e,r,a,i),o)break;return[s,o,i.reverse()]}static _runMiddleware(e,r,n,i){return new Promise(s=>{const o=c=>{const u=c||r.error;u&&(r.error=qe.serializeError(u)),s([u,!0])},a=c=>{r.error?o(r.error):(c&&(typeof c!="function"&&o(new qe.EthereumRpcError(qe.errorCodes.rpc.internal,`JsonRpcEngine: "next" return handlers must be functions. Received "${typeof c}" for request:
${Qo(e)}`,{request:e})),i.push(c)),s([null,!1]))};try{n(e,r,a,o)}catch(c){o(c)}})}static async _runReturnHandlers(e){for(const r of e)await new Promise((n,i)=>{r(s=>s?i(s):n())})}static _checkForCompletion(e,r,n){if(!("result"in r)&&!("error"in r))throw new qe.EthereumRpcError(qe.errorCodes.rpc.internal,`JsonRpcEngine: Response has no error or result for request:
${Qo(e)}`,{request:e});if(!n)throw new qe.EthereumRpcError(qe.errorCodes.rpc.internal,`JsonRpcEngine: Nothing ended request:
${Qo(e)}`,{request:e})}}Ln.JsonRpcEngine=yt;function Qo(t){return JSON.stringify(t,null,2)}var Qi={};Object.defineProperty(Qi,"__esModule",{value:!0});Qi.mergeMiddleware=void 0;const $2=Ln;function W2(t){const e=new $2.JsonRpcEngine;return t.forEach(r=>e.push(r)),e.asMiddleware()}Qi.mergeMiddleware=W2;(function(t){var e=Q&&Q.__createBinding||(Object.create?function(n,i,s,o){o===void 0&&(o=s),Object.defineProperty(n,o,{enumerable:!0,get:function(){return i[s]}})}:function(n,i,s,o){o===void 0&&(o=s),n[o]=i[s]}),r=Q&&Q.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(Vi,t),r(zi,t),r(qi,t),r(Nn,t),r(Ln,t),r(Qi,t)})(oc);var Bh={},uc={};const lc=Pr(Ed);var Zi={};Object.defineProperty(Zi,"__esModule",{value:!0});var Fu=lc,U2=function(){function t(e){if(this._maxConcurrency=e,this._queue=[],e<=0)throw new Error("semaphore must be initialized to a positive value");this._value=e}return t.prototype.acquire=function(){var e=this,r=this.isLocked(),n=new Promise(function(i){return e._queue.push(i)});return r||this._dispatch(),n},t.prototype.runExclusive=function(e){return Fu.__awaiter(this,void 0,void 0,function(){var r,n,i;return Fu.__generator(this,function(s){switch(s.label){case 0:return[4,this.acquire()];case 1:r=s.sent(),n=r[0],i=r[1],s.label=2;case 2:return s.trys.push([2,,4,5]),[4,e(n)];case 3:return[2,s.sent()];case 4:return i(),[7];case 5:return[2]}})})},t.prototype.isLocked=function(){return this._value<=0},t.prototype.release=function(){if(this._maxConcurrency>1)throw new Error("this method is unavailabel on semaphores with concurrency > 1; use the scoped release returned by acquire instead");if(this._currentReleaser){var e=this._currentReleaser;this._currentReleaser=void 0,e()}},t.prototype._dispatch=function(){var e=this,r=this._queue.shift();if(!!r){var n=!1;this._currentReleaser=function(){n||(n=!0,e._value++,e._dispatch())},r([this._value--,this._currentReleaser])}},t}();Zi.default=U2;Object.defineProperty(uc,"__esModule",{value:!0});var $u=lc,H2=Zi,V2=function(){function t(){this._semaphore=new H2.default(1)}return t.prototype.acquire=function(){return $u.__awaiter(this,void 0,void 0,function(){var e,r;return $u.__generator(this,function(n){switch(n.label){case 0:return[4,this._semaphore.acquire()];case 1:return e=n.sent(),r=e[1],[2,r]}})})},t.prototype.runExclusive=function(e){return this._semaphore.runExclusive(function(){return e()})},t.prototype.isLocked=function(){return this._semaphore.isLocked()},t.prototype.release=function(){this._semaphore.release()},t}();uc.default=V2;var Yi={};Object.defineProperty(Yi,"__esModule",{value:!0});Yi.withTimeout=void 0;var zn=lc;function z2(t,e,r){var n=this;return r===void 0&&(r=new Error("timeout")),{acquire:function(){return new Promise(function(i,s){return zn.__awaiter(n,void 0,void 0,function(){var o,a,c;return zn.__generator(this,function(u){switch(u.label){case 0:return o=!1,setTimeout(function(){o=!0,s(r)},e),[4,t.acquire()];case 1:return a=u.sent(),o?(c=Array.isArray(a)?a[1]:a,c()):i(a),[2]}})})})},runExclusive:function(i){return zn.__awaiter(this,void 0,void 0,function(){var s,o;return zn.__generator(this,function(a){switch(a.label){case 0:s=function(){},a.label=1;case 1:return a.trys.push([1,,7,8]),[4,this.acquire()];case 2:return o=a.sent(),Array.isArray(o)?(s=o[1],[4,i(o[0])]):[3,4];case 3:return[2,a.sent()];case 4:return s=o,[4,i()];case 5:return[2,a.sent()];case 6:return[3,8];case 7:return s(),[7];case 8:return[2]}})})},release:function(){t.release()},isLocked:function(){return t.isLocked()}}}Yi.withTimeout=z2;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.withTimeout=t.Semaphore=t.Mutex=void 0;var e=uc;Object.defineProperty(t,"Mutex",{enumerable:!0,get:function(){return e.default}});var r=Zi;Object.defineProperty(t,"Semaphore",{enumerable:!0,get:function(){return r.default}});var n=Yi;Object.defineProperty(t,"withTimeout",{enumerable:!0,get:function(){return n.withTimeout}})})(Bh);const Wu=(t,e,r,n)=>function(...i){const s=e.promiseModule;return new s((o,a)=>{e.multiArgs?i.push((...u)=>{e.errorFirst?u[0]?a(u):(u.shift(),o(u)):o(u)}):e.errorFirst?i.push((u,l)=>{u?a(u):o(l)}):i.push(o),Reflect.apply(t,this===r?n:this,i)})},Uu=new WeakMap;var q2=(t,e)=>{e={exclude:[/.+(?:Sync|Stream)$/],errorFirst:!0,promiseModule:Promise,...e};const r=typeof t;if(!(t!==null&&(r==="object"||r==="function")))throw new TypeError(`Expected \`input\` to be a \`Function\` or \`Object\`, got \`${t===null?"null":r}\``);const n=(o,a)=>{let c=Uu.get(o);if(c||(c={},Uu.set(o,c)),a in c)return c[a];const u=y=>typeof y=="string"||typeof a=="symbol"?a===y:y.test(a),l=Reflect.getOwnPropertyDescriptor(o,a),g=l===void 0||l.writable||l.configurable,p=(e.include?e.include.some(u):!e.exclude.some(u))&&g;return c[a]=p,p},i=new WeakMap,s=new Proxy(t,{apply(o,a,c){const u=i.get(o);if(u)return Reflect.apply(u,a,c);const l=e.excludeMain?o:Wu(o,e,s,o);return i.set(o,l),Reflect.apply(l,a,c)},get(o,a){const c=o[a];if(!n(o,a)||c===Function.prototype[a])return c;const u=i.get(c);if(u)return u;if(typeof c=="function"){const l=Wu(c,e,s,o);return i.set(c,l),l}return c}});return s};const G2=Dr.default;class Q2 extends G2{constructor(){super(),this.updates=[]}async initialize(){}async update(){throw new Error("BaseFilter - no update method specified")}addResults(e){this.updates=this.updates.concat(e),e.forEach(r=>this.emit("update",r))}addInitialResults(e){}getChangesAndClear(){const e=this.updates;return this.updates=[],e}}var fc=Q2;const Z2=fc;class Y2 extends Z2{constructor(){super(),this.allResults=[]}async update(){throw new Error("BaseFilterWithHistory - no update method specified")}addResults(e){this.allResults=this.allResults.concat(e),super.addResults(e)}addInitialResults(e){this.allResults=this.allResults.concat(e),super.addInitialResults(e)}getAllResults(){return this.allResults}}var K2=Y2,Pn={minBlockRef:J2,maxBlockRef:X2,sortBlockRefs:hc,bnToHex:eS,blockRefIsNumber:tS,hexToInt:gi,incrementHexInt:rS,intToHex:Fh,unsafeRandomBytes:nS};function J2(...t){return hc(t)[0]}function X2(...t){const e=hc(t);return e[e.length-1]}function hc(t){return t.sort((e,r)=>e==="latest"||r==="earliest"?1:r==="latest"||e==="earliest"?-1:gi(e)-gi(r))}function eS(t){return"0x"+t.toString(16)}function tS(t){return t&&!["earliest","latest","pending"].includes(t)}function gi(t){return t==null?t:Number.parseInt(t,16)}function rS(t){if(t==null)return t;const e=gi(t);return Fh(e+1)}function Fh(t){if(t==null)return t;let e=t.toString(16);return e.length%2&&(e="0"+e),"0x"+e}function nS(t){let e="0x";for(let r=0;r<t;r++)e+=Hu(),e+=Hu();return e}function Hu(){return Math.floor(Math.random()*16).toString(16)}const iS=Ew,sS=q2,oS=K2,{bnToHex:y3,hexToInt:qn,incrementHexInt:aS,minBlockRef:cS,blockRefIsNumber:uS}=Pn;class lS extends oS{constructor({provider:e,params:r}){super(),this.type="log",this.ethQuery=new iS(e),this.params=Object.assign({fromBlock:"latest",toBlock:"latest",address:void 0,topics:[]},r),this.params.address&&(Array.isArray(this.params.address)||(this.params.address=[this.params.address]),this.params.address=this.params.address.map(n=>n.toLowerCase()))}async initialize({currentBlock:e}){let r=this.params.fromBlock;["latest","pending"].includes(r)&&(r=e),r==="earliest"&&(r="0x0"),this.params.fromBlock=r;const n=cS(this.params.toBlock,e),i=Object.assign({},this.params,{toBlock:n}),s=await this._fetchLogs(i);this.addInitialResults(s)}async update({oldBlock:e,newBlock:r}){const n=r;let i;e?i=aS(e):i=r;const s=Object.assign({},this.params,{fromBlock:i,toBlock:n}),a=(await this._fetchLogs(s)).filter(c=>this.matchLog(c));this.addResults(a)}async _fetchLogs(e){return await sS(n=>this.ethQuery.getLogs(e,n))()}matchLog(e){if(qn(this.params.fromBlock)>=qn(e.blockNumber)||uS(this.params.toBlock)&&qn(this.params.toBlock)<=qn(e.blockNumber))return!1;const r=e.address&&e.address.toLowerCase();return this.params.address&&r&&!this.params.address.includes(r)?!1:this.params.topics.every((i,s)=>{let o=e.topics[s];if(!o)return!1;o=o.toLowerCase();let a=Array.isArray(i)?i:[i];return a.includes(null)?!0:(a=a.map(l=>l.toLowerCase()),a.includes(o))})}}var fS=lS,dc=hS;async function hS({provider:t,fromBlock:e,toBlock:r}){e||(e=r);const n=Vu(e),s=Vu(r)-n+1,o=Array(s).fill().map((c,u)=>n+u).map(dS);return await Promise.all(o.map(c=>pS(t,"eth_getBlockByNumber",[c,!1])))}function Vu(t){return t==null?t:Number.parseInt(t,16)}function dS(t){return t==null?t:"0x"+t.toString(16)}function pS(t,e,r){return new Promise((n,i)=>{t.sendAsync({id:1,jsonrpc:"2.0",method:e,params:r},(s,o)=>{if(s)return i(s);n(o.result)})})}const bS=fc,gS=dc,{incrementHexInt:yS}=Pn;class vS extends bS{constructor({provider:e,params:r}){super(),this.type="block",this.provider=e}async update({oldBlock:e,newBlock:r}){const n=r,i=yS(e),o=(await gS({provider:this.provider,fromBlock:i,toBlock:n})).map(a=>a.hash);this.addResults(o)}}var mS=vS;const _S=fc,wS=dc,{incrementHexInt:SS}=Pn;class ES extends _S{constructor({provider:e}){super(),this.type="tx",this.provider=e}async update({oldBlock:e}){const r=e,n=SS(e),i=await wS({provider:this.provider,fromBlock:n,toBlock:r}),s=[];for(const o of i)s.push(...o.transactions);this.addResults(s)}}var xS=ES;const CS=Bh.Mutex,{createAsyncMiddleware:kS}=oc,AS=sc.exports,MS=fS,IS=mS,RS=xS,{intToHex:$h,hexToInt:Zo}=Pn;var TS=OS;function OS({blockTracker:t,provider:e}){let r=0,n={};const i=new CS,s=NS({mutex:i}),o=AS({eth_newFilter:s(Yo(c)),eth_newBlockFilter:s(Yo(u)),eth_newPendingTransactionFilter:s(Yo(l)),eth_uninstallFilter:s(ri(p)),eth_getFilterChanges:s(ri(g)),eth_getFilterLogs:s(ri(f))}),a=async({oldBlock:v,newBlock:w})=>{if(n.length===0)return;const A=await i.acquire();try{await Promise.all(lr(n).map(async N=>{try{await N.update({oldBlock:v,newBlock:w})}catch(F){console.error(F)}}))}catch(N){console.error(N)}A()};return o.newLogFilter=c,o.newBlockFilter=u,o.newPendingTransactionFilter=l,o.uninstallFilter=p,o.getFilterChanges=g,o.getFilterLogs=f,o.destroy=()=>{k()},o;async function c(v){const w=new MS({provider:e,params:v});return await y(w),w}async function u(){const v=new IS({provider:e});return await y(v),v}async function l(){const v=new RS({provider:e});return await y(v),v}async function g(v){const w=Zo(v),A=n[w];if(!A)throw new Error(`No filter for index "${w}"`);return A.getChangesAndClear()}async function f(v){const w=Zo(v),A=n[w];if(!A)throw new Error(`No filter for index "${w}"`);return A.type==="log"?results=A.getAllResults():results=[],results}async function p(v){const w=Zo(v),A=n[w],N=Boolean(A);return N&&await E(w),N}async function y(v){const w=lr(n).length,A=await t.getLatestBlock();await v.initialize({currentBlock:A}),r++,n[r]=v,v.id=r,v.idHex=$h(r);const N=lr(n).length;return b({prevFilterCount:w,newFilterCount:N}),r}async function E(v){const w=lr(n).length;delete n[v];const A=lr(n).length;b({prevFilterCount:w,newFilterCount:A})}async function k(){const v=lr(n).length;n={},b({prevFilterCount:v,newFilterCount:0})}function b({prevFilterCount:v,newFilterCount:w}){if(v===0&&w>0){t.on("sync",a);return}if(v>0&&w===0){t.removeListener("sync",a);return}}}function Yo(t){return ri(async(...e)=>{const r=await t(...e);return $h(r.id)})}function ri(t){return kS(async(e,r)=>{const n=await t.apply(null,e.params);r.result=n})}function NS({mutex:t}){return e=>async(r,n,i,s)=>{(await t.acquire())(),e(r,n,i,s)}}function lr(t,e){const r=[];for(let n in t)r.push(t[n]);return r}const LS=Dr.default,PS=sc.exports,{createAsyncMiddleware:zu}=oc,DS=TS,{unsafeRandomBytes:jS,incrementHexInt:BS}=Pn,FS=dc;var $S=WS;function WS({blockTracker:t,provider:e}){const r={},n=DS({blockTracker:t,provider:e});let i=!1;const s=new LS,o=PS({eth_subscribe:zu(a),eth_unsubscribe:zu(c)});return o.destroy=l,{events:s,middleware:o};async function a(g,f){if(i)throw new Error("SubscriptionManager - attempting to use after destroying");const p=g.params[0],y=jS(16);let E;switch(p){case"newHeads":E=k({subId:y});break;case"logs":const v=g.params[1],w=await n.newLogFilter(v);E=b({subId:y,filter:w});break;default:throw new Error(`SubscriptionManager - unsupported subscription type "${p}"`)}r[y]=E,f.result=y;return;function k({subId:v}){const w={type:p,destroy:async()=>{t.removeListener("sync",w.update)},update:async({oldBlock:A,newBlock:N})=>{const F=N,$=BS(A);(await FS({provider:e,fromBlock:$,toBlock:F})).map(US).forEach(ie=>{u(v,ie)})}};return t.on("sync",w.update),w}function b({subId:v,filter:w}){return w.on("update",N=>u(v,N)),{type:p,destroy:async()=>await n.uninstallFilter(w.idHex)}}}async function c(g,f){if(i)throw new Error("SubscriptionManager - attempting to use after destroying");const p=g.params[0],y=r[p];if(!y){f.result=!1;return}delete r[p],await y.destroy(),f.result=!0}function u(g,f){s.emit("notification",{jsonrpc:"2.0",method:"eth_subscription",params:{subscription:g,result:f}})}function l(){s.removeAllListeners();for(const g in r)r[g].destroy(),delete r[g];i=!0}}function US(t){return{hash:t.hash,parentHash:t.parentHash,sha3Uncles:t.sha3Uncles,miner:t.miner,stateRoot:t.stateRoot,transactionsRoot:t.transactionsRoot,receiptsRoot:t.receiptsRoot,logsBloom:t.logsBloom,difficulty:t.difficulty,number:t.number,gasLimit:t.gasLimit,gasUsed:t.gasUsed,nonce:t.nonce,mixHash:t.mixHash,timestamp:t.timestamp,extraData:t.extraData}}Object.defineProperty(Wi,"__esModule",{value:!0});Wi.SubscriptionManager=void 0;const HS=A2,VS=$S,qu=()=>{};class zS{constructor(e){const r=new HS({provider:e,pollingInterval:15e3,setSkipCacheFlag:!0}),{events:n,middleware:i}=VS({blockTracker:r,provider:e});this.events=n,this.subscriptionMiddleware=i}async handleRequest(e){const r={};return await this.subscriptionMiddleware(e,r,qu,qu),r}destroy(){this.subscriptionMiddleware.destroy()}}Wi.SubscriptionManager=zS;var pc=Q&&Q.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Sr,"__esModule",{value:!0});Sr.CoinbaseWalletProvider=void 0;const qS=pc(Dr),GS=pc(wi.exports),Oe=ki,Ko=jr,Gu=Br,Qu=it,Y=B,Jo=pc(fw),QS=Tr,ae=dh,ZS=Wi,Zu="DefaultChainId",Yu="DefaultJsonRpcUrl";class YS extends qS.default{constructor(e){var r,n;super(),this._filterPolyfill=new QS.FilterPolyfill(this),this._subscriptionManager=new ZS.SubscriptionManager(this),this._relay=null,this._addresses=[],this.hasMadeFirstChainChangedEmission=!1,this._send=this.send.bind(this),this._sendAsync=this.sendAsync.bind(this),this.setProviderInfo=this.setProviderInfo.bind(this),this.updateProviderInfo=this.updateProviderInfo.bind(this),this.getChainId=this.getChainId.bind(this),this.setAppInfo=this.setAppInfo.bind(this),this.enable=this.enable.bind(this),this.close=this.close.bind(this),this.send=this.send.bind(this),this.sendAsync=this.sendAsync.bind(this),this.request=this.request.bind(this),this._setAddresses=this._setAddresses.bind(this),this.scanQRCode=this.scanQRCode.bind(this),this.genericRequest=this.genericRequest.bind(this),this._chainIdFromOpts=e.chainId,this._jsonRpcUrlFromOpts=e.jsonRpcUrl,this._overrideIsMetaMask=e.overrideIsMetaMask,this._relayProvider=e.relayProvider,this._storage=e.storage,this._relayEventManager=e.relayEventManager,this.diagnostic=e.diagnosticLogger,this.reloadOnDisconnect=!0,this.isCoinbaseWallet=(r=e.overrideIsCoinbaseWallet)!==null&&r!==void 0?r:!0,this.isCoinbaseBrowser=(n=e.overrideIsCoinbaseBrowser)!==null&&n!==void 0?n:!1,this.qrUrl=e.qrUrl,this.supportsAddressSwitching=e.supportsAddressSwitching,this.isLedger=e.isLedger;const i=this.getChainId(),s=(0,Y.prepend0x)(i.toString(16));this.emit("connect",{chainIdStr:s});const o=this._storage.getItem(Qu.LOCAL_STORAGE_ADDRESSES_KEY);if(o){const a=o.split(" ");a[0]!==""&&(this._addresses=a.map(c=>(0,Y.ensureAddressString)(c)),this.emit("accountsChanged",a))}this._subscriptionManager.events.on("notification",a=>{this.emit("message",{type:a.method,data:a.params})}),this._addresses.length>0&&this.initializeRelay(),window.addEventListener("message",a=>{var c;if(!(a.origin!==location.origin||a.source!==window)&&a.data.type==="walletLinkMessage"){if(a.data.data.action==="defaultChainChanged"||a.data.data.action==="dappChainSwitched"){const u=a.data.data.chainId,l=(c=a.data.data.jsonRpcUrl)!==null&&c!==void 0?c:this.jsonRpcUrl;this.updateProviderInfo(l,Number(u))}a.data.data.action==="addressChanged"&&this._setAddresses([a.data.data.address])}})}get selectedAddress(){return this._addresses[0]||void 0}get networkVersion(){return this.getChainId().toString(10)}get chainId(){return(0,Y.prepend0x)(this.getChainId().toString(16))}get isWalletLink(){return!0}get isMetaMask(){return this._overrideIsMetaMask}get host(){return this.jsonRpcUrl}get connected(){return!0}isConnected(){return!0}get jsonRpcUrl(){var e;return(e=this._storage.getItem(Yu))!==null&&e!==void 0?e:this._jsonRpcUrlFromOpts}set jsonRpcUrl(e){this._storage.setItem(Yu,e)}disableReloadOnDisconnect(){this.reloadOnDisconnect=!1}setProviderInfo(e,r){this.isLedger||this.isCoinbaseBrowser||(this._chainIdFromOpts=r,this._jsonRpcUrlFromOpts=e),this.updateProviderInfo(this.jsonRpcUrl,this.getChainId())}updateProviderInfo(e,r){this.jsonRpcUrl=e;const n=this.getChainId();this._storage.setItem(Zu,r.toString(10)),((0,Y.ensureIntNumber)(r)!==n||!this.hasMadeFirstChainChangedEmission)&&(this.emit("chainChanged",this.getChainId()),this.hasMadeFirstChainChangedEmission=!0)}async watchAsset(e,r,n,i,s,o){return!!(await(await this.initializeRelay()).watchAsset(e,r,n,i,s,o==null?void 0:o.toString()).promise).result}async addEthereumChain(e,r,n,i,s,o){var a,c;if((0,Y.ensureIntNumber)(e)===this.getChainId())return!1;const u=await this.initializeRelay(),l=u.inlineAddEthereumChain(e.toString());!this._isAuthorized()&&!l&&await u.requestEthereumAccounts().promise;const g=await u.addEthereumChain(e.toString(),r,s,n,i,o).promise;return((a=g.result)===null||a===void 0?void 0:a.isApproved)===!0&&this.updateProviderInfo(r[0],e),((c=g.result)===null||c===void 0?void 0:c.isApproved)===!0}async switchEthereumChain(e){const n=await(await this.initializeRelay()).switchEthereumChain(e.toString(10),this.selectedAddress||void 0).promise;if(n.errorCode)throw Oe.ethErrors.provider.custom({code:n.errorCode});const i=n.result;i.isApproved&&i.rpcUrl.length>0&&this.updateProviderInfo(i.rpcUrl,e)}setAppInfo(e,r){this.initializeRelay().then(n=>n.setAppInfo(e,r))}async enable(){var e;return(e=this.diagnostic)===null||e===void 0||e.log(Ko.EVENTS.ETH_ACCOUNTS_STATE,{method:"provider::enable",addresses_length:this._addresses.length,sessionIdHash:this._relay?Gu.Session.hash(this._relay.session.id):void 0}),this._addresses.length>0?[...this._addresses]:await this._send(ae.JSONRPCMethod.eth_requestAccounts)}async close(){(await this.initializeRelay()).resetAndReload()}send(e,r){if(typeof e=="string"){const i=e,s=Array.isArray(r)?r:r!==void 0?[r]:[],o={jsonrpc:"2.0",id:0,method:i,params:s};return this._sendRequestAsync(o).then(a=>a.result)}if(typeof r=="function"){const i=e,s=r;return this._sendAsync(i,s)}if(Array.isArray(e))return e.map(s=>this._sendRequest(s));const n=e;return this._sendRequest(n)}async sendAsync(e,r){if(typeof r!="function")throw new Error("callback is required");if(Array.isArray(e)){const i=r;this._sendMultipleRequestsAsync(e).then(s=>i(null,s)).catch(s=>i(s,null));return}const n=r;return this._sendRequestAsync(e).then(i=>n(null,i)).catch(i=>n(i,null))}async request(e){if(!e||typeof e!="object"||Array.isArray(e))throw Oe.ethErrors.rpc.invalidRequest({message:"Expected a single, non-array, object argument.",data:e});const{method:r,params:n}=e;if(typeof r!="string"||r.length===0)throw Oe.ethErrors.rpc.invalidRequest({message:"'args.method' must be a non-empty string.",data:e});if(n!==void 0&&!Array.isArray(n)&&(typeof n!="object"||n===null))throw Oe.ethErrors.rpc.invalidRequest({message:"'args.params' must be an object or array if provided.",data:e});const i=n===void 0?[]:n,s=this._relayEventManager.makeRequestId();return(await this._sendRequestAsync({method:r,params:i,jsonrpc:"2.0",id:s})).result}async scanQRCode(e){const n=await(await this.initializeRelay()).scanQRCode((0,Y.ensureRegExpString)(e)).promise;if(typeof n.result!="string")throw new Error("result was not a string");return n.result}async genericRequest(e,r){const i=await(await this.initializeRelay()).genericRequest(e,r).promise;if(typeof i.result!="string")throw new Error("result was not a string");return i.result}async selectProvider(e){const n=await(await this.initializeRelay()).selectProvider(e).promise;if(typeof n.result!="string")throw new Error("result was not a string");return n.result}supportsSubscriptions(){return!1}subscribe(){throw new Error("Subscriptions are not supported")}unsubscribe(){throw new Error("Subscriptions are not supported")}disconnect(){return!0}_sendRequest(e){const r={jsonrpc:"2.0",id:e.id},{method:n}=e;if(r.result=this._handleSynchronousMethods(e),r.result===void 0)throw new Error(`Coinbase Wallet does not support calling ${n} synchronously without a callback. Please provide a callback parameter to call ${n} asynchronously.`);return r}_setAddresses(e,r){if(!Array.isArray(e))throw new Error("addresses is not an array");const n=e.map(i=>(0,Y.ensureAddressString)(i));JSON.stringify(n)!==JSON.stringify(this._addresses)&&(this._addresses.length>0&&this.supportsAddressSwitching===!1&&!r||(this._addresses=n,this.emit("accountsChanged",this._addresses),this._storage.setItem(Qu.LOCAL_STORAGE_ADDRESSES_KEY,n.join(" "))))}_sendRequestAsync(e){return new Promise((r,n)=>{try{const i=this._handleSynchronousMethods(e);if(i!==void 0)return r({jsonrpc:"2.0",id:e.id,result:i});const s=this._handleAsynchronousFilterMethods(e);if(s!==void 0){s.then(a=>r(Object.assign(Object.assign({},a),{id:e.id}))).catch(a=>n(a));return}const o=this._handleSubscriptionMethods(e);if(o!==void 0){o.then(a=>r({jsonrpc:"2.0",id:e.id,result:a.result})).catch(a=>n(a));return}}catch(i){return n(i)}this._handleAsynchronousMethods(e).then(i=>i&&r(Object.assign(Object.assign({},i),{id:e.id}))).catch(i=>n(i))})}_sendMultipleRequestsAsync(e){return Promise.all(e.map(r=>this._sendRequestAsync(r)))}_handleSynchronousMethods(e){const{method:r}=e,n=e.params||[];switch(r){case ae.JSONRPCMethod.eth_accounts:return this._eth_accounts();case ae.JSONRPCMethod.eth_coinbase:return this._eth_coinbase();case ae.JSONRPCMethod.eth_uninstallFilter:return this._eth_uninstallFilter(n);case ae.JSONRPCMethod.net_version:return this._net_version();case ae.JSONRPCMethod.eth_chainId:return this._eth_chainId();default:return}}async _handleAsynchronousMethods(e){const{method:r}=e,n=e.params||[];switch(r){case ae.JSONRPCMethod.eth_requestAccounts:return this._eth_requestAccounts();case ae.JSONRPCMethod.eth_sign:return this._eth_sign(n);case ae.JSONRPCMethod.eth_ecRecover:return this._eth_ecRecover(n);case ae.JSONRPCMethod.personal_sign:return this._personal_sign(n);case ae.JSONRPCMethod.personal_ecRecover:return this._personal_ecRecover(n);case ae.JSONRPCMethod.eth_signTransaction:return this._eth_signTransaction(n);case ae.JSONRPCMethod.eth_sendRawTransaction:return this._eth_sendRawTransaction(n);case ae.JSONRPCMethod.eth_sendTransaction:return this._eth_sendTransaction(n);case ae.JSONRPCMethod.eth_signTypedData_v1:return this._eth_signTypedData_v1(n);case ae.JSONRPCMethod.eth_signTypedData_v2:return this._throwUnsupportedMethodError();case ae.JSONRPCMethod.eth_signTypedData_v3:return this._eth_signTypedData_v3(n);case ae.JSONRPCMethod.eth_signTypedData_v4:case ae.JSONRPCMethod.eth_signTypedData:return this._eth_signTypedData_v4(n);case ae.JSONRPCMethod.cbWallet_arbitrary:return this._cbwallet_arbitrary(n);case ae.JSONRPCMethod.wallet_addEthereumChain:return this._wallet_addEthereumChain(n);case ae.JSONRPCMethod.wallet_switchEthereumChain:return this._wallet_switchEthereumChain(n);case ae.JSONRPCMethod.wallet_watchAsset:return this._wallet_watchAsset(n)}return(await this.initializeRelay()).makeEthereumJSONRPCRequest(e,this.jsonRpcUrl)}_handleAsynchronousFilterMethods(e){const{method:r}=e,n=e.params||[];switch(r){case ae.JSONRPCMethod.eth_newFilter:return this._eth_newFilter(n);case ae.JSONRPCMethod.eth_newBlockFilter:return this._eth_newBlockFilter();case ae.JSONRPCMethod.eth_newPendingTransactionFilter:return this._eth_newPendingTransactionFilter();case ae.JSONRPCMethod.eth_getFilterChanges:return this._eth_getFilterChanges(n);case ae.JSONRPCMethod.eth_getFilterLogs:return this._eth_getFilterLogs(n)}}_handleSubscriptionMethods(e){switch(e.method){case ae.JSONRPCMethod.eth_subscribe:case ae.JSONRPCMethod.eth_unsubscribe:return this._subscriptionManager.handleRequest(e)}}_isKnownAddress(e){try{const r=(0,Y.ensureAddressString)(e);return this._addresses.map(i=>(0,Y.ensureAddressString)(i)).includes(r)}catch{}return!1}_ensureKnownAddress(e){var r;if(!this._isKnownAddress(e))throw(r=this.diagnostic)===null||r===void 0||r.log(Ko.EVENTS.UNKNOWN_ADDRESS_ENCOUNTERED),new Error("Unknown Ethereum address")}_prepareTransactionParams(e){const r=e.from?(0,Y.ensureAddressString)(e.from):this.selectedAddress;if(!r)throw new Error("Ethereum address is unavailable");this._ensureKnownAddress(r);const n=e.to?(0,Y.ensureAddressString)(e.to):null,i=e.value!=null?(0,Y.ensureBN)(e.value):new GS.default(0),s=e.data?(0,Y.ensureBuffer)(e.data):Buffer.alloc(0),o=e.nonce!=null?(0,Y.ensureIntNumber)(e.nonce):null,a=e.gasPrice!=null?(0,Y.ensureBN)(e.gasPrice):null,c=e.maxFeePerGas!=null?(0,Y.ensureBN)(e.maxFeePerGas):null,u=e.maxPriorityFeePerGas!=null?(0,Y.ensureBN)(e.maxPriorityFeePerGas):null,l=e.gas!=null?(0,Y.ensureBN)(e.gas):null,g=this.getChainId();return{fromAddress:r,toAddress:n,weiValue:i,data:s,nonce:o,gasPriceInWei:a,maxFeePerGas:c,maxPriorityFeePerGas:u,gasLimit:l,chainId:g}}_isAuthorized(){return this._addresses.length>0}_requireAuthorization(){if(!this._isAuthorized())throw Oe.ethErrors.provider.unauthorized({})}_throwUnsupportedMethodError(){throw Oe.ethErrors.provider.unsupportedMethod({})}async _signEthereumMessage(e,r,n,i){this._ensureKnownAddress(r);try{return{jsonrpc:"2.0",id:0,result:(await(await this.initializeRelay()).signEthereumMessage(e,r,n,i).promise).result}}catch(s){throw typeof s.message=="string"&&s.message.match(/(denied|rejected)/i)?Oe.ethErrors.provider.userRejectedRequest("User denied message signature"):s}}async _ethereumAddressFromSignedMessage(e,r,n){return{jsonrpc:"2.0",id:0,result:(await(await this.initializeRelay()).ethereumAddressFromSignedMessage(e,r,n).promise).result}}_eth_accounts(){return[...this._addresses]}_eth_coinbase(){return this.selectedAddress||null}_net_version(){return this.getChainId().toString(10)}_eth_chainId(){return(0,Y.hexStringFromIntNumber)(this.getChainId())}getChainId(){const e=this._storage.getItem(Zu);if(!e)return(0,Y.ensureIntNumber)(this._chainIdFromOpts);const r=parseInt(e,10);return(0,Y.ensureIntNumber)(r)}async _eth_requestAccounts(){var e;if((e=this.diagnostic)===null||e===void 0||e.log(Ko.EVENTS.ETH_ACCOUNTS_STATE,{method:"provider::_eth_requestAccounts",addresses_length:this._addresses.length,sessionIdHash:this._relay?Gu.Session.hash(this._relay.session.id):void 0}),this._addresses.length>0)return Promise.resolve({jsonrpc:"2.0",id:0,result:this._addresses});let r;try{r=await(await this.initializeRelay()).requestEthereumAccounts().promise}catch(n){throw typeof n.message=="string"&&n.message.match(/(denied|rejected)/i)?Oe.ethErrors.provider.userRejectedRequest("User denied account authorization"):n}if(!r.result)throw new Error("accounts received is empty");return this._setAddresses(r.result),this.isLedger||this.isCoinbaseBrowser||await this.switchEthereumChain(this.getChainId()),{jsonrpc:"2.0",id:0,result:this._addresses}}_eth_sign(e){this._requireAuthorization();const r=(0,Y.ensureAddressString)(e[0]),n=(0,Y.ensureBuffer)(e[1]);return this._signEthereumMessage(n,r,!1)}_eth_ecRecover(e){const r=(0,Y.ensureBuffer)(e[0]),n=(0,Y.ensureBuffer)(e[1]);return this._ethereumAddressFromSignedMessage(r,n,!1)}_personal_sign(e){this._requireAuthorization();const r=(0,Y.ensureBuffer)(e[0]),n=(0,Y.ensureAddressString)(e[1]);return this._signEthereumMessage(r,n,!0)}_personal_ecRecover(e){const r=(0,Y.ensureBuffer)(e[0]),n=(0,Y.ensureBuffer)(e[1]);return this._ethereumAddressFromSignedMessage(r,n,!0)}async _eth_signTransaction(e){this._requireAuthorization();const r=this._prepareTransactionParams(e[0]||{});try{return{jsonrpc:"2.0",id:0,result:(await(await this.initializeRelay()).signEthereumTransaction(r).promise).result}}catch(n){throw typeof n.message=="string"&&n.message.match(/(denied|rejected)/i)?Oe.ethErrors.provider.userRejectedRequest("User denied transaction signature"):n}}async _eth_sendRawTransaction(e){const r=(0,Y.ensureBuffer)(e[0]);return{jsonrpc:"2.0",id:0,result:(await(await this.initializeRelay()).submitEthereumTransaction(r,this.getChainId()).promise).result}}async _eth_sendTransaction(e){this._requireAuthorization();const r=this._prepareTransactionParams(e[0]||{});try{return{jsonrpc:"2.0",id:0,result:(await(await this.initializeRelay()).signAndSubmitEthereumTransaction(r).promise).result}}catch(n){throw typeof n.message=="string"&&n.message.match(/(denied|rejected)/i)?Oe.ethErrors.provider.userRejectedRequest("User denied transaction signature"):n}}async _eth_signTypedData_v1(e){this._requireAuthorization();const r=(0,Y.ensureParsedJSONObject)(e[0]),n=(0,Y.ensureAddressString)(e[1]);this._ensureKnownAddress(n);const i=Jo.default.hashForSignTypedDataLegacy({data:r}),s=JSON.stringify(r,null,2);return this._signEthereumMessage(i,n,!1,s)}async _eth_signTypedData_v3(e){this._requireAuthorization();const r=(0,Y.ensureAddressString)(e[0]),n=(0,Y.ensureParsedJSONObject)(e[1]);this._ensureKnownAddress(r);const i=Jo.default.hashForSignTypedData_v3({data:n}),s=JSON.stringify(n,null,2);return this._signEthereumMessage(i,r,!1,s)}async _eth_signTypedData_v4(e){this._requireAuthorization();const r=(0,Y.ensureAddressString)(e[0]),n=(0,Y.ensureParsedJSONObject)(e[1]);this._ensureKnownAddress(r);const i=Jo.default.hashForSignTypedData_v4({data:n}),s=JSON.stringify(n,null,2);return this._signEthereumMessage(i,r,!1,s)}async _cbwallet_arbitrary(e){const r=e[0],n=e[1];if(typeof n!="string")throw new Error("parameter must be a string");if(typeof r!="object"||r===null)throw new Error("parameter must be an object");return{jsonrpc:"2.0",id:0,result:await this.genericRequest(r,n)}}async _wallet_addEthereumChain(e){var r,n,i,s;const o=e[0];if(((r=o.rpcUrls)===null||r===void 0?void 0:r.length)===0)return{jsonrpc:"2.0",id:0,error:{code:2,message:"please pass in at least 1 rpcUrl"}};if(!o.chainName||o.chainName.trim()==="")throw Oe.ethErrors.provider.custom({code:0,message:"chainName is a required field"});if(!o.nativeCurrency)throw Oe.ethErrors.provider.custom({code:0,message:"nativeCurrency is a required field"});const a=parseInt(o.chainId,16);return await this.addEthereumChain(a,(n=o.rpcUrls)!==null&&n!==void 0?n:[],(i=o.blockExplorerUrls)!==null&&i!==void 0?i:[],o.chainName,(s=o.iconUrls)!==null&&s!==void 0?s:[],o.nativeCurrency)?{jsonrpc:"2.0",id:0,result:null}:{jsonrpc:"2.0",id:0,error:{code:2,message:"unable to add ethereum chain"}}}async _wallet_switchEthereumChain(e){const r=e[0];return await this.switchEthereumChain(parseInt(r.chainId,16)),{jsonrpc:"2.0",id:0,result:null}}async _wallet_watchAsset(e){const r=Array.isArray(e)?e[0]:e;if(!r.type)throw Oe.ethErrors.rpc.invalidParams({message:"Type is required"});if((r==null?void 0:r.type)!=="ERC20")throw Oe.ethErrors.rpc.invalidParams({message:`Asset of type '${r.type}' is not supported`});if(!(r!=null&&r.options))throw Oe.ethErrors.rpc.invalidParams({message:"Options are required"});if(!(r!=null&&r.options.address))throw Oe.ethErrors.rpc.invalidParams({message:"Address is required"});const n=this.getChainId(),{address:i,symbol:s,image:o,decimals:a}=r.options;return{jsonrpc:"2.0",id:0,result:await this.watchAsset(r.type,i,s,a,o,n)}}_eth_uninstallFilter(e){const r=(0,Y.ensureHexString)(e[0]);return this._filterPolyfill.uninstallFilter(r)}async _eth_newFilter(e){const r=e[0];return{jsonrpc:"2.0",id:0,result:await this._filterPolyfill.newFilter(r)}}async _eth_newBlockFilter(){return{jsonrpc:"2.0",id:0,result:await this._filterPolyfill.newBlockFilter()}}async _eth_newPendingTransactionFilter(){return{jsonrpc:"2.0",id:0,result:await this._filterPolyfill.newPendingTransactionFilter()}}_eth_getFilterChanges(e){const r=(0,Y.ensureHexString)(e[0]);return this._filterPolyfill.getFilterChanges(r)}_eth_getFilterLogs(e){const r=(0,Y.ensureHexString)(e[0]);return this._filterPolyfill.getFilterLogs(r)}initializeRelay(){return this._relay?Promise.resolve(this._relay):this._relayProvider().then(e=>(e.setAccountsCallback((r,n)=>this._setAddresses(r,n)),e.setChainCallback((r,n)=>{this.updateProviderInfo(n,parseInt(r,10))}),e.setDappDefaultChainCallback(this._chainIdFromOpts),this._relay=e,e))}}Sr.CoinbaseWalletProvider=YS;var Ki={},Ji={},Dn,z,Wh,Uh,cn,Ku,Hh,yi={},Vh=[],KS=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function mt(t,e){for(var r in e)t[r]=e[r];return t}function zh(t){var e=t.parentNode;e&&e.removeChild(t)}function Ia(t,e,r){var n,i,s,o={};for(s in e)s=="key"?n=e[s]:s=="ref"?i=e[s]:o[s]=e[s];if(arguments.length>2&&(o.children=arguments.length>3?Dn.call(arguments,2):r),typeof t=="function"&&t.defaultProps!=null)for(s in t.defaultProps)o[s]===void 0&&(o[s]=t.defaultProps[s]);return un(t,o,n,i,null)}function un(t,e,r,n,i){var s={type:t,props:e,key:r,ref:n,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:i==null?++Wh:i};return i==null&&z.vnode!=null&&z.vnode(s),s}function JS(){return{current:null}}function jn(t){return t.children}function ln(t,e){this.props=t,this.context=e}function yn(t,e){if(e==null)return t.__?yn(t.__,t.__.__k.indexOf(t)+1):null;for(var r;e<t.__k.length;e++)if((r=t.__k[e])!=null&&r.__e!=null)return r.__e;return typeof t.type=="function"?yn(t):null}function qh(t){var e,r;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((r=t.__k[e])!=null&&r.__e!=null){t.__e=t.__c.base=r.__e;break}return qh(t)}}function Ra(t){(!t.__d&&(t.__d=!0)&&cn.push(t)&&!vi.__r++||Ku!==z.debounceRendering)&&((Ku=z.debounceRendering)||setTimeout)(vi)}function vi(){for(var t;vi.__r=cn.length;)t=cn.sort(function(e,r){return e.__v.__b-r.__v.__b}),cn=[],t.some(function(e){var r,n,i,s,o,a;e.__d&&(o=(s=(r=e).__v).__e,(a=r.__P)&&(n=[],(i=mt({},s)).__v=s.__v+1,bc(a,s,i,r.__n,a.ownerSVGElement!==void 0,s.__h!=null?[o]:null,n,o==null?yn(s):o,s.__h),Kh(n,s),s.__e!=o&&qh(s)))})}function Gh(t,e,r,n,i,s,o,a,c,u){var l,g,f,p,y,E,k,b=n&&n.__k||Vh,v=b.length;for(r.__k=[],l=0;l<e.length;l++)if((p=r.__k[l]=(p=e[l])==null||typeof p=="boolean"?null:typeof p=="string"||typeof p=="number"||typeof p=="bigint"?un(null,p,null,null,p):Array.isArray(p)?un(jn,{children:p},null,null,null):p.__b>0?un(p.type,p.props,p.key,p.ref?p.ref:null,p.__v):p)!=null){if(p.__=r,p.__b=r.__b+1,(f=b[l])===null||f&&p.key==f.key&&p.type===f.type)b[l]=void 0;else for(g=0;g<v;g++){if((f=b[g])&&p.key==f.key&&p.type===f.type){b[g]=void 0;break}f=null}bc(t,p,f=f||yi,i,s,o,a,c,u),y=p.__e,(g=p.ref)&&f.ref!=g&&(k||(k=[]),f.ref&&k.push(f.ref,null,p),k.push(g,p.__c||y,p)),y!=null?(E==null&&(E=y),typeof p.type=="function"&&p.__k===f.__k?p.__d=c=Qh(p,c,t):c=Yh(t,p,f,b,y,c),typeof r.type=="function"&&(r.__d=c)):c&&f.__e==c&&c.parentNode!=t&&(c=yn(f))}for(r.__e=E,l=v;l--;)b[l]!=null&&Xh(b[l],b[l]);if(k)for(l=0;l<k.length;l++)Jh(k[l],k[++l],k[++l])}function Qh(t,e,r){for(var n,i=t.__k,s=0;i&&s<i.length;s++)(n=i[s])&&(n.__=t,e=typeof n.type=="function"?Qh(n,e,r):Yh(r,n,n,i,n.__e,e));return e}function Zh(t,e){return e=e||[],t==null||typeof t=="boolean"||(Array.isArray(t)?t.some(function(r){Zh(r,e)}):e.push(t)),e}function Yh(t,e,r,n,i,s){var o,a,c;if(e.__d!==void 0)o=e.__d,e.__d=void 0;else if(r==null||i!=s||i.parentNode==null)e:if(s==null||s.parentNode!==t)t.appendChild(i),o=null;else{for(a=s,c=0;(a=a.nextSibling)&&c<n.length;c+=1)if(a==i)break e;t.insertBefore(i,s),o=s}return o!==void 0?o:i.nextSibling}function XS(t,e,r,n,i){var s;for(s in r)s==="children"||s==="key"||s in e||mi(t,s,null,r[s],n);for(s in e)i&&typeof e[s]!="function"||s==="children"||s==="key"||s==="value"||s==="checked"||r[s]===e[s]||mi(t,s,e[s],r[s],n)}function Ju(t,e,r){e[0]==="-"?t.setProperty(e,r):t[e]=r==null?"":typeof r!="number"||KS.test(e)?r:r+"px"}function mi(t,e,r,n,i){var s;e:if(e==="style")if(typeof r=="string")t.style.cssText=r;else{if(typeof n=="string"&&(t.style.cssText=n=""),n)for(e in n)r&&e in r||Ju(t.style,e,"");if(r)for(e in r)n&&r[e]===n[e]||Ju(t.style,e,r[e])}else if(e[0]==="o"&&e[1]==="n")s=e!==(e=e.replace(/Capture$/,"")),e=e.toLowerCase()in t?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+s]=r,r?n||t.addEventListener(e,s?el:Xu,s):t.removeEventListener(e,s?el:Xu,s);else if(e!=="dangerouslySetInnerHTML"){if(i)e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!=="href"&&e!=="list"&&e!=="form"&&e!=="tabIndex"&&e!=="download"&&e in t)try{t[e]=r==null?"":r;break e}catch{}typeof r=="function"||(r==null||r===!1&&e.indexOf("-")==-1?t.removeAttribute(e):t.setAttribute(e,r))}}function Xu(t){this.l[t.type+!1](z.event?z.event(t):t)}function el(t){this.l[t.type+!0](z.event?z.event(t):t)}function bc(t,e,r,n,i,s,o,a,c){var u,l,g,f,p,y,E,k,b,v,w,A,N,F,$,D=e.type;if(e.constructor!==void 0)return null;r.__h!=null&&(c=r.__h,a=e.__e=r.__e,e.__h=null,s=[a]),(u=z.__b)&&u(e);try{e:if(typeof D=="function"){if(k=e.props,b=(u=D.contextType)&&n[u.__c],v=u?b?b.props.value:u.__:n,r.__c?E=(l=e.__c=r.__c).__=l.__E:("prototype"in D&&D.prototype.render?e.__c=l=new D(k,v):(e.__c=l=new ln(k,v),l.constructor=D,l.render=tE),b&&b.sub(l),l.props=k,l.state||(l.state={}),l.context=v,l.__n=n,g=l.__d=!0,l.__h=[],l._sb=[]),l.__s==null&&(l.__s=l.state),D.getDerivedStateFromProps!=null&&(l.__s==l.state&&(l.__s=mt({},l.__s)),mt(l.__s,D.getDerivedStateFromProps(k,l.__s))),f=l.props,p=l.state,g)D.getDerivedStateFromProps==null&&l.componentWillMount!=null&&l.componentWillMount(),l.componentDidMount!=null&&l.__h.push(l.componentDidMount);else{if(D.getDerivedStateFromProps==null&&k!==f&&l.componentWillReceiveProps!=null&&l.componentWillReceiveProps(k,v),!l.__e&&l.shouldComponentUpdate!=null&&l.shouldComponentUpdate(k,l.__s,v)===!1||e.__v===r.__v){for(l.props=k,l.state=l.__s,e.__v!==r.__v&&(l.__d=!1),l.__v=e,e.__e=r.__e,e.__k=r.__k,e.__k.forEach(function(P){P&&(P.__=e)}),w=0;w<l._sb.length;w++)l.__h.push(l._sb[w]);l._sb=[],l.__h.length&&o.push(l);break e}l.componentWillUpdate!=null&&l.componentWillUpdate(k,l.__s,v),l.componentDidUpdate!=null&&l.__h.push(function(){l.componentDidUpdate(f,p,y)})}if(l.context=v,l.props=k,l.__v=e,l.__P=t,A=z.__r,N=0,"prototype"in D&&D.prototype.render){for(l.state=l.__s,l.__d=!1,A&&A(e),u=l.render(l.props,l.state,l.context),F=0;F<l._sb.length;F++)l.__h.push(l._sb[F]);l._sb=[]}else do l.__d=!1,A&&A(e),u=l.render(l.props,l.state,l.context),l.state=l.__s;while(l.__d&&++N<25);l.state=l.__s,l.getChildContext!=null&&(n=mt(mt({},n),l.getChildContext())),g||l.getSnapshotBeforeUpdate==null||(y=l.getSnapshotBeforeUpdate(f,p)),$=u!=null&&u.type===jn&&u.key==null?u.props.children:u,Gh(t,Array.isArray($)?$:[$],e,r,n,i,s,o,a,c),l.base=e.__e,e.__h=null,l.__h.length&&o.push(l),E&&(l.__E=l.__=null),l.__e=!1}else s==null&&e.__v===r.__v?(e.__k=r.__k,e.__e=r.__e):e.__e=eE(r.__e,e,r,n,i,s,o,c);(u=z.diffed)&&u(e)}catch(P){e.__v=null,(c||s!=null)&&(e.__e=a,e.__h=!!c,s[s.indexOf(a)]=null),z.__e(P,e,r)}}function Kh(t,e){z.__c&&z.__c(e,t),t.some(function(r){try{t=r.__h,r.__h=[],t.some(function(n){n.call(r)})}catch(n){z.__e(n,r.__v)}})}function eE(t,e,r,n,i,s,o,a){var c,u,l,g=r.props,f=e.props,p=e.type,y=0;if(p==="svg"&&(i=!0),s!=null){for(;y<s.length;y++)if((c=s[y])&&"setAttribute"in c==!!p&&(p?c.localName===p:c.nodeType===3)){t=c,s[y]=null;break}}if(t==null){if(p===null)return document.createTextNode(f);t=i?document.createElementNS("http://www.w3.org/2000/svg",p):document.createElement(p,f.is&&f),s=null,a=!1}if(p===null)g===f||a&&t.data===f||(t.data=f);else{if(s=s&&Dn.call(t.childNodes),u=(g=r.props||yi).dangerouslySetInnerHTML,l=f.dangerouslySetInnerHTML,!a){if(s!=null)for(g={},y=0;y<t.attributes.length;y++)g[t.attributes[y].name]=t.attributes[y].value;(l||u)&&(l&&(u&&l.__html==u.__html||l.__html===t.innerHTML)||(t.innerHTML=l&&l.__html||""))}if(XS(t,f,g,i,a),l)e.__k=[];else if(y=e.props.children,Gh(t,Array.isArray(y)?y:[y],e,r,n,i&&p!=="foreignObject",s,o,s?s[0]:r.__k&&yn(r,0),a),s!=null)for(y=s.length;y--;)s[y]!=null&&zh(s[y]);a||("value"in f&&(y=f.value)!==void 0&&(y!==t.value||p==="progress"&&!y||p==="option"&&y!==g.value)&&mi(t,"value",y,g.value,!1),"checked"in f&&(y=f.checked)!==void 0&&y!==t.checked&&mi(t,"checked",y,g.checked,!1))}return t}function Jh(t,e,r){try{typeof t=="function"?t(e):t.current=e}catch(n){z.__e(n,r)}}function Xh(t,e,r){var n,i;if(z.unmount&&z.unmount(t),(n=t.ref)&&(n.current&&n.current!==t.__e||Jh(n,null,e)),(n=t.__c)!=null){if(n.componentWillUnmount)try{n.componentWillUnmount()}catch(s){z.__e(s,e)}n.base=n.__P=null,t.__c=void 0}if(n=t.__k)for(i=0;i<n.length;i++)n[i]&&Xh(n[i],e,r||typeof t.type!="function");r||t.__e==null||zh(t.__e),t.__=t.__e=t.__d=void 0}function tE(t,e,r){return this.constructor(t,r)}function ed(t,e,r){var n,i,s;z.__&&z.__(t,e),i=(n=typeof r=="function")?null:r&&r.__k||e.__k,s=[],bc(e,t=(!n&&r||e).__k=Ia(jn,null,[t]),i||yi,yi,e.ownerSVGElement!==void 0,!n&&r?[r]:i?null:e.firstChild?Dn.call(e.childNodes):null,s,!n&&r?r:i?i.__e:e.firstChild,n),Kh(s,t)}function td(t,e){ed(t,e,td)}function rE(t,e,r){var n,i,s,o=mt({},t.props);for(s in e)s=="key"?n=e[s]:s=="ref"?i=e[s]:o[s]=e[s];return arguments.length>2&&(o.children=arguments.length>3?Dn.call(arguments,2):r),un(t.type,o,n||t.key,i||t.ref,null)}function nE(t,e){var r={__c:e="__cC"+Hh++,__:t,Consumer:function(n,i){return n.children(i)},Provider:function(n){var i,s;return this.getChildContext||(i=[],(s={})[e]=this,this.getChildContext=function(){return s},this.shouldComponentUpdate=function(o){this.props.value!==o.value&&i.some(Ra)},this.sub=function(o){i.push(o);var a=o.componentWillUnmount;o.componentWillUnmount=function(){i.splice(i.indexOf(o),1),a&&a.call(o)}}),n.children}};return r.Provider.__=r.Consumer.contextType=r}Dn=Vh.slice,z={__e:function(t,e,r,n){for(var i,s,o;e=e.__;)if((i=e.__c)&&!i.__)try{if((s=i.constructor)&&s.getDerivedStateFromError!=null&&(i.setState(s.getDerivedStateFromError(t)),o=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(t,n||{}),o=i.__d),o)return i.__E=i}catch(a){t=a}throw t}},Wh=0,Uh=function(t){return t!=null&&t.constructor===void 0},ln.prototype.setState=function(t,e){var r;r=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=mt({},this.state),typeof t=="function"&&(t=t(mt({},r),this.props)),t&&mt(r,t),t!=null&&this.__v&&(e&&this._sb.push(e),Ra(this))},ln.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),Ra(this))},ln.prototype.render=jn,cn=[],vi.__r=0,Hh=0;const iE=Object.freeze(Object.defineProperty({__proto__:null,Component:ln,Fragment:jn,cloneElement:rE,createContext:nE,createElement:Ia,createRef:JS,h:Ia,hydrate:td,get isValidElement(){return Uh},get options(){return z},render:ed,toChildArray:Zh},Symbol.toStringTag,{value:"Module"})),He=Pr(iE);var Xi={};const es=Pr(xd);var Ut,ue,Xo,tl,Or=0,rd=[],ni=[],rl=z.__b,nl=z.__r,il=z.diffed,sl=z.__c,ol=z.unmount;function sr(t,e){z.__h&&z.__h(ue,t,Or||e),Or=0;var r=ue.__H||(ue.__H={__:[],__h:[]});return t>=r.__.length&&r.__.push({__V:ni}),r.__[t]}function nd(t){return Or=1,id(od,t)}function id(t,e,r){var n=sr(Ut++,2);if(n.t=t,!n.__c&&(n.__=[r?r(e):od(void 0,e),function(s){var o=n.__N?n.__N[0]:n.__[0],a=n.t(o,s);o!==a&&(n.__N=[a,n.__[1]],n.__c.setState({}))}],n.__c=ue,!ue.u)){ue.u=!0;var i=ue.shouldComponentUpdate;ue.shouldComponentUpdate=function(s,o,a){if(!n.__c.__H)return!0;var c=n.__c.__H.__.filter(function(l){return l.__c});if(c.every(function(l){return!l.__N}))return!i||i.call(this,s,o,a);var u=!1;return c.forEach(function(l){if(l.__N){var g=l.__[0];l.__=l.__N,l.__N=void 0,g!==l.__[0]&&(u=!0)}}),!(!u&&n.__c.props===s)&&(!i||i.call(this,s,o,a))}}return n.__N||n.__}function sE(t,e){var r=sr(Ut++,3);!z.__s&&yc(r.__H,e)&&(r.__=t,r.i=e,ue.__H.__h.push(r))}function sd(t,e){var r=sr(Ut++,4);!z.__s&&yc(r.__H,e)&&(r.__=t,r.i=e,ue.__h.push(r))}function oE(t){return Or=5,gc(function(){return{current:t}},[])}function aE(t,e,r){Or=6,sd(function(){return typeof t=="function"?(t(e()),function(){return t(null)}):t?(t.current=e(),function(){return t.current=null}):void 0},r==null?r:r.concat(t))}function gc(t,e){var r=sr(Ut++,7);return yc(r.__H,e)?(r.__V=t(),r.i=e,r.__h=t,r.__V):r.__}function cE(t,e){return Or=8,gc(function(){return t},e)}function uE(t){var e=ue.context[t.__c],r=sr(Ut++,9);return r.c=t,e?(r.__==null&&(r.__=!0,e.sub(ue)),e.props.value):t.__}function lE(t,e){z.useDebugValue&&z.useDebugValue(e?e(t):t)}function fE(t){var e=sr(Ut++,10),r=nd();return e.__=t,ue.componentDidCatch||(ue.componentDidCatch=function(n,i){e.__&&e.__(n,i),r[1](n)}),[r[0],function(){r[1](void 0)}]}function hE(){var t=sr(Ut++,11);if(!t.__){for(var e=ue.__v;e!==null&&!e.__m&&e.__!==null;)e=e.__;var r=e.__m||(e.__m=[0,0]);t.__="P"+r[0]+"-"+r[1]++}return t.__}function dE(){for(var t;t=rd.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(ii),t.__H.__h.forEach(Ta),t.__H.__h=[]}catch(e){t.__H.__h=[],z.__e(e,t.__v)}}z.__b=function(t){ue=null,rl&&rl(t)},z.__r=function(t){nl&&nl(t),Ut=0;var e=(ue=t.__c).__H;e&&(Xo===ue?(e.__h=[],ue.__h=[],e.__.forEach(function(r){r.__N&&(r.__=r.__N),r.__V=ni,r.__N=r.i=void 0})):(e.__h.forEach(ii),e.__h.forEach(Ta),e.__h=[])),Xo=ue},z.diffed=function(t){il&&il(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(rd.push(e)!==1&&tl===z.requestAnimationFrame||((tl=z.requestAnimationFrame)||pE)(dE)),e.__H.__.forEach(function(r){r.i&&(r.__H=r.i),r.__V!==ni&&(r.__=r.__V),r.i=void 0,r.__V=ni})),Xo=ue=null},z.__c=function(t,e){e.some(function(r){try{r.__h.forEach(ii),r.__h=r.__h.filter(function(n){return!n.__||Ta(n)})}catch(n){e.some(function(i){i.__h&&(i.__h=[])}),e=[],z.__e(n,r.__v)}}),sl&&sl(t,e)},z.unmount=function(t){ol&&ol(t);var e,r=t.__c;r&&r.__H&&(r.__H.__.forEach(function(n){try{ii(n)}catch(i){e=i}}),r.__H=void 0,e&&z.__e(e,r.__v))};var al=typeof requestAnimationFrame=="function";function pE(t){var e,r=function(){clearTimeout(n),al&&cancelAnimationFrame(e),setTimeout(t)},n=setTimeout(r,100);al&&(e=requestAnimationFrame(r))}function ii(t){var e=ue,r=t.__c;typeof r=="function"&&(t.__c=void 0,r()),ue=e}function Ta(t){var e=ue;t.__c=t.__(),ue=e}function yc(t,e){return!t||t.length!==e.length||e.some(function(r,n){return r!==t[n]})}function od(t,e){return typeof e=="function"?e(t):e}const bE=Object.freeze(Object.defineProperty({__proto__:null,useCallback:cE,useContext:uE,useDebugValue:lE,useEffect:sE,useErrorBoundary:fE,useId:hE,useImperativeHandle:aE,useLayoutEffect:sd,useMemo:gc,useReducer:id,useRef:oE,useState:nd},Symbol.toStringTag,{value:"Module"})),Bn=Pr(bE);var ht={},ts={};Object.defineProperty(ts,"__esModule",{value:!0});ts.LIB_VERSION=void 0;ts.LIB_VERSION="3.6.0";var rs={};Object.defineProperty(rs,"__esModule",{value:!0});rs.CloseIcon=void 0;const cl=He;function gE(t){return(0,cl.h)("svg",Object.assign({width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),(0,cl.h)("path",{d:"M13.7677 13L12.3535 14.4142L18.3535 20.4142L12.3535 26.4142L13.7677 27.8284L19.7677 21.8284L25.7677 27.8284L27.1819 26.4142L21.1819 20.4142L27.1819 14.4142L25.7677 13L19.7677 19L13.7677 13Z"}))}rs.CloseIcon=gE;var vc={};Object.defineProperty(vc,"__esModule",{value:!0});vc.default="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjgiIGhlaWdodD0iMjgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGNpcmNsZSBjeD0iMTQiIGN5PSIxNCIgcj0iMTQiIGZpbGw9IiMwMDUyRkYiLz48cGF0aCBkPSJNMTQuMDM3IDE4LjkyNmMtMi43NSAwLTQuOTA3LTIuMjA1LTQuOTA3LTQuOTI2IDAtMi43MiAyLjIzLTQuOTI2IDQuOTA3LTQuOTI2YTQuODY2IDQuODY2IDAgMCAxIDQuODMzIDQuMTE4aDQuOTgyYy0uNDQ2LTUuMDczLTQuNjg0LTkuMDQ0LTkuODE1LTkuMDQ0QzguNjEgNC4xNDggNC4xNDkgOC41NiA0LjE0OSAxNHM0LjM4NyA5Ljg1MiA5Ljg5IDkuODUyYzUuMjA0IDAgOS4zNjgtMy45NyA5LjgxNC05LjA0M0gxOC44N2E0Ljg2NiA0Ljg2NiAwIDAgMS00LjgzMyA0LjExN1oiIGZpbGw9IiNmZmYiLz48L3N2Zz4=";var mc={};Object.defineProperty(mc,"__esModule",{value:!0});mc.default="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjgiIGhlaWdodD0iMjgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGNpcmNsZSBjeD0iMTQiIGN5PSIxNCIgcj0iMTQiIGZpbGw9IiMwMDUyRkYiLz48cGF0aCBkPSJNMjMuODUyIDE0QTkuODM0IDkuODM0IDAgMCAxIDE0IDIzLjg1MiA5LjgzNCA5LjgzNCAwIDAgMSA0LjE0OCAxNCA5LjgzNCA5LjgzNCAwIDAgMSAxNCA0LjE0OCA5LjgzNCA5LjgzNCAwIDAgMSAyMy44NTIgMTRaIiBmaWxsPSIjZmZmIi8+PHBhdGggZD0iTTExLjE4NSAxMi41MDRjMC0uNDU2IDAtLjcxLjA5OC0uODYyLjA5OC0uMTUyLjE5Ni0uMzA0LjM0My0uMzU1LjE5Ni0uMTAyLjM5Mi0uMTAyLjg4MS0uMTAyaDIuOTg2Yy40OSAwIC42ODYgMCAuODgyLjEwMi4xNDYuMTAxLjI5My4yMDMuMzQyLjM1NS4wOTguMjAzLjA5OC40MDYuMDk4Ljg2MnYyLjk5MmMwIC40NTcgMCAuNzEtLjA5OC44NjMtLjA5OC4xNTItLjE5NS4zMDQtLjM0Mi4zNTUtLjE5Ni4xMDEtLjM5Mi4xMDEtLjg4Mi4xMDFoLTIuOTg2Yy0uNDkgMC0uNjg1IDAtLjg4LS4xMDEtLjE0OC0uMTAyLS4yOTUtLjIwMy0uMzQ0LS4zNTUtLjA5OC0uMjAzLS4wOTgtLjQwNi0uMDk4LS44NjN2LTIuOTkyWiIgZmlsbD0iIzAwNTJGRiIvPjwvc3ZnPg==";var ns={};Object.defineProperty(ns,"__esModule",{value:!0});ns.QRCodeIcon=void 0;const at=He;function yE(t){return(0,at.h)("svg",Object.assign({width:"10",height:"10",viewBox:"0 0 10 10",xmlns:"http://www.w3.org/2000/svg"},t),(0,at.h)("path",{d:"M8.2271 1.77124L7.0271 1.77124V2.97124H8.2271V1.77124Z"}),(0,at.h)("path",{d:"M5.44922 0.199219L5.44922 4.54922L9.79922 4.54922V0.199219L5.44922 0.199219ZM8.89922 3.64922L6.34922 3.64922L6.34922 1.09922L8.89922 1.09922V3.64922Z"}),(0,at.h)("path",{d:"M2.97124 1.77124L1.77124 1.77124L1.77124 2.97124H2.97124V1.77124Z"}),(0,at.h)("path",{d:"M0.199219 4.54922L4.54922 4.54922L4.54922 0.199219L0.199219 0.199219L0.199219 4.54922ZM1.09922 1.09922L3.64922 1.09922L3.64922 3.64922L1.09922 3.64922L1.09922 1.09922Z"}),(0,at.h)("path",{d:"M2.97124 7.0271H1.77124L1.77124 8.2271H2.97124V7.0271Z"}),(0,at.h)("path",{d:"M0.199219 9.79922H4.54922L4.54922 5.44922L0.199219 5.44922L0.199219 9.79922ZM1.09922 6.34922L3.64922 6.34922L3.64922 8.89922H1.09922L1.09922 6.34922Z"}),(0,at.h)("path",{d:"M8.89922 7.39912H7.99922V5.40112H5.44922L5.44922 9.79912H6.34922L6.34922 6.30112H7.09922V8.29912H9.79922V5.40112H8.89922V7.39912Z"}),(0,at.h)("path",{d:"M7.99912 8.89917H7.09912V9.79917H7.99912V8.89917Z"}),(0,at.h)("path",{d:"M9.79917 8.89917H8.89917V9.79917H9.79917V8.89917Z"}))}ns.QRCodeIcon=yE;var _c={};Object.defineProperty(_c,"__esModule",{value:!0});const vE=`
    <svg width="100" height="100" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M50 100C77.6142 100 100 77.6142 100 50C100 22.3858 77.6142 0 50 0C22.3858 0 0 22.3858 0 50C0 77.6142 22.3858 100 50 100Z" fill="white"/>
        <path d="M50.512 94C74.2907 94 93.5673 74.5244 93.5673 50.5C93.5673 26.4756 74.2907 7 50.512 7C26.7332 7 7.45667 26.4756 7.45667 50.5C7.45667 74.5244 26.7332 94 50.512 94Z" fill="#0052FF"/>
        <path d="M50.6248 65.4335C42.3697 65.4335 35.8996 58.7469 35.8996 50.5C35.8996 42.2531 42.5928 35.5664 50.6248 35.5664C57.9873 35.5664 64.0111 40.9157 65.1267 48.0481H80.0749C78.7363 32.6688 66.0191 20.6328 50.6248 20.6328C34.3379 20.6328 20.9514 34.0062 20.9514 50.5C20.9514 66.9936 34.1148 80.3671 50.6248 80.3671C66.2422 80.3671 78.7363 68.331 80.0749 52.9516H65.1267C64.0111 60.0841 57.9873 65.4335 50.6248 65.4335Z" fill="white"/>
    </svg>
`;_c.default=vE;var wc={};Object.defineProperty(wc,"__esModule",{value:!0});wc.default=`
    <svg width="100" height="100" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
        <circle cx="50" cy="50" r="50" fill="white"/>
        <circle cx="49.9996" cy="49.9996" r="43.6363" fill="#1B53E4"/>
        <circle cx="49.9996" cy="49.9996" r="43.6363" stroke="white"/>
        <path fill-rule="evenodd" clip-rule="evenodd" d="M19.3379 49.9484C19.3379 66.8508 33.04 80.553 49.9425 80.553C66.8449 80.553 80.5471 66.8508 80.5471 49.9484C80.5471 33.0459 66.8449 19.3438 49.9425 19.3438C33.04 19.3438 19.3379 33.0459 19.3379 49.9484ZM44.0817 40.0799C41.8725 40.0799 40.0817 41.8708 40.0817 44.0799V55.8029C40.0817 58.012 41.8725 59.8029 44.0817 59.8029H55.8046C58.0138 59.8029 59.8046 58.012 59.8046 55.8029V44.0799C59.8046 41.8708 58.0138 40.0799 55.8046 40.0799H44.0817Z" fill="white"/>
    </svg>
`;var is={};Object.defineProperty(is,"__esModule",{value:!0});is.StatusDotIcon=void 0;const ul=He;function mE(t){return(0,ul.h)("svg",Object.assign({width:"10",height:"10",viewBox:"0 0 10 10",xmlns:"http://www.w3.org/2000/svg"},t),(0,ul.h)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M2.29995 4.99995C2.29995 5.57985 1.82985 6.04995 1.24995 6.04995C0.670052 6.04995 0.199951 5.57985 0.199951 4.99995C0.199951 4.42005 0.670052 3.94995 1.24995 3.94995C1.82985 3.94995 2.29995 4.42005 2.29995 4.99995ZM4.99995 6.04995C5.57985 6.04995 6.04995 5.57985 6.04995 4.99995C6.04995 4.42005 5.57985 3.94995 4.99995 3.94995C4.42005 3.94995 3.94995 4.42005 3.94995 4.99995C3.94995 5.57985 4.42005 6.04995 4.99995 6.04995ZM8.74995 6.04995C9.32985 6.04995 9.79995 5.57985 9.79995 4.99995C9.79995 4.42005 9.32985 3.94995 8.74995 3.94995C8.17005 3.94995 7.69995 4.42005 7.69995 4.99995C7.69995 5.57985 8.17005 6.04995 8.74995 6.04995Z"}))}is.StatusDotIcon=mE;var ss={};function ad(t){this.mode=We.MODE_8BIT_BYTE,this.data=t,this.parsedData=[];for(var e=0,r=this.data.length;e<r;e++){var n=[],i=this.data.charCodeAt(e);i>65536?(n[0]=240|(i&1835008)>>>18,n[1]=128|(i&258048)>>>12,n[2]=128|(i&4032)>>>6,n[3]=128|i&63):i>2048?(n[0]=224|(i&61440)>>>12,n[1]=128|(i&4032)>>>6,n[2]=128|i&63):i>128?(n[0]=192|(i&1984)>>>6,n[1]=128|i&63):n[0]=i,this.parsedData.push(n)}this.parsedData=Array.prototype.concat.apply([],this.parsedData),this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}ad.prototype={getLength:function(t){return this.parsedData.length},write:function(t){for(var e=0,r=this.parsedData.length;e<r;e++)t.put(this.parsedData[e],8)}};function dt(t,e){this.typeNumber=t,this.errorCorrectLevel=e,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}dt.prototype={addData:function(t){var e=new ad(t);this.dataList.push(e),this.dataCache=null},isDark:function(t,e){if(t<0||this.moduleCount<=t||e<0||this.moduleCount<=e)throw new Error(t+","+e);return this.modules[t][e]},getModuleCount:function(){return this.moduleCount},make:function(){this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(t,e){this.moduleCount=this.typeNumber*4+17,this.modules=new Array(this.moduleCount);for(var r=0;r<this.moduleCount;r++){this.modules[r]=new Array(this.moduleCount);for(var n=0;n<this.moduleCount;n++)this.modules[r][n]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(t,e),this.typeNumber>=7&&this.setupTypeNumber(t),this.dataCache==null&&(this.dataCache=dt.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,e)},setupPositionProbePattern:function(t,e){for(var r=-1;r<=7;r++)if(!(t+r<=-1||this.moduleCount<=t+r))for(var n=-1;n<=7;n++)e+n<=-1||this.moduleCount<=e+n||(0<=r&&r<=6&&(n==0||n==6)||0<=n&&n<=6&&(r==0||r==6)||2<=r&&r<=4&&2<=n&&n<=4?this.modules[t+r][e+n]=!0:this.modules[t+r][e+n]=!1)},getBestMaskPattern:function(){for(var t=0,e=0,r=0;r<8;r++){this.makeImpl(!0,r);var n=de.getLostPoint(this);(r==0||t>n)&&(t=n,e=r)}return e},createMovieClip:function(t,e,r){var n=t.createEmptyMovieClip(e,r),i=1;this.make();for(var s=0;s<this.modules.length;s++)for(var o=s*i,a=0;a<this.modules[s].length;a++){var c=a*i,u=this.modules[s][a];u&&(n.beginFill(0,100),n.moveTo(c,o),n.lineTo(c+i,o),n.lineTo(c+i,o+i),n.lineTo(c,o+i),n.endFill())}return n},setupTimingPattern:function(){for(var t=8;t<this.moduleCount-8;t++)this.modules[t][6]==null&&(this.modules[t][6]=t%2==0);for(var e=8;e<this.moduleCount-8;e++)this.modules[6][e]==null&&(this.modules[6][e]=e%2==0)},setupPositionAdjustPattern:function(){for(var t=de.getPatternPosition(this.typeNumber),e=0;e<t.length;e++)for(var r=0;r<t.length;r++){var n=t[e],i=t[r];if(this.modules[n][i]==null)for(var s=-2;s<=2;s++)for(var o=-2;o<=2;o++)s==-2||s==2||o==-2||o==2||s==0&&o==0?this.modules[n+s][i+o]=!0:this.modules[n+s][i+o]=!1}},setupTypeNumber:function(t){for(var e=de.getBCHTypeNumber(this.typeNumber),r=0;r<18;r++){var n=!t&&(e>>r&1)==1;this.modules[Math.floor(r/3)][r%3+this.moduleCount-8-3]=n}for(var r=0;r<18;r++){var n=!t&&(e>>r&1)==1;this.modules[r%3+this.moduleCount-8-3][Math.floor(r/3)]=n}},setupTypeInfo:function(t,e){for(var r=this.errorCorrectLevel<<3|e,n=de.getBCHTypeInfo(r),i=0;i<15;i++){var s=!t&&(n>>i&1)==1;i<6?this.modules[i][8]=s:i<8?this.modules[i+1][8]=s:this.modules[this.moduleCount-15+i][8]=s}for(var i=0;i<15;i++){var s=!t&&(n>>i&1)==1;i<8?this.modules[8][this.moduleCount-i-1]=s:i<9?this.modules[8][15-i-1+1]=s:this.modules[8][15-i-1]=s}this.modules[this.moduleCount-8][8]=!t},mapData:function(t,e){for(var r=-1,n=this.moduleCount-1,i=7,s=0,o=this.moduleCount-1;o>0;o-=2)for(o==6&&o--;;){for(var a=0;a<2;a++)if(this.modules[n][o-a]==null){var c=!1;s<t.length&&(c=(t[s]>>>i&1)==1);var u=de.getMask(e,n,o-a);u&&(c=!c),this.modules[n][o-a]=c,i--,i==-1&&(s++,i=7)}if(n+=r,n<0||this.moduleCount<=n){n-=r,r=-r;break}}}};dt.PAD0=236;dt.PAD1=17;dt.createData=function(t,e,r){for(var n=ft.getRSBlocks(t,e),i=new cd,s=0;s<r.length;s++){var o=r[s];i.put(o.mode,4),i.put(o.getLength(),de.getLengthInBits(o.mode,t)),o.write(i)}for(var a=0,s=0;s<n.length;s++)a+=n[s].dataCount;if(i.getLengthInBits()>a*8)throw new Error("code length overflow. ("+i.getLengthInBits()+">"+a*8+")");for(i.getLengthInBits()+4<=a*8&&i.put(0,4);i.getLengthInBits()%8!=0;)i.putBit(!1);for(;!(i.getLengthInBits()>=a*8||(i.put(dt.PAD0,8),i.getLengthInBits()>=a*8));)i.put(dt.PAD1,8);return dt.createBytes(i,n)};dt.createBytes=function(t,e){for(var r=0,n=0,i=0,s=new Array(e.length),o=new Array(e.length),a=0;a<e.length;a++){var c=e[a].dataCount,u=e[a].totalCount-c;n=Math.max(n,c),i=Math.max(i,u),s[a]=new Array(c);for(var l=0;l<s[a].length;l++)s[a][l]=255&t.buffer[l+r];r+=c;var g=de.getErrorCorrectPolynomial(u),f=new wr(s[a],g.getLength()-1),p=f.mod(g);o[a]=new Array(g.getLength()-1);for(var l=0;l<o[a].length;l++){var y=l+p.getLength()-o[a].length;o[a][l]=y>=0?p.get(y):0}}for(var E=0,l=0;l<e.length;l++)E+=e[l].totalCount;for(var k=new Array(E),b=0,l=0;l<n;l++)for(var a=0;a<e.length;a++)l<s[a].length&&(k[b++]=s[a][l]);for(var l=0;l<i;l++)for(var a=0;a<e.length;a++)l<o[a].length&&(k[b++]=o[a][l]);return k};var We={MODE_NUMBER:1<<0,MODE_ALPHA_NUM:1<<1,MODE_8BIT_BYTE:1<<2,MODE_KANJI:1<<3},Nt={L:1,M:0,Q:3,H:2},Ct={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},de={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1<<10|1<<8|1<<5|1<<4|1<<2|1<<1|1<<0,G18:1<<12|1<<11|1<<10|1<<9|1<<8|1<<5|1<<2|1<<0,G15_MASK:1<<14|1<<12|1<<10|1<<4|1<<1,getBCHTypeInfo:function(t){for(var e=t<<10;de.getBCHDigit(e)-de.getBCHDigit(de.G15)>=0;)e^=de.G15<<de.getBCHDigit(e)-de.getBCHDigit(de.G15);return(t<<10|e)^de.G15_MASK},getBCHTypeNumber:function(t){for(var e=t<<12;de.getBCHDigit(e)-de.getBCHDigit(de.G18)>=0;)e^=de.G18<<de.getBCHDigit(e)-de.getBCHDigit(de.G18);return t<<12|e},getBCHDigit:function(t){for(var e=0;t!=0;)e++,t>>>=1;return e},getPatternPosition:function(t){return de.PATTERN_POSITION_TABLE[t-1]},getMask:function(t,e,r){switch(t){case Ct.PATTERN000:return(e+r)%2==0;case Ct.PATTERN001:return e%2==0;case Ct.PATTERN010:return r%3==0;case Ct.PATTERN011:return(e+r)%3==0;case Ct.PATTERN100:return(Math.floor(e/2)+Math.floor(r/3))%2==0;case Ct.PATTERN101:return e*r%2+e*r%3==0;case Ct.PATTERN110:return(e*r%2+e*r%3)%2==0;case Ct.PATTERN111:return(e*r%3+(e+r)%2)%2==0;default:throw new Error("bad maskPattern:"+t)}},getErrorCorrectPolynomial:function(t){for(var e=new wr([1],0),r=0;r<t;r++)e=e.multiply(new wr([1,Ce.gexp(r)],0));return e},getLengthInBits:function(t,e){if(1<=e&&e<10)switch(t){case We.MODE_NUMBER:return 10;case We.MODE_ALPHA_NUM:return 9;case We.MODE_8BIT_BYTE:return 8;case We.MODE_KANJI:return 8;default:throw new Error("mode:"+t)}else if(e<27)switch(t){case We.MODE_NUMBER:return 12;case We.MODE_ALPHA_NUM:return 11;case We.MODE_8BIT_BYTE:return 16;case We.MODE_KANJI:return 10;default:throw new Error("mode:"+t)}else if(e<41)switch(t){case We.MODE_NUMBER:return 14;case We.MODE_ALPHA_NUM:return 13;case We.MODE_8BIT_BYTE:return 16;case We.MODE_KANJI:return 12;default:throw new Error("mode:"+t)}else throw new Error("type:"+e)},getLostPoint:function(t){for(var e=t.getModuleCount(),r=0,n=0;n<e;n++)for(var i=0;i<e;i++){for(var s=0,o=t.isDark(n,i),a=-1;a<=1;a++)if(!(n+a<0||e<=n+a))for(var c=-1;c<=1;c++)i+c<0||e<=i+c||a==0&&c==0||o==t.isDark(n+a,i+c)&&s++;s>5&&(r+=3+s-5)}for(var n=0;n<e-1;n++)for(var i=0;i<e-1;i++){var u=0;t.isDark(n,i)&&u++,t.isDark(n+1,i)&&u++,t.isDark(n,i+1)&&u++,t.isDark(n+1,i+1)&&u++,(u==0||u==4)&&(r+=3)}for(var n=0;n<e;n++)for(var i=0;i<e-6;i++)t.isDark(n,i)&&!t.isDark(n,i+1)&&t.isDark(n,i+2)&&t.isDark(n,i+3)&&t.isDark(n,i+4)&&!t.isDark(n,i+5)&&t.isDark(n,i+6)&&(r+=40);for(var i=0;i<e;i++)for(var n=0;n<e-6;n++)t.isDark(n,i)&&!t.isDark(n+1,i)&&t.isDark(n+2,i)&&t.isDark(n+3,i)&&t.isDark(n+4,i)&&!t.isDark(n+5,i)&&t.isDark(n+6,i)&&(r+=40);for(var l=0,i=0;i<e;i++)for(var n=0;n<e;n++)t.isDark(n,i)&&l++;var g=Math.abs(100*l/e/e-50)/5;return r+=g*10,r}},Ce={glog:function(t){if(t<1)throw new Error("glog("+t+")");return Ce.LOG_TABLE[t]},gexp:function(t){for(;t<0;)t+=255;for(;t>=256;)t-=255;return Ce.EXP_TABLE[t]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)};for(var Me=0;Me<8;Me++)Ce.EXP_TABLE[Me]=1<<Me;for(var Me=8;Me<256;Me++)Ce.EXP_TABLE[Me]=Ce.EXP_TABLE[Me-4]^Ce.EXP_TABLE[Me-5]^Ce.EXP_TABLE[Me-6]^Ce.EXP_TABLE[Me-8];for(var Me=0;Me<255;Me++)Ce.LOG_TABLE[Ce.EXP_TABLE[Me]]=Me;function wr(t,e){if(t.length==null)throw new Error(t.length+"/"+e);for(var r=0;r<t.length&&t[r]==0;)r++;this.num=new Array(t.length-r+e);for(var n=0;n<t.length-r;n++)this.num[n]=t[n+r]}wr.prototype={get:function(t){return this.num[t]},getLength:function(){return this.num.length},multiply:function(t){for(var e=new Array(this.getLength()+t.getLength()-1),r=0;r<this.getLength();r++)for(var n=0;n<t.getLength();n++)e[r+n]^=Ce.gexp(Ce.glog(this.get(r))+Ce.glog(t.get(n)));return new wr(e,0)},mod:function(t){if(this.getLength()-t.getLength()<0)return this;for(var e=Ce.glog(this.get(0))-Ce.glog(t.get(0)),r=new Array(this.getLength()),n=0;n<this.getLength();n++)r[n]=this.get(n);for(var n=0;n<t.getLength();n++)r[n]^=Ce.gexp(Ce.glog(t.get(n))+e);return new wr(r,0).mod(t)}};function ft(t,e){this.totalCount=t,this.dataCount=e}ft.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]];ft.getRSBlocks=function(t,e){var r=ft.getRsBlockTable(t,e);if(r==null)throw new Error("bad rs block @ typeNumber:"+t+"/errorCorrectLevel:"+e);for(var n=r.length/3,i=[],s=0;s<n;s++)for(var o=r[s*3+0],a=r[s*3+1],c=r[s*3+2],u=0;u<o;u++)i.push(new ft(a,c));return i};ft.getRsBlockTable=function(t,e){switch(e){case Nt.L:return ft.RS_BLOCK_TABLE[(t-1)*4+0];case Nt.M:return ft.RS_BLOCK_TABLE[(t-1)*4+1];case Nt.Q:return ft.RS_BLOCK_TABLE[(t-1)*4+2];case Nt.H:return ft.RS_BLOCK_TABLE[(t-1)*4+3];default:return}};function cd(){this.buffer=[],this.length=0}cd.prototype={get:function(t){var e=Math.floor(t/8);return(this.buffer[e]>>>7-t%8&1)==1},put:function(t,e){for(var r=0;r<e;r++)this.putBit((t>>>e-r-1&1)==1)},getLengthInBits:function(){return this.length},putBit:function(t){var e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var ea=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]];function ud(t){if(this.options={padding:4,width:256,height:256,typeNumber:4,color:"#000000",background:"#ffffff",ecl:"M",image:{svg:"",width:0,height:0}},typeof t=="string"&&(t={content:t}),t)for(var e in t)this.options[e]=t[e];if(typeof this.options.content!="string")throw new Error("Expected 'content' as string!");if(this.options.content.length===0)throw new Error("Expected 'content' to be non-empty!");if(!(this.options.padding>=0))throw new Error("Expected 'padding' value to be non-negative!");if(!(this.options.width>0)||!(this.options.height>0))throw new Error("Expected 'width' or 'height' value to be higher than zero!");function r(c){switch(c){case"L":return Nt.L;case"M":return Nt.M;case"Q":return Nt.Q;case"H":return Nt.H;default:throw new Error("Unknwon error correction level: "+c)}}function n(c,u){for(var l=i(c),g=1,f=0,p=0,y=ea.length;p<=y;p++){var E=ea[p];if(!E)throw new Error("Content too long: expected "+f+" but got "+l);switch(u){case"L":f=E[0];break;case"M":f=E[1];break;case"Q":f=E[2];break;case"H":f=E[3];break;default:throw new Error("Unknwon error correction level: "+u)}if(l<=f)break;g++}if(g>ea.length)throw new Error("Content too long");return g}function i(c){var u=encodeURI(c).toString().replace(/\%[0-9a-fA-F]{2}/g,"a");return u.length+(u.length!=c?3:0)}var s=this.options.content,o=n(s,this.options.ecl),a=r(this.options.ecl);this.qrcode=new dt(o,a),this.qrcode.addData(s),this.qrcode.make()}ud.prototype.svg=function(t){var e=this.options||{},r=this.qrcode.modules;typeof t>"u"&&(t={container:e.container||"svg"});for(var n=typeof e.pretty<"u"?!!e.pretty:!0,i=n?"  ":"",s=n?`\r
`:"",o=e.width,a=e.height,c=r.length,u=o/(c+2*e.padding),l=a/(c+2*e.padding),g=typeof e.join<"u"?!!e.join:!1,f=typeof e.swap<"u"?!!e.swap:!1,p=typeof e.xmlDeclaration<"u"?!!e.xmlDeclaration:!0,y=typeof e.predefined<"u"?!!e.predefined:!1,E=y?i+'<defs><path id="qrmodule" d="M0 0 h'+l+" v"+u+' H0 z" style="fill:'+e.color+';shape-rendering:crispEdges;" /></defs>'+s:"",k=i+'<rect x="0" y="0" width="'+o+'" height="'+a+'" style="fill:'+e.background+';shape-rendering:crispEdges;"/>'+s,b="",v="",w=0;w<c;w++)for(var A=0;A<c;A++){var N=r[A][w];if(N){var F=A*u+e.padding*u,$=w*l+e.padding*l;if(f){var D=F;F=$,$=D}if(g){var P=u+F,ie=l+$;F=Number.isInteger(F)?Number(F):F.toFixed(2),$=Number.isInteger($)?Number($):$.toFixed(2),P=Number.isInteger(P)?Number(P):P.toFixed(2),ie=Number.isInteger(ie)?Number(ie):ie.toFixed(2),v+="M"+F+","+$+" V"+ie+" H"+P+" V"+$+" H"+F+" Z "}else y?b+=i+'<use x="'+F.toString()+'" y="'+$.toString()+'" href="#qrmodule" />'+s:b+=i+'<rect x="'+F.toString()+'" y="'+$.toString()+'" width="'+u+'" height="'+l+'" style="fill:'+e.color+';shape-rendering:crispEdges;"/>'+s}}g&&(b=i+'<path x="0" y="0" style="fill:'+e.color+';shape-rendering:crispEdges;" d="'+v+'" />');let te="";if(this.options.image!==void 0&&this.options.image.svg){const Z=o*this.options.image.width/100,X=a*this.options.image.height/100,ne=o/2-Z/2,he=a/2-X/2;te+=`<svg x="${ne}" y="${he}" width="${Z}" height="${X}" viewBox="0 0 100 100" preserveAspectRatio="xMinYMin meet">`,te+=this.options.image.svg+s,te+="</svg>"}var q="";switch(t.container){case"svg":p&&(q+='<?xml version="1.0" standalone="yes"?>'+s),q+='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="'+o+'" height="'+a+'">'+s,q+=E+k+b,q+=te,q+="</svg>";break;case"svg-viewbox":p&&(q+='<?xml version="1.0" standalone="yes"?>'+s),q+='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 '+o+" "+a+'">'+s,q+=E+k+b,q+=te,q+="</svg>";break;case"g":q+='<g width="'+o+'" height="'+a+'">'+s,q+=E+k+b,q+=te,q+="</g>";break;default:q+=(E+k+b+te).replace(/^\s+/,"");break}return q};var _E=ud,wE=Q&&Q.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ss,"__esModule",{value:!0});ss.QRCode=void 0;const SE=He,ll=Bn,EE=wE(_E),xE=t=>{const[e,r]=(0,ll.useState)("");return(0,ll.useEffect)(()=>{var n,i;const s=new EE.default({content:t.content,background:t.bgColor||"#ffffff",color:t.fgColor||"#000000",container:"svg",ecl:"M",width:(n=t.width)!==null&&n!==void 0?n:256,height:(i=t.height)!==null&&i!==void 0?i:256,padding:0,image:t.image}),o=Buffer.from(s.svg(),"utf8").toString("base64");r(`data:image/svg+xml;base64,${o}`)}),e?(0,SE.h)("img",{src:e,alt:"QR Code"}):null};ss.QRCode=xE;var os={},Sc={};Object.defineProperty(Sc,"__esModule",{value:!0});Sc.default=".-cbwsdk-css-reset .-cbwsdk-spinner{display:inline-block}.-cbwsdk-css-reset .-cbwsdk-spinner svg{display:inline-block;animation:2s linear infinite -cbwsdk-spinner-svg}.-cbwsdk-css-reset .-cbwsdk-spinner svg circle{animation:1.9s ease-in-out infinite both -cbwsdk-spinner-circle;display:block;fill:rgba(0,0,0,0);stroke-dasharray:283;stroke-dashoffset:280;stroke-linecap:round;stroke-width:10px;transform-origin:50% 50%}@keyframes -cbwsdk-spinner-svg{0%{transform:rotateZ(0deg)}100%{transform:rotateZ(360deg)}}@keyframes -cbwsdk-spinner-circle{0%,25%{stroke-dashoffset:280;transform:rotate(0)}50%,75%{stroke-dashoffset:75;transform:rotate(45deg)}100%{stroke-dashoffset:280;transform:rotate(360deg)}}";var CE=Q&&Q.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(os,"__esModule",{value:!0});os.Spinner=void 0;const Gn=He,kE=CE(Sc),AE=t=>{var e;const r=(e=t.size)!==null&&e!==void 0?e:64,n=t.color||"#000";return(0,Gn.h)("div",{class:"-cbwsdk-spinner"},(0,Gn.h)("style",null,kE.default),(0,Gn.h)("svg",{viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg",style:{width:r,height:r}},(0,Gn.h)("circle",{style:{cx:50,cy:50,r:45,stroke:n}})))};os.Spinner=AE;var Ec={};Object.defineProperty(Ec,"__esModule",{value:!0});Ec.default=".-cbwsdk-css-reset .-cbwsdk-connect-content{height:430px;width:700px;border-radius:12px;padding:30px}.-cbwsdk-css-reset .-cbwsdk-connect-content.light{background:#fff}.-cbwsdk-css-reset .-cbwsdk-connect-content.dark{background:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-connect-content-header{display:flex;align-items:center;justify-content:space-between;margin:0 0 30px}.-cbwsdk-css-reset .-cbwsdk-connect-content-heading{font-style:normal;font-weight:500;font-size:28px;line-height:36px;margin:0}.-cbwsdk-css-reset .-cbwsdk-connect-content-heading.light{color:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-connect-content-heading.dark{color:#fff}.-cbwsdk-css-reset .-cbwsdk-connect-content-layout{display:flex;flex-direction:row}.-cbwsdk-css-reset .-cbwsdk-connect-content-column-left{margin-right:30px;display:flex;flex-direction:column;justify-content:space-between}.-cbwsdk-css-reset .-cbwsdk-connect-content-column-right{flex:25%;margin-right:34px}.-cbwsdk-css-reset .-cbwsdk-connect-content-qr-wrapper{width:220px;height:220px;border-radius:12px;display:flex;justify-content:center;align-items:center;background:#fff}.-cbwsdk-css-reset .-cbwsdk-connect-content-qr-connecting{position:absolute;top:0;bottom:0;left:0;right:0;display:flex;flex-direction:column;align-items:center;justify-content:center}.-cbwsdk-css-reset .-cbwsdk-connect-content-qr-connecting.light{background-color:rgba(255,255,255,.95)}.-cbwsdk-css-reset .-cbwsdk-connect-content-qr-connecting.light>p{color:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-connect-content-qr-connecting.dark{background-color:rgba(10,11,13,.9)}.-cbwsdk-css-reset .-cbwsdk-connect-content-qr-connecting.dark>p{color:#fff}.-cbwsdk-css-reset .-cbwsdk-connect-content-qr-connecting>p{font-size:12px;font-weight:bold;margin-top:16px}.-cbwsdk-css-reset .-cbwsdk-connect-content-update-app{border-radius:8px;font-size:14px;line-height:20px;padding:12px;width:339px}.-cbwsdk-css-reset .-cbwsdk-connect-content-update-app.light{background:#eef0f3;color:#5b636e}.-cbwsdk-css-reset .-cbwsdk-connect-content-update-app.dark{background:#1e2025;color:#8a919e}.-cbwsdk-css-reset .-cbwsdk-cancel-button{-webkit-appearance:none;border:none;background:none;cursor:pointer;padding:0;margin:0}.-cbwsdk-css-reset .-cbwsdk-cancel-button-x{position:relative;display:block;cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-wallet-steps{padding:0 0 0 16px;margin:0;width:100%;list-style:decimal}.-cbwsdk-css-reset .-cbwsdk-wallet-steps-item{list-style-type:decimal;display:list-item;font-style:normal;font-weight:400;font-size:16px;line-height:24px;margin-top:20px}.-cbwsdk-css-reset .-cbwsdk-wallet-steps-item.light{color:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-wallet-steps-item.dark{color:#fff}.-cbwsdk-css-reset .-cbwsdk-wallet-steps-item-wrapper{display:flex;align-items:center}.-cbwsdk-css-reset .-cbwsdk-wallet-steps-pad-left{margin-left:6px}.-cbwsdk-css-reset .-cbwsdk-wallet-steps-icon{display:flex;border-radius:50%;height:24px;width:24px}.-cbwsdk-css-reset .-cbwsdk-wallet-steps-icon svg{margin:auto;display:block}.-cbwsdk-css-reset .-cbwsdk-wallet-steps-icon.light{background:#0052ff}.-cbwsdk-css-reset .-cbwsdk-wallet-steps-icon.dark{background:#588af5}.-cbwsdk-css-reset .-cbwsdk-connect-item{align-items:center;display:flex;flex-direction:row;padding:16px 24px;gap:12px;cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-connect-item.light{color:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-connect-item.light.selected{background:#f5f8ff;color:#0052ff}.-cbwsdk-css-reset .-cbwsdk-connect-item.dark{color:#fff}.-cbwsdk-css-reset .-cbwsdk-connect-item.dark.selected{background:#001033;color:#588af5}.-cbwsdk-css-reset .-cbwsdk-connect-item.selected{border-radius:100px;font-weight:600}.-cbwsdk-css-reset .-cbwsdk-connect-item-copy-wrapper{margin:0 4px 0 8px}.-cbwsdk-css-reset .-cbwsdk-connect-item-title{margin:0 0 0;font-size:16px;line-height:24px;font-weight:500}.-cbwsdk-css-reset .-cbwsdk-connect-item-description{font-weight:400;font-size:14px;line-height:20px;margin:0}";var qr=Q&&Q.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ht,"__esModule",{value:!0});ht.CoinbaseAppSteps=ht.CoinbaseWalletSteps=ht.ConnectItem=ht.ConnectContent=void 0;const Ze=qr(es),H=He,fl=Bn,ME=B,IE=ts,RE=rs,TE=qr(vc),OE=qr(mc),ld=ns,NE=qr(_c),LE=qr(wc),PE=is,DE=ss,jE=os,BE=qr(Ec),hl={"coinbase-wallet-app":{title:"Coinbase Wallet app",description:"Connect with your self-custody wallet",icon:OE.default,steps:hd},"coinbase-app":{title:"Coinbase app",description:"Connect with your Coinbase account",icon:TE.default,steps:dd}},FE=t=>{switch(t){case"coinbase-app":return NE.default;case"coinbase-wallet-app":default:return LE.default}},Oa=t=>t==="light"?"#FFFFFF":"#0A0B0D";function $E(t){const{theme:e}=t,[r,n]=(0,fl.useState)("coinbase-wallet-app"),i=(0,fl.useCallback)(u=>{n(u)},[]),s=(0,ME.createQrUrl)(t.sessionId,t.sessionSecret,t.linkAPIUrl,t.isParentConnection,t.version,t.chainId),o=hl[r];if(!r)return null;const a=o.steps,c=r==="coinbase-app";return(0,H.h)("div",{"data-testid":"connect-content",class:(0,Ze.default)("-cbwsdk-connect-content",e)},(0,H.h)("style",null,BE.default),(0,H.h)("div",{class:"-cbwsdk-connect-content-header"},(0,H.h)("h2",{class:(0,Ze.default)("-cbwsdk-connect-content-heading",e)},"Scan to connect with one of our mobile apps"),t.onCancel&&(0,H.h)("button",{type:"button",class:"-cbwsdk-cancel-button",onClick:t.onCancel},(0,H.h)(RE.CloseIcon,{fill:e==="light"?"#0A0B0D":"#FFFFFF"}))),(0,H.h)("div",{class:"-cbwsdk-connect-content-layout"},(0,H.h)("div",{class:"-cbwsdk-connect-content-column-left"},(0,H.h)("div",null,Object.entries(hl).map(([u,l])=>(0,H.h)(fd,{key:u,title:l.title,description:l.description,icon:l.icon,selected:r===u,onClick:()=>i(u),theme:e}))),c&&(0,H.h)("div",{class:(0,Ze.default)("-cbwsdk-connect-content-update-app",e)},"Don\u2019t see a ",(0,H.h)("strong",null,"Scan")," option? Update your Coinbase app to the latest version and try again.")),(0,H.h)("div",{class:"-cbwsdk-connect-content-column-right"},(0,H.h)("div",{class:"-cbwsdk-connect-content-qr-wrapper"},(0,H.h)(DE.QRCode,{content:s,width:200,height:200,fgColor:"#000",bgColor:"transparent",image:{svg:FE(r),width:25,height:25}}),(0,H.h)("input",{type:"hidden",name:"cbw-cbwsdk-version",value:IE.LIB_VERSION}),(0,H.h)("input",{type:"hidden",value:s})),(0,H.h)(a,{theme:e}),!t.isConnected&&(0,H.h)("div",{"data-testid":"connecting-spinner",class:(0,Ze.default)("-cbwsdk-connect-content-qr-connecting",e)},(0,H.h)(jE.Spinner,{size:36,color:e==="dark"?"#FFF":"#000"}),(0,H.h)("p",null,"Connecting...")))))}ht.ConnectContent=$E;function fd({title:t,description:e,icon:r,selected:n,theme:i,onClick:s}){return(0,H.h)("div",{onClick:s,class:(0,Ze.default)("-cbwsdk-connect-item",i,{selected:n})},(0,H.h)("div",null,(0,H.h)("img",{src:r,alt:t})),(0,H.h)("div",{class:"-cbwsdk-connect-item-copy-wrapper"},(0,H.h)("h3",{class:"-cbwsdk-connect-item-title"},t),(0,H.h)("p",{class:"-cbwsdk-connect-item-description"},e)))}ht.ConnectItem=fd;function hd({theme:t}){return(0,H.h)("ol",{class:"-cbwsdk-wallet-steps"},(0,H.h)("li",{class:(0,Ze.default)("-cbwsdk-wallet-steps-item",t)},(0,H.h)("div",{class:"-cbwsdk-wallet-steps-item-wrapper"},"Open Coinbase Wallet app")),(0,H.h)("li",{class:(0,Ze.default)("-cbwsdk-wallet-steps-item",t)},(0,H.h)("div",{class:"-cbwsdk-wallet-steps-item-wrapper"},(0,H.h)("span",null,"Tap ",(0,H.h)("strong",null,"Scan")," "),(0,H.h)("span",{class:(0,Ze.default)("-cbwsdk-wallet-steps-pad-left","-cbwsdk-wallet-steps-icon",t)},(0,H.h)(ld.QRCodeIcon,{fill:Oa(t)})))))}ht.CoinbaseWalletSteps=hd;function dd({theme:t}){return(0,H.h)("ol",{class:"-cbwsdk-wallet-steps"},(0,H.h)("li",{class:(0,Ze.default)("-cbwsdk-wallet-steps-item",t)},(0,H.h)("div",{class:"-cbwsdk-wallet-steps-item-wrapper"},"Open Coinbase app")),(0,H.h)("li",{class:(0,Ze.default)("-cbwsdk-wallet-steps-item",t)},(0,H.h)("div",{class:"-cbwsdk-wallet-steps-item-wrapper"},(0,H.h)("span",null,"Tap ",(0,H.h)("strong",null,"More")),(0,H.h)("span",{class:(0,Ze.default)("-cbwsdk-wallet-steps-pad-left","-cbwsdk-wallet-steps-icon",t)},(0,H.h)(PE.StatusDotIcon,{fill:Oa(t)})),(0,H.h)("span",{class:"-cbwsdk-wallet-steps-pad-left"},"then ",(0,H.h)("strong",null,"Scan")),(0,H.h)("span",{class:(0,Ze.default)("-cbwsdk-wallet-steps-pad-left","-cbwsdk-wallet-steps-icon",t)},(0,H.h)(ld.QRCodeIcon,{fill:Oa(t)})))))}ht.CoinbaseAppSteps=dd;var as={},cs={};Object.defineProperty(cs,"__esModule",{value:!0});cs.ArrowLeftIcon=void 0;const dl=He;function WE(t){return(0,dl.h)("svg",Object.assign({width:"16",height:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"},t),(0,dl.h)("path",{d:"M8.60675 0.155884L7.37816 1.28209L12.7723 7.16662H0V8.83328H12.6548L6.82149 14.6666L8 15.8451L15.8201 8.02501L8.60675 0.155884Z"}))}cs.ArrowLeftIcon=WE;var us={};Object.defineProperty(us,"__esModule",{value:!0});us.LaptopIcon=void 0;const ta=He;function UE(t){return(0,ta.h)("svg",Object.assign({width:"14",height:"14",viewBox:"0 0 14 14",xmlns:"http://www.w3.org/2000/svg"},t),(0,ta.h)("path",{d:"M1.8001 2.2002H12.2001V9.40019H1.8001V2.2002ZM3.4001 3.8002V7.80019H10.6001V3.8002H3.4001Z"}),(0,ta.h)("path",{d:"M13.4001 10.2002H0.600098C0.600098 11.0838 1.31644 11.8002 2.2001 11.8002H11.8001C12.6838 11.8002 13.4001 11.0838 13.4001 10.2002Z"}))}us.LaptopIcon=UE;var ls={};Object.defineProperty(ls,"__esModule",{value:!0});ls.SafeIcon=void 0;const pl=He;function HE(t){return(0,pl.h)("svg",Object.assign({width:"14",height:"14",viewBox:"0 0 14 14",xmlns:"http://www.w3.org/2000/svg"},t),(0,pl.h)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M0.600098 0.600098V11.8001H13.4001V0.600098H0.600098ZM7.0001 9.2001C5.3441 9.2001 4.0001 7.8561 4.0001 6.2001C4.0001 4.5441 5.3441 3.2001 7.0001 3.2001C8.6561 3.2001 10.0001 4.5441 10.0001 6.2001C10.0001 7.8561 8.6561 9.2001 7.0001 9.2001ZM0.600098 12.6001H3.8001V13.4001H0.600098V12.6001ZM10.2001 12.6001H13.4001V13.4001H10.2001V12.6001ZM8.8001 6.2001C8.8001 7.19421 7.99421 8.0001 7.0001 8.0001C6.00598 8.0001 5.2001 7.19421 5.2001 6.2001C5.2001 5.20598 6.00598 4.4001 7.0001 4.4001C7.99421 4.4001 8.8001 5.20598 8.8001 6.2001Z"}))}ls.SafeIcon=HE;var xc={};Object.defineProperty(xc,"__esModule",{value:!0});xc.default=".-cbwsdk-css-reset .-cbwsdk-try-extension{display:flex;margin-top:12px;height:202px;width:700px;border-radius:12px;padding:30px}.-cbwsdk-css-reset .-cbwsdk-try-extension.light{background:#fff}.-cbwsdk-css-reset .-cbwsdk-try-extension.dark{background:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-try-extension-column-half{flex:50%}.-cbwsdk-css-reset .-cbwsdk-try-extension-heading{font-style:normal;font-weight:500;font-size:25px;line-height:32px;margin:0;max-width:204px}.-cbwsdk-css-reset .-cbwsdk-try-extension-heading.light{color:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-try-extension-heading.dark{color:#fff}.-cbwsdk-css-reset .-cbwsdk-try-extension-cta{appearance:none;border:none;background:none;color:#0052ff;cursor:pointer;padding:0;text-decoration:none;display:block;font-weight:600;font-size:16px;line-height:24px}.-cbwsdk-css-reset .-cbwsdk-try-extension-cta.light{color:#0052ff}.-cbwsdk-css-reset .-cbwsdk-try-extension-cta.dark{color:#588af5}.-cbwsdk-css-reset .-cbwsdk-try-extension-cta-wrapper{display:flex;align-items:center;margin-top:12px}.-cbwsdk-css-reset .-cbwsdk-try-extension-cta-icon{display:block;margin-left:4px;height:14px}.-cbwsdk-css-reset .-cbwsdk-try-extension-list{display:flex;flex-direction:column;justify-content:center;align-items:center;margin:0;padding:0;list-style:none;height:100%}.-cbwsdk-css-reset .-cbwsdk-try-extension-list-item{display:flex;align-items:center;flex-flow:nowrap;margin-top:24px}.-cbwsdk-css-reset .-cbwsdk-try-extension-list-item:first-of-type{margin-top:0}.-cbwsdk-css-reset .-cbwsdk-try-extension-list-item-icon-wrapper{display:block}.-cbwsdk-css-reset .-cbwsdk-try-extension-list-item-icon{display:flex;height:32px;width:32px;border-radius:50%}.-cbwsdk-css-reset .-cbwsdk-try-extension-list-item-icon svg{margin:auto;display:block}.-cbwsdk-css-reset .-cbwsdk-try-extension-list-item-icon.light{background:#eef0f3}.-cbwsdk-css-reset .-cbwsdk-try-extension-list-item-icon.dark{background:#1e2025}.-cbwsdk-css-reset .-cbwsdk-try-extension-list-item-copy{display:block;font-weight:400;font-size:14px;line-height:20px;padding-left:12px}.-cbwsdk-css-reset .-cbwsdk-try-extension-list-item-copy.light{color:#5b636e}.-cbwsdk-css-reset .-cbwsdk-try-extension-list-item-copy.dark{color:#8a919e}";var pd=Q&&Q.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(as,"__esModule",{value:!0});as.TryExtensionContent=void 0;const Vt=pd(es),ve=He,ra=Bn,VE=cs,zE=us,qE=ls,GE=pd(xc);function QE({theme:t}){const[e,r]=(0,ra.useState)(!1),n=(0,ra.useCallback)(()=>{window.open("https://api.wallet.coinbase.com/rpc/v2/desktop/chrome","_blank")},[]),i=(0,ra.useCallback)(()=>{e?window.location.reload():(n(),r(!0))},[n,e]);return(0,ve.h)("div",{class:(0,Vt.default)("-cbwsdk-try-extension",t)},(0,ve.h)("style",null,GE.default),(0,ve.h)("div",{class:"-cbwsdk-try-extension-column-half"},(0,ve.h)("h3",{class:(0,Vt.default)("-cbwsdk-try-extension-heading",t)},"Or try the Coinbase Wallet browser extension"),(0,ve.h)("div",{class:"-cbwsdk-try-extension-cta-wrapper"},(0,ve.h)("button",{class:(0,Vt.default)("-cbwsdk-try-extension-cta",t),onClick:i},e?"Refresh":"Install"),(0,ve.h)("div",null,!e&&(0,ve.h)(VE.ArrowLeftIcon,{class:"-cbwsdk-try-extension-cta-icon",fill:t==="light"?"#0052FF":"#588AF5"})))),(0,ve.h)("div",{class:"-cbwsdk-try-extension-column-half"},(0,ve.h)("ul",{class:"-cbwsdk-try-extension-list"},(0,ve.h)("li",{class:"-cbwsdk-try-extension-list-item"},(0,ve.h)("div",{class:"-cbwsdk-try-extension-list-item-icon-wrapper"},(0,ve.h)("span",{class:(0,Vt.default)("-cbwsdk-try-extension-list-item-icon",t)},(0,ve.h)(zE.LaptopIcon,{fill:t==="light"?"#0A0B0D":"#FFFFFF"}))),(0,ve.h)("div",{class:(0,Vt.default)("-cbwsdk-try-extension-list-item-copy",t)},"Connect with dapps with just one click on your desktop browser")),(0,ve.h)("li",{class:"-cbwsdk-try-extension-list-item"},(0,ve.h)("div",{class:"-cbwsdk-try-extension-list-item-icon-wrapper"},(0,ve.h)("span",{class:(0,Vt.default)("-cbwsdk-try-extension-list-item-icon",t)},(0,ve.h)(qE.SafeIcon,{fill:t==="light"?"#0A0B0D":"#FFFFFF"}))),(0,ve.h)("div",{class:(0,Vt.default)("-cbwsdk-try-extension-list-item-copy",t)},"Add an additional layer of security by using a supported Ledger hardware wallet")))))}as.TryExtensionContent=QE;var Cc={};Object.defineProperty(Cc,"__esModule",{value:!0});Cc.default=".-cbwsdk-css-reset .-cbwsdk-connect-dialog{z-index:2147483647;position:fixed;top:0;left:0;right:0;bottom:0;display:flex;align-items:center;justify-content:center}.-cbwsdk-css-reset .-cbwsdk-connect-dialog-backdrop{z-index:2147483647;position:fixed;top:0;left:0;right:0;bottom:0;transition:opacity .25s}.-cbwsdk-css-reset .-cbwsdk-connect-dialog-backdrop.light{background-color:rgba(0,0,0,.5)}.-cbwsdk-css-reset .-cbwsdk-connect-dialog-backdrop.dark{background-color:rgba(50,53,61,.4)}.-cbwsdk-css-reset .-cbwsdk-connect-dialog-backdrop-hidden{opacity:0}.-cbwsdk-css-reset .-cbwsdk-connect-dialog-box{display:flex;position:relative;flex-direction:column;transform:scale(1);transition:opacity .25s,transform .25s}.-cbwsdk-css-reset .-cbwsdk-connect-dialog-box-hidden{opacity:0;transform:scale(0.85)}.-cbwsdk-css-reset .-cbwsdk-connect-dialog-container{display:block}.-cbwsdk-css-reset .-cbwsdk-connect-dialog-container-hidden{display:none}";var bd=Q&&Q.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Xi,"__esModule",{value:!0});Xi.ConnectDialog=void 0;const na=bd(es),zt=He,ia=Bn,ZE=ht,YE=as,KE=bd(Cc),JE=t=>{const{isOpen:e,darkMode:r}=t,[n,i]=(0,ia.useState)(!e),[s,o]=(0,ia.useState)(!e);(0,ia.useEffect)(()=>{const c=[window.setTimeout(()=>{o(!e)},10)];return e?i(!1):c.push(window.setTimeout(()=>{i(!0)},360)),()=>{c.forEach(window.clearTimeout)}},[t.isOpen]);const a=r?"dark":"light";return(0,zt.h)("div",{class:(0,na.default)("-cbwsdk-connect-dialog-container",n&&"-cbwsdk-connect-dialog-container-hidden")},(0,zt.h)("style",null,KE.default),(0,zt.h)("div",{class:(0,na.default)("-cbwsdk-connect-dialog-backdrop",a,s&&"-cbwsdk-connect-dialog-backdrop-hidden")}),(0,zt.h)("div",{class:"-cbwsdk-connect-dialog"},(0,zt.h)("div",{class:(0,na.default)("-cbwsdk-connect-dialog-box",s&&"-cbwsdk-connect-dialog-box-hidden")},t.connectDisabled?null:(0,zt.h)(ZE.ConnectContent,{theme:a,version:t.version,sessionId:t.sessionId,sessionSecret:t.sessionSecret,linkAPIUrl:t.linkAPIUrl,isConnected:t.isConnected,isParentConnection:t.isParentConnection,chainId:t.chainId,onCancel:t.onCancel}),(0,zt.h)(YE.TryExtensionContent,{theme:a}))))};Xi.ConnectDialog=JE;Object.defineProperty(Ji,"__esModule",{value:!0});Ji.LinkFlow=void 0;const sa=He,bl=Ur,XE=Xi;class e4{constructor(e){this.extensionUI$=new bl.BehaviorSubject({}),this.subscriptions=new bl.Subscription,this.isConnected=!1,this.chainId=1,this.isOpen=!1,this.onCancel=null,this.root=null,this.connectDisabled=!1,this.darkMode=e.darkMode,this.version=e.version,this.sessionId=e.sessionId,this.sessionSecret=e.sessionSecret,this.linkAPIUrl=e.linkAPIUrl,this.isParentConnection=e.isParentConnection,this.connected$=e.connected$,this.chainId$=e.chainId$}attach(e){this.root=document.createElement("div"),this.root.className="-cbwsdk-link-flow-root",e.appendChild(this.root),this.render(),this.subscriptions.add(this.connected$.subscribe(r=>{this.isConnected!==r&&(this.isConnected=r,this.render())})),this.subscriptions.add(this.chainId$.subscribe(r=>{this.chainId!==r&&(this.chainId=r,this.render())}))}detach(){var e;!this.root||(this.subscriptions.unsubscribe(),(0,sa.render)(null,this.root),(e=this.root.parentElement)===null||e===void 0||e.removeChild(this.root))}setConnectDisabled(e){this.connectDisabled=e}open(e){this.isOpen=!0,this.onCancel=e.onCancel,this.render()}close(){this.isOpen=!1,this.onCancel=null,this.render()}render(){if(!this.root)return;const e=this.extensionUI$.subscribe(()=>{!this.root||(0,sa.render)((0,sa.h)(XE.ConnectDialog,{darkMode:this.darkMode,version:this.version,sessionId:this.sessionId,sessionSecret:this.sessionSecret,linkAPIUrl:this.linkAPIUrl,isOpen:this.isOpen,isConnected:this.isConnected,isParentConnection:this.isParentConnection,chainId:this.chainId,onCancel:this.onCancel,connectDisabled:this.connectDisabled}),this.root)});this.subscriptions.add(e)}}Ji.LinkFlow=e4;var gd={},kc={};Object.defineProperty(kc,"__esModule",{value:!0});kc.default=".-cbwsdk-css-reset .-gear-container{margin-left:16px !important;margin-right:9px !important;display:flex;align-items:center;justify-content:center;width:24px;height:24px;transition:opacity .25s}.-cbwsdk-css-reset .-gear-container *{user-select:none}.-cbwsdk-css-reset .-gear-container svg{opacity:0;position:absolute}.-cbwsdk-css-reset .-gear-icon{height:12px;width:12px;z-index:10000}.-cbwsdk-css-reset .-cbwsdk-snackbar{align-items:flex-end;display:flex;flex-direction:column;position:fixed;right:0;top:0;z-index:2147483647}.-cbwsdk-css-reset .-cbwsdk-snackbar *{user-select:none}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance{display:flex;flex-direction:column;margin:8px 16px 0 16px;overflow:visible;text-align:left;transform:translateX(0);transition:opacity .25s,transform .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header:hover .-gear-container svg{opacity:1}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header{display:flex;align-items:center;background:#fff;overflow:hidden;border:1px solid #e7ebee;box-sizing:border-box;border-radius:8px;cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header-cblogo{margin:8px 8px 8px 8px}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header *{cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header-message{color:#000;font-size:13px;line-height:1.5;user-select:none}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu{background:#fff;transition:opacity .25s ease-in-out,transform .25s linear,visibility 0s;visibility:hidden;border:1px solid #e7ebee;box-sizing:border-box;border-radius:8px;opacity:0;flex-direction:column;padding-left:8px;padding-right:8px}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:last-child{margin-bottom:8px !important}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:hover{background:#f5f7f8;border-radius:6px;transition:background .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:hover span{color:#050f19;transition:color .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:hover svg path{fill:#000;transition:fill .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item{visibility:inherit;height:35px;margin-top:8px;margin-bottom:0;display:flex;flex-direction:row;align-items:center;padding:8px;cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item *{visibility:inherit;cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover{background:rgba(223,95,103,.2);transition:background .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover *{cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover svg path{fill:#df5f67;transition:fill .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover span{color:#df5f67;transition:color .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-info{color:#aaa;font-size:13px;margin:0 8px 0 32px;position:absolute}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-hidden{opacity:0;text-align:left;transform:translateX(25%);transition:opacity .5s linear}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-expanded .-cbwsdk-snackbar-instance-menu{opacity:1;display:flex;transform:translateY(8px);visibility:visible}";(function(t){var e=Q&&Q.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(t,"__esModule",{value:!0}),t.SnackbarInstance=t.SnackbarContainer=t.Snackbar=void 0;const r=e(es),n=He,i=Bn,s=e(kc),o="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIiIGhlaWdodD0iMTIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTEyIDYuNzV2LTEuNWwtMS43Mi0uNTdjLS4wOC0uMjctLjE5LS41Mi0uMzItLjc3bC44MS0xLjYyLTEuMDYtMS4wNi0xLjYyLjgxYy0uMjQtLjEzLS41LS4yNC0uNzctLjMyTDYuNzUgMGgtMS41bC0uNTcgMS43MmMtLjI3LjA4LS41My4xOS0uNzcuMzJsLTEuNjItLjgxLTEuMDYgMS4wNi44MSAxLjYyYy0uMTMuMjQtLjI0LjUtLjMyLjc3TDAgNS4yNXYxLjVsMS43Mi41N2MuMDguMjcuMTkuNTMuMzIuNzdsLS44MSAxLjYyIDEuMDYgMS4wNiAxLjYyLS44MWMuMjQuMTMuNS4yMy43Ny4zMkw1LjI1IDEyaDEuNWwuNTctMS43MmMuMjctLjA4LjUyLS4xOS43Ny0uMzJsMS42Mi44MSAxLjA2LTEuMDYtLjgxLTEuNjJjLjEzLS4yNC4yMy0uNS4zMi0uNzdMMTIgNi43NXpNNiA4LjVhMi41IDIuNSAwIDAxMC01IDIuNSAyLjUgMCAwMTAgNXoiIGZpbGw9IiMwNTBGMTkiLz48L3N2Zz4=";function a(g){switch(g){case"coinbase-app":return"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAiIGhlaWdodD0iMzAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTE0LjY3NCAxOC44NThjLTIuMDQ1IDAtMy42NDgtMS43MjItMy42NDgtMy44NDVzMS42NTktMy44NDUgMy42NDgtMy44NDVjMS44MjQgMCAzLjMxNyAxLjM3NyAzLjU5MyAzLjIxNGgzLjcwM2MtLjMzMS0zLjk2LTMuNDgyLTcuMDU5LTcuMjk2LTcuMDU5LTQuMDM0IDAtNy4zNSAzLjQ0My03LjM1IDcuNjkgMCA0LjI0NiAzLjI2IDcuNjkgNy4zNSA3LjY5IDMuODcgMCA2Ljk2NS0zLjEgNy4yOTYtNy4wNTloLTMuNzAzYy0uMjc2IDEuODM2LTEuNzY5IDMuMjE0LTMuNTkzIDMuMjE0WiIgZmlsbD0iI2ZmZiIvPjxwYXRoIGQ9Ik0wIDEwLjY3OGMwLTMuNzExIDAtNS41OTYuNzQyLTcuMDIzQTYuNTMyIDYuNTMyIDAgMCAxIDMuNjU1Ljc0MkM1LjA4MiAwIDYuOTY3IDAgMTAuNjc4IDBoNy45MzhjMy43MTEgMCA1LjU5NiAwIDcuMDIzLjc0MmE2LjUzMSA2LjUzMSAwIDAgMSAyLjkxMyAyLjkxM2MuNzQyIDEuNDI3Ljc0MiAzLjMxMi43NDIgNy4wMjN2Ny45MzhjMCAzLjcxMSAwIDUuNTk2LS43NDIgNy4wMjNhNi41MzEgNi41MzEgMCAwIDEtMi45MTMgMi45MTNjLTEuNDI3Ljc0Mi0zLjMxMi43NDItNy4wMjMuNzQyaC03LjkzOGMtMy43MTEgMC01LjU5NiAwLTcuMDIzLS43NDJhNi41MzEgNi41MzEgMCAwIDEtMi45MTMtMi45MTNDMCAyNC4yMTIgMCAyMi4zODQgMCAxOC42MTZ2LTcuOTM4WiIgZmlsbD0iIzAwNTJGRiIvPjxwYXRoIGQ9Ik0xNC42ODQgMTkuNzczYy0yLjcyNyAwLTQuODY0LTIuMjk1LTQuODY0LTUuMTI2IDAtMi44MzEgMi4yMS01LjEyNyA0Ljg2NC01LjEyNyAyLjQzMiAwIDQuNDIyIDEuODM3IDQuNzkgNC4yODVoNC45MzhjLS40NDItNS4yOC00LjY0My05LjQxMS05LjcyOC05LjQxMS01LjM4IDAtOS44MDIgNC41OS05LjgwMiAxMC4yNTMgMCA1LjY2MiA0LjM0OCAxMC4yNTMgOS44MDIgMTAuMjUzIDUuMTU5IDAgOS4yODYtNC4xMzIgOS43MjgtOS40MTFoLTQuOTM4Yy0uMzY4IDIuNDQ4LTIuMzU4IDQuMjg0LTQuNzkgNC4yODRaIiBmaWxsPSIjZmZmIi8+PC9zdmc+";case"coinbase-wallet-app":default:return"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTEuNDkyIDEwLjQxOWE4LjkzIDguOTMgMCAwMTguOTMtOC45M2gxMS4xNjNhOC45MyA4LjkzIDAgMDE4LjkzIDguOTN2MTEuMTYzYTguOTMgOC45MyAwIDAxLTguOTMgOC45M0gxMC40MjJhOC45MyA4LjkzIDAgMDEtOC45My04LjkzVjEwLjQxOXoiIGZpbGw9IiMxNjUyRjAiLz48cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEwLjQxOSAwSDIxLjU4QzI3LjMzNSAwIDMyIDQuNjY1IDMyIDEwLjQxOVYyMS41OEMzMiAyNy4zMzUgMjcuMzM1IDMyIDIxLjU4MSAzMkgxMC40MkM0LjY2NSAzMiAwIDI3LjMzNSAwIDIxLjU4MVYxMC40MkMwIDQuNjY1IDQuNjY1IDAgMTAuNDE5IDB6bTAgMS40ODhhOC45MyA4LjkzIDAgMDAtOC45MyA4LjkzdjExLjE2M2E4LjkzIDguOTMgMCAwMDguOTMgOC45M0gyMS41OGE4LjkzIDguOTMgMCAwMDguOTMtOC45M1YxMC40MmE4LjkzIDguOTMgMCAwMC04LjkzLTguOTNIMTAuNDJ6IiBmaWxsPSIjZmZmIi8+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xNS45OTggMjYuMDQ5Yy01LjU0OSAwLTEwLjA0Ny00LjQ5OC0xMC4wNDctMTAuMDQ3IDAtNS41NDggNC40OTgtMTAuMDQ2IDEwLjA0Ny0xMC4wNDYgNS41NDggMCAxMC4wNDYgNC40OTggMTAuMDQ2IDEwLjA0NiAwIDUuNTQ5LTQuNDk4IDEwLjA0Ny0xMC4wNDYgMTAuMDQ3eiIgZmlsbD0iI2ZmZiIvPjxwYXRoIGQ9Ik0xMi43NjIgMTQuMjU0YzAtLjgyMi42NjctMS40ODkgMS40ODktMS40ODloMy40OTdjLjgyMiAwIDEuNDg4LjY2NiAxLjQ4OCAxLjQ4OXYzLjQ5N2MwIC44MjItLjY2NiAxLjQ4OC0xLjQ4OCAxLjQ4OGgtMy40OTdhMS40ODggMS40ODggMCAwMS0xLjQ4OS0xLjQ4OHYtMy40OTh6IiBmaWxsPSIjMTY1MkYwIi8+PC9zdmc+"}}class c{constructor(f){this.items=new Map,this.nextItemKey=0,this.root=null,this.darkMode=f.darkMode}attach(f){this.root=document.createElement("div"),this.root.className="-cbwsdk-snackbar-root",f.appendChild(this.root),this.render()}presentItem(f){const p=this.nextItemKey++;return this.items.set(p,f),this.render(),()=>{this.items.delete(p),this.render()}}clear(){this.items.clear(),this.render()}render(){!this.root||(0,n.render)((0,n.h)("div",null,(0,n.h)(t.SnackbarContainer,{darkMode:this.darkMode},Array.from(this.items.entries()).map(([f,p])=>(0,n.h)(t.SnackbarInstance,Object.assign({},p,{key:f}))))),this.root)}}t.Snackbar=c;const u=g=>(0,n.h)("div",{class:(0,r.default)("-cbwsdk-snackbar-container")},(0,n.h)("style",null,s.default),(0,n.h)("div",{class:"-cbwsdk-snackbar"},g.children));t.SnackbarContainer=u;const l=({autoExpand:g,message:f,menuItems:p,appSrc:y})=>{const[E,k]=(0,i.useState)(!0),[b,v]=(0,i.useState)(g!=null?g:!1);(0,i.useEffect)(()=>{const A=[window.setTimeout(()=>{k(!1)},1),window.setTimeout(()=>{v(!0)},1e4)];return()=>{A.forEach(window.clearTimeout)}});const w=()=>{v(!b)};return(0,n.h)("div",{class:(0,r.default)("-cbwsdk-snackbar-instance",E&&"-cbwsdk-snackbar-instance-hidden",b&&"-cbwsdk-snackbar-instance-expanded")},(0,n.h)("div",{class:"-cbwsdk-snackbar-instance-header",onClick:w},(0,n.h)("img",{src:a(y),class:"-cbwsdk-snackbar-instance-header-cblogo"}),(0,n.h)("div",{class:"-cbwsdk-snackbar-instance-header-message"},f),(0,n.h)("div",{class:"-gear-container"},!b&&(0,n.h)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,n.h)("circle",{cx:"12",cy:"12",r:"12",fill:"#F5F7F8"})),(0,n.h)("img",{src:o,class:"-gear-icon",title:"Expand"}))),p&&p.length>0&&(0,n.h)("div",{class:"-cbwsdk-snackbar-instance-menu"},p.map((A,N)=>(0,n.h)("div",{class:(0,r.default)("-cbwsdk-snackbar-instance-menu-item",A.isRed&&"-cbwsdk-snackbar-instance-menu-item-is-red"),onClick:A.onClick,key:N},(0,n.h)("svg",{width:A.svgWidth,height:A.svgHeight,viewBox:"0 0 10 11",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,n.h)("path",{"fill-rule":A.defaultFillRule,"clip-rule":A.defaultClipRule,d:A.path,fill:"#AAAAAA"})),(0,n.h)("span",{class:(0,r.default)("-cbwsdk-snackbar-instance-menu-item-info",A.isRed&&"-cbwsdk-snackbar-instance-menu-item-info-is-red")},A.info)))))};t.SnackbarInstance=l})(gd);var fs={},Ac={};Object.defineProperty(Ac,"__esModule",{value:!0});Ac.default='@namespace svg "http://www.w3.org/2000/svg";.-cbwsdk-css-reset,.-cbwsdk-css-reset *{animation:none;animation-delay:0;animation-direction:normal;animation-duration:0;animation-fill-mode:none;animation-iteration-count:1;animation-name:none;animation-play-state:running;animation-timing-function:ease;backface-visibility:visible;background:0;background-attachment:scroll;background-clip:border-box;background-color:rgba(0,0,0,0);background-image:none;background-origin:padding-box;background-position:0 0;background-position-x:0;background-position-y:0;background-repeat:repeat;background-size:auto auto;border:0;border-style:none;border-width:medium;border-color:inherit;border-bottom:0;border-bottom-color:inherit;border-bottom-left-radius:0;border-bottom-right-radius:0;border-bottom-style:none;border-bottom-width:medium;border-collapse:separate;border-image:none;border-left:0;border-left-color:inherit;border-left-style:none;border-left-width:medium;border-radius:0;border-right:0;border-right-color:inherit;border-right-style:none;border-right-width:medium;border-spacing:0;border-top:0;border-top-color:inherit;border-top-left-radius:0;border-top-right-radius:0;border-top-style:none;border-top-width:medium;box-shadow:none;box-sizing:border-box;caption-side:top;clear:none;clip:auto;color:inherit;columns:auto;column-count:auto;column-fill:balance;column-gap:normal;column-rule:medium none currentColor;column-rule-color:currentColor;column-rule-style:none;column-rule-width:none;column-span:1;column-width:auto;counter-increment:none;counter-reset:none;direction:ltr;empty-cells:show;float:none;font:normal;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Helvetica Neue",Arial,sans-serif;font-size:medium;font-style:normal;font-variant:normal;font-weight:normal;height:auto;hyphens:none;letter-spacing:normal;line-height:normal;list-style:none;list-style-image:none;list-style-position:outside;list-style-type:disc;margin:0;margin-bottom:0;margin-left:0;margin-right:0;margin-top:0;opacity:1;orphans:0;outline:0;outline-color:invert;outline-style:none;outline-width:medium;overflow:visible;overflow-x:visible;overflow-y:visible;padding:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;page-break-after:auto;page-break-before:auto;page-break-inside:auto;perspective:none;perspective-origin:50% 50%;pointer-events:auto;position:static;quotes:"\\201C" "\\201D" "\\2018" "\\2019";tab-size:8;table-layout:auto;text-align:inherit;text-align-last:auto;text-decoration:none;text-decoration-color:inherit;text-decoration-line:none;text-decoration-style:solid;text-indent:0;text-shadow:none;text-transform:none;transform:none;transform-style:flat;transition:none;transition-delay:0s;transition-duration:0s;transition-property:none;transition-timing-function:ease;unicode-bidi:normal;vertical-align:baseline;visibility:visible;white-space:normal;widows:0;word-spacing:normal;z-index:auto}.-cbwsdk-css-reset strong{font-weight:bold}.-cbwsdk-css-reset *{box-sizing:border-box;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Helvetica Neue",Arial,sans-serif;line-height:1}.-cbwsdk-css-reset [class*=container]{margin:0;padding:0}.-cbwsdk-css-reset style{display:none}';var t4=Q&&Q.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(fs,"__esModule",{value:!0});fs.injectCssReset=void 0;const r4=t4(Ac);function n4(){const t=document.createElement("style");t.type="text/css",t.appendChild(document.createTextNode(r4.default)),document.documentElement.appendChild(t)}fs.injectCssReset=n4;Object.defineProperty(Ki,"__esModule",{value:!0});Ki.WalletSDKUI=void 0;const i4=Ji,s4=gd,o4=fs;class a4{constructor(e){this.standalone=null,this.attached=!1,this.appSrc=null,this.snackbar=new s4.Snackbar({darkMode:e.darkMode}),this.linkFlow=new i4.LinkFlow({darkMode:e.darkMode,version:e.version,sessionId:e.session.id,sessionSecret:e.session.secret,linkAPIUrl:e.linkAPIUrl,connected$:e.connected$,chainId$:e.chainId$,isParentConnection:!1})}attach(){if(this.attached)throw new Error("Coinbase Wallet SDK UI is already attached");const e=document.documentElement,r=document.createElement("div");r.className="-cbwsdk-css-reset",e.appendChild(r),this.linkFlow.attach(r),this.snackbar.attach(r),this.attached=!0,(0,o4.injectCssReset)()}setConnectDisabled(e){this.linkFlow.setConnectDisabled(e)}addEthereumChain(e){}watchAsset(e){}switchEthereumChain(e){}requestEthereumAccounts(e){this.linkFlow.open({onCancel:e.onCancel})}hideRequestEthereumAccounts(){this.linkFlow.close()}signEthereumMessage(e){}signEthereumTransaction(e){}submitEthereumTransaction(e){}ethereumAddressFromSignedMessage(e){}showConnecting(e){let r;return e.isUnlinkedErrorState?r={autoExpand:!0,message:"Connection lost",appSrc:this.appSrc,menuItems:[{isRed:!1,info:"Reset connection",svgWidth:"10",svgHeight:"11",path:"M5.00008 0.96875C6.73133 0.96875 8.23758 1.94375 9.00008 3.375L10.0001 2.375V5.5H9.53133H7.96883H6.87508L7.80633 4.56875C7.41258 3.3875 6.31258 2.53125 5.00008 2.53125C3.76258 2.53125 2.70633 3.2875 2.25633 4.36875L0.812576 3.76875C1.50008 2.125 3.11258 0.96875 5.00008 0.96875ZM2.19375 6.43125C2.5875 7.6125 3.6875 8.46875 5 8.46875C6.2375 8.46875 7.29375 7.7125 7.74375 6.63125L9.1875 7.23125C8.5 8.875 6.8875 10.0312 5 10.0312C3.26875 10.0312 1.7625 9.05625 1 7.625L0 8.625V5.5H0.46875H2.03125H3.125L2.19375 6.43125Z",defaultFillRule:"evenodd",defaultClipRule:"evenodd",onClick:e.onResetConnection}]}:r={message:"Confirm on phone",appSrc:this.appSrc,menuItems:[{isRed:!0,info:"Cancel transaction",svgWidth:"11",svgHeight:"11",path:"M10.3711 1.52346L9.21775 0.370117L5.37109 4.21022L1.52444 0.370117L0.371094 1.52346L4.2112 5.37012L0.371094 9.21677L1.52444 10.3701L5.37109 6.53001L9.21775 10.3701L10.3711 9.21677L6.53099 5.37012L10.3711 1.52346Z",defaultFillRule:"inherit",defaultClipRule:"inherit",onClick:e.onCancel},{isRed:!1,info:"Reset connection",svgWidth:"10",svgHeight:"11",path:"M5.00008 0.96875C6.73133 0.96875 8.23758 1.94375 9.00008 3.375L10.0001 2.375V5.5H9.53133H7.96883H6.87508L7.80633 4.56875C7.41258 3.3875 6.31258 2.53125 5.00008 2.53125C3.76258 2.53125 2.70633 3.2875 2.25633 4.36875L0.812576 3.76875C1.50008 2.125 3.11258 0.96875 5.00008 0.96875ZM2.19375 6.43125C2.5875 7.6125 3.6875 8.46875 5 8.46875C6.2375 8.46875 7.29375 7.7125 7.74375 6.63125L9.1875 7.23125C8.5 8.875 6.8875 10.0312 5 10.0312C3.26875 10.0312 1.7625 9.05625 1 7.625L0 8.625V5.5H0.46875H2.03125H3.125L2.19375 6.43125Z",defaultFillRule:"evenodd",defaultClipRule:"evenodd",onClick:e.onResetConnection}]},this.snackbar.presentItem(r)}setAppSrc(e){this.appSrc=e}reloadUI(){document.location.reload()}inlineAccountsResponse(){return!1}inlineAddEthereumChain(e){return!1}inlineWatchAsset(){return!1}inlineSwitchEthereumChain(){return!1}setStandalone(e){this.standalone=e}isStandalone(){var e;return(e=this.standalone)!==null&&e!==void 0?e:!1}}Ki.WalletSDKUI=a4;var hs={},ds={};Object.defineProperty(ds,"__esModule",{value:!0});var gr;(function(t){t.typeOfFunction="function",t.boolTrue=!0})(gr||(gr={}));function yd(t,e,r){if(!r||typeof r.value!==gr.typeOfFunction)throw new TypeError("Only methods can be decorated with @bind. <"+e+"> is not a method!");return{configurable:gr.boolTrue,get:function(){var n=r.value.bind(this);return Object.defineProperty(this,e,{value:n,configurable:gr.boolTrue,writable:gr.boolTrue}),n}}}ds.bind=yd;ds.default=yd;var ps={},Qe={};Object.defineProperty(Qe,"__esModule",{value:!0});Qe.ClientMessagePublishEvent=Qe.ClientMessageSetSessionConfig=Qe.ClientMessageGetSessionConfig=Qe.ClientMessageIsLinked=Qe.ClientMessageHostSession=void 0;function c4(t){return Object.assign({type:"HostSession"},t)}Qe.ClientMessageHostSession=c4;function u4(t){return Object.assign({type:"IsLinked"},t)}Qe.ClientMessageIsLinked=u4;function l4(t){return Object.assign({type:"GetSessionConfig"},t)}Qe.ClientMessageGetSessionConfig=l4;function f4(t){return Object.assign({type:"SetSessionConfig"},t)}Qe.ClientMessageSetSessionConfig=f4;function h4(t){return Object.assign({type:"PublishEvent"},t)}Qe.ClientMessagePublishEvent=h4;var vd={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.RxWebSocket=t.ConnectionState=void 0;const e=Ur,r=Ti;var n;(function(s){s[s.DISCONNECTED=0]="DISCONNECTED",s[s.CONNECTING=1]="CONNECTING",s[s.CONNECTED=2]="CONNECTED"})(n=t.ConnectionState||(t.ConnectionState={}));class i{constructor(o,a=WebSocket){this.WebSocketClass=a,this.webSocket=null,this.connectionStateSubject=new e.BehaviorSubject(n.DISCONNECTED),this.incomingDataSubject=new e.Subject,this.url=o.replace(/^http/,"ws")}connect(){return this.webSocket?(0,e.throwError)(new Error("webSocket object is not null")):new e.Observable(o=>{let a;try{this.webSocket=a=new this.WebSocketClass(this.url)}catch(c){o.error(c);return}this.connectionStateSubject.next(n.CONNECTING),a.onclose=c=>{this.clearWebSocket(),o.error(new Error(`websocket error ${c.code}: ${c.reason}`)),this.connectionStateSubject.next(n.DISCONNECTED)},a.onopen=c=>{o.next(),o.complete(),this.connectionStateSubject.next(n.CONNECTED)},a.onmessage=c=>{this.incomingDataSubject.next(c.data)}}).pipe((0,r.take)(1))}disconnect(){const{webSocket:o}=this;if(!!o){this.clearWebSocket(),this.connectionStateSubject.next(n.DISCONNECTED);try{o.close()}catch{}}}get connectionState$(){return this.connectionStateSubject.asObservable()}get incomingData$(){return this.incomingDataSubject.asObservable()}get incomingJSONData$(){return this.incomingData$.pipe((0,r.flatMap)(o=>{let a;try{a=JSON.parse(o)}catch{return(0,e.empty)()}return(0,e.of)(a)}))}sendData(o){const{webSocket:a}=this;if(!a)throw new Error("websocket is not connected");a.send(o)}clearWebSocket(){const{webSocket:o}=this;!o||(this.webSocket=null,o.onclose=null,o.onerror=null,o.onmessage=null,o.onopen=null)}}t.RxWebSocket=i})(vd);var bs={};Object.defineProperty(bs,"__esModule",{value:!0});bs.isServerMessageFail=void 0;function d4(t){return t&&t.type==="Fail"&&typeof t.id=="number"&&typeof t.sessionId=="string"&&typeof t.error=="string"}bs.isServerMessageFail=d4;Object.defineProperty(ps,"__esModule",{value:!0});ps.WalletSDKConnection=void 0;const tt=Ur,ee=Ti,Jr=Br,fr=In,Xr=Qe,en=jr,Qn=vd,oa=bs,gl=1e4,p4=6e4;class b4{constructor(e,r,n,i,s=WebSocket){this.sessionId=e,this.sessionKey=r,this.diagnostic=i,this.subscriptions=new tt.Subscription,this.destroyed=!1,this.lastHeartbeatResponse=0,this.nextReqId=(0,fr.IntNumber)(1),this.connectedSubject=new tt.BehaviorSubject(!1),this.linkedSubject=new tt.BehaviorSubject(!1),this.sessionConfigSubject=new tt.ReplaySubject(1);const o=new Qn.RxWebSocket(n+"/rpc",s);this.ws=o,this.subscriptions.add(o.connectionState$.pipe((0,ee.tap)(a=>{var c;return(c=this.diagnostic)===null||c===void 0?void 0:c.log(en.EVENTS.CONNECTED_STATE_CHANGE,{state:a,sessionIdHash:Jr.Session.hash(e)})}),(0,ee.skip)(1),(0,ee.filter)(a=>a===Qn.ConnectionState.DISCONNECTED&&!this.destroyed),(0,ee.delay)(5e3),(0,ee.filter)(a=>!this.destroyed),(0,ee.flatMap)(a=>o.connect()),(0,ee.retry)()).subscribe()),this.subscriptions.add(o.connectionState$.pipe((0,ee.skip)(2),(0,ee.switchMap)(a=>(0,tt.iif)(()=>a===Qn.ConnectionState.CONNECTED,this.authenticate().pipe((0,ee.tap)(c=>this.sendIsLinked()),(0,ee.tap)(c=>this.sendGetSessionConfig()),(0,ee.map)(c=>!0)),(0,tt.of)(!1))),(0,ee.distinctUntilChanged)(),(0,ee.catchError)(a=>(0,tt.of)(!1))).subscribe(a=>this.connectedSubject.next(a))),this.subscriptions.add(o.connectionState$.pipe((0,ee.skip)(1),(0,ee.switchMap)(a=>(0,tt.iif)(()=>a===Qn.ConnectionState.CONNECTED,(0,tt.timer)(0,gl)))).subscribe(a=>a===0?this.updateLastHeartbeat():this.heartbeat())),this.subscriptions.add(o.incomingData$.pipe((0,ee.filter)(a=>a==="h")).subscribe(a=>this.updateLastHeartbeat())),this.subscriptions.add(o.incomingJSONData$.pipe((0,ee.filter)(a=>["IsLinkedOK","Linked"].includes(a.type))).subscribe(a=>{var c;const u=a;(c=this.diagnostic)===null||c===void 0||c.log(en.EVENTS.LINKED,{sessionIdHash:Jr.Session.hash(e),linked:u.linked,type:a.type,onlineGuests:u.onlineGuests}),this.linkedSubject.next(u.linked||u.onlineGuests>0)})),this.subscriptions.add(o.incomingJSONData$.pipe((0,ee.filter)(a=>["GetSessionConfigOK","SessionConfigUpdated"].includes(a.type))).subscribe(a=>{var c;const u=a;(c=this.diagnostic)===null||c===void 0||c.log(en.EVENTS.SESSION_CONFIG_RECEIVED,{sessionIdHash:Jr.Session.hash(e),metadata_keys:u&&u.metadata?Object.keys(u.metadata):void 0}),this.sessionConfigSubject.next({webhookId:u.webhookId,webhookUrl:u.webhookUrl,metadata:u.metadata})}))}connect(){var e;if(this.destroyed)throw new Error("instance is destroyed");(e=this.diagnostic)===null||e===void 0||e.log(en.EVENTS.STARTED_CONNECTING,{sessionIdHash:Jr.Session.hash(this.sessionId)}),this.ws.connect().subscribe()}destroy(){var e;this.subscriptions.unsubscribe(),this.ws.disconnect(),(e=this.diagnostic)===null||e===void 0||e.log(en.EVENTS.DISCONNECTED,{sessionIdHash:Jr.Session.hash(this.sessionId)}),this.destroyed=!0}get isDestroyed(){return this.destroyed}get connected$(){return this.connectedSubject.asObservable()}get onceConnected$(){return this.connected$.pipe((0,ee.filter)(e=>e),(0,ee.take)(1),(0,ee.map)(()=>{}))}get linked$(){return this.linkedSubject.asObservable()}get onceLinked$(){return this.linked$.pipe((0,ee.filter)(e=>e),(0,ee.take)(1),(0,ee.map)(()=>{}))}get sessionConfig$(){return this.sessionConfigSubject.asObservable()}get incomingEvent$(){return this.ws.incomingJSONData$.pipe((0,ee.filter)(e=>{if(e.type!=="Event")return!1;const r=e;return typeof r.sessionId=="string"&&typeof r.eventId=="string"&&typeof r.event=="string"&&typeof r.data=="string"}),(0,ee.map)(e=>e))}setSessionMetadata(e,r){const n=(0,Xr.ClientMessageSetSessionConfig)({id:(0,fr.IntNumber)(this.nextReqId++),sessionId:this.sessionId,metadata:{[e]:r}});return this.onceConnected$.pipe((0,ee.flatMap)(i=>this.makeRequest(n)),(0,ee.map)(i=>{if((0,oa.isServerMessageFail)(i))throw new Error(i.error||"failed to set session metadata")}))}publishEvent(e,r,n=!1){const i=(0,Xr.ClientMessagePublishEvent)({id:(0,fr.IntNumber)(this.nextReqId++),sessionId:this.sessionId,event:e,data:r,callWebhook:n});return this.onceLinked$.pipe((0,ee.flatMap)(s=>this.makeRequest(i)),(0,ee.map)(s=>{if((0,oa.isServerMessageFail)(s))throw new Error(s.error||"failed to publish event");return s.eventId}))}sendData(e){this.ws.sendData(JSON.stringify(e))}updateLastHeartbeat(){this.lastHeartbeatResponse=Date.now()}heartbeat(){if(Date.now()-this.lastHeartbeatResponse>gl*2){this.ws.disconnect();return}try{this.ws.sendData("h")}catch{}}makeRequest(e,r=p4){const n=e.id;try{this.sendData(e)}catch(i){return(0,tt.throwError)(i)}return this.ws.incomingJSONData$.pipe((0,ee.timeoutWith)(r,(0,tt.throwError)(new Error(`request ${n} timed out`))),(0,ee.filter)(i=>i.id===n),(0,ee.take)(1))}authenticate(){const e=(0,Xr.ClientMessageHostSession)({id:(0,fr.IntNumber)(this.nextReqId++),sessionId:this.sessionId,sessionKey:this.sessionKey});return this.makeRequest(e).pipe((0,ee.map)(r=>{if((0,oa.isServerMessageFail)(r))throw new Error(r.error||"failed to authentcate")}))}sendIsLinked(){const e=(0,Xr.ClientMessageIsLinked)({id:(0,fr.IntNumber)(this.nextReqId++),sessionId:this.sessionId});this.sendData(e)}sendGetSessionConfig(){const e=(0,Xr.ClientMessageGetSessionConfig)({id:(0,fr.IntNumber)(this.nextReqId++),sessionId:this.sessionId});this.sendData(e)}}ps.WalletSDKConnection=b4;var gs={};Object.defineProperty(gs,"__esModule",{value:!0});gs.WalletUIError=void 0;class vn extends Error{constructor(e,r){super(e),this.message=e,this.errorCode=r}}gs.WalletUIError=vn;vn.UserRejectedRequest=new vn("User rejected request");vn.SwitchEthereumChainUnsupportedChainId=new vn("Unsupported chainId",4902);var Nr={};Object.defineProperty(Nr,"__esModule",{value:!0});Nr.decrypt=Nr.encrypt=void 0;const g4=Ur,_i=B;async function y4(t,e){if(e.length!==64)throw Error("secret must be 256 bits");const r=crypto.getRandomValues(new Uint8Array(12)),n=await crypto.subtle.importKey("raw",(0,_i.hexStringToUint8Array)(e),{name:"aes-gcm"},!1,["encrypt","decrypt"]),i=new TextEncoder,s=await window.crypto.subtle.encrypt({name:"AES-GCM",iv:r},n,i.encode(t)),o=16,a=s.slice(s.byteLength-o),c=s.slice(0,s.byteLength-o),u=new Uint8Array(a),l=new Uint8Array(c),g=new Uint8Array([...r,...u,...l]);return(0,_i.uint8ArrayToHex)(g)}Nr.encrypt=y4;function v4(t,e){if(e.length!==64)throw Error("secret must be 256 bits");return new g4.Observable(r=>{(async function(){const n=await crypto.subtle.importKey("raw",(0,_i.hexStringToUint8Array)(e),{name:"aes-gcm"},!1,["encrypt","decrypt"]),i=(0,_i.hexStringToUint8Array)(t),s=i.slice(0,12),o=i.slice(12,28),a=i.slice(28),c=new Uint8Array([...a,...o]),u={name:"AES-GCM",iv:new Uint8Array(s)};try{const l=await window.crypto.subtle.decrypt(u,n,c),g=new TextDecoder;r.next(g.decode(l)),r.complete()}catch(l){r.error(l)}})()})}Nr.decrypt=v4;var Mc={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Web3Method=void 0,function(e){e.requestEthereumAccounts="requestEthereumAccounts",e.signEthereumMessage="signEthereumMessage",e.signEthereumTransaction="signEthereumTransaction",e.submitEthereumTransaction="submitEthereumTransaction",e.ethereumAddressFromSignedMessage="ethereumAddressFromSignedMessage",e.scanQRCode="scanQRCode",e.generic="generic",e.childRequestEthereumAccounts="childRequestEthereumAccounts",e.addEthereumChain="addEthereumChain",e.switchEthereumChain="switchEthereumChain",e.makeEthereumJSONRPCRequest="makeEthereumJSONRPCRequest",e.watchAsset="watchAsset",e.selectProvider="selectProvider"}(t.Web3Method||(t.Web3Method={}))})(Mc);var ys={},vs={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.RelayMessageType=void 0,function(e){e.SESSION_ID_REQUEST="SESSION_ID_REQUEST",e.SESSION_ID_RESPONSE="SESSION_ID_RESPONSE",e.LINKED="LINKED",e.UNLINKED="UNLINKED",e.WEB3_REQUEST="WEB3_REQUEST",e.WEB3_REQUEST_CANCELED="WEB3_REQUEST_CANCELED",e.WEB3_RESPONSE="WEB3_RESPONSE"}(t.RelayMessageType||(t.RelayMessageType={}))})(vs);Object.defineProperty(ys,"__esModule",{value:!0});ys.Web3RequestCanceledMessage=void 0;const m4=vs;function _4(t){return{type:m4.RelayMessageType.WEB3_REQUEST_CANCELED,id:t}}ys.Web3RequestCanceledMessage=_4;var ms={};Object.defineProperty(ms,"__esModule",{value:!0});ms.Web3RequestMessage=void 0;const w4=vs;function S4(t){return Object.assign({type:w4.RelayMessageType.WEB3_REQUEST},t)}ms.Web3RequestMessage=S4;var fe={};Object.defineProperty(fe,"__esModule",{value:!0});fe.EthereumAddressFromSignedMessageResponse=fe.SubmitEthereumTransactionResponse=fe.SignEthereumTransactionResponse=fe.SignEthereumMessageResponse=fe.isRequestEthereumAccountsResponse=fe.SelectProviderResponse=fe.WatchAssetReponse=fe.RequestEthereumAccountsResponse=fe.SwitchEthereumChainResponse=fe.AddEthereumChainResponse=fe.ErrorResponse=void 0;const bt=Mc;function E4(t,e,r){return{method:t,errorMessage:e,errorCode:r}}fe.ErrorResponse=E4;function x4(t){return{method:bt.Web3Method.addEthereumChain,result:t}}fe.AddEthereumChainResponse=x4;function C4(t){return{method:bt.Web3Method.switchEthereumChain,result:t}}fe.SwitchEthereumChainResponse=C4;function k4(t){return{method:bt.Web3Method.requestEthereumAccounts,result:t}}fe.RequestEthereumAccountsResponse=k4;function A4(t){return{method:bt.Web3Method.watchAsset,result:t}}fe.WatchAssetReponse=A4;function M4(t){return{method:bt.Web3Method.selectProvider,result:t}}fe.SelectProviderResponse=M4;function I4(t){return t&&t.method===bt.Web3Method.requestEthereumAccounts}fe.isRequestEthereumAccountsResponse=I4;function R4(t){return{method:bt.Web3Method.signEthereumMessage,result:t}}fe.SignEthereumMessageResponse=R4;function T4(t){return{method:bt.Web3Method.signEthereumTransaction,result:t}}fe.SignEthereumTransactionResponse=T4;function O4(t){return{method:bt.Web3Method.submitEthereumTransaction,result:t}}fe.SubmitEthereumTransactionResponse=O4;function N4(t){return{method:bt.Web3Method.ethereumAddressFromSignedMessage,result:t}}fe.EthereumAddressFromSignedMessageResponse=N4;var Lr={};Object.defineProperty(Lr,"__esModule",{value:!0});Lr.isWeb3ResponseMessage=Lr.Web3ResponseMessage=void 0;const md=vs;function L4(t){return Object.assign({type:md.RelayMessageType.WEB3_RESPONSE},t)}Lr.Web3ResponseMessage=L4;function P4(t){return t&&t.type===md.RelayMessageType.WEB3_RESPONSE}Lr.isWeb3ResponseMessage=P4;var D4=Q&&Q.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),j4=Q&&Q.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),_d=Q&&Q.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s},B4=Q&&Q.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&D4(e,t,r);return j4(e,t),e},F4=Q&&Q.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(hs,"__esModule",{value:!0});hs.WalletSDKRelay=void 0;const wd=F4(ds),yl=ki,tn=Ur,_e=Ti,Ne=jr,$4=ps,aa=gs,W4=In,le=B,kt=B4(Nr),At=Br,Zn=it,Ee=Mc,U4=ys,H4=ms,$e=fe,Pe=Lr;class nt extends Zn.WalletSDKRelayAbstract{constructor(e){var r;super(),this.accountsCallback=null,this.chainCallback=null,this.dappDefaultChainSubject=new tn.BehaviorSubject(1),this.dappDefaultChain=1,this.appName="",this.appLogoUrl=null,this.subscriptions=new tn.Subscription,this.linkAPIUrl=e.linkAPIUrl,this.storage=e.storage,this.options=e;const{session:n,ui:i,connection:s}=this.subscribe();if(this._session=n,this.connection=s,this.relayEventManager=e.relayEventManager,e.diagnosticLogger&&e.eventListener)throw new Error("Can't have both eventListener and diagnosticLogger options, use only diagnosticLogger");e.eventListener?this.diagnostic={log:e.eventListener.onEvent}:this.diagnostic=e.diagnosticLogger,this._reloadOnDisconnect=(r=e.reloadOnDisconnect)!==null&&r!==void 0?r:!0,this.ui=i}subscribe(){this.subscriptions.add(this.dappDefaultChainSubject.subscribe(i=>{this.dappDefaultChain!==i&&(this.dappDefaultChain=i)}));const e=At.Session.load(this.storage)||new At.Session(this.storage).save(),r=new $4.WalletSDKConnection(e.id,e.key,this.linkAPIUrl,this.diagnostic);this.subscriptions.add(r.sessionConfig$.subscribe({next:i=>{this.onSessionConfigChanged(i)},error:()=>{var i;(i=this.diagnostic)===null||i===void 0||i.log(Ne.EVENTS.GENERAL_ERROR,{message:"error while invoking session config callback"})}})),this.subscriptions.add(r.incomingEvent$.pipe((0,_e.filter)(i=>i.event==="Web3Response")).subscribe({next:this.handleIncomingEvent})),this.subscriptions.add(r.linked$.pipe((0,_e.skip)(1),(0,_e.tap)(i=>{var s;this.isLinked=i;const o=this.storage.getItem(Zn.LOCAL_STORAGE_ADDRESSES_KEY);if(i&&(this.session.linked=i),this.isUnlinkedErrorState=!1,o){const a=o.split(" "),c=this.storage.getItem("IsStandaloneSigning")==="true";if(a[0]!==""&&!i&&this.session.linked&&!c){this.isUnlinkedErrorState=!0;const u=this.getSessionIdHash();(s=this.diagnostic)===null||s===void 0||s.log(Ne.EVENTS.UNLINKED_ERROR_STATE,{sessionIdHash:u})}}})).subscribe()),this.subscriptions.add(r.sessionConfig$.pipe((0,_e.filter)(i=>!!i.metadata&&i.metadata.__destroyed==="1")).subscribe(()=>{var i;const s=r.isDestroyed;return(i=this.diagnostic)===null||i===void 0||i.log(Ne.EVENTS.METADATA_DESTROYED,{alreadyDestroyed:s,sessionIdHash:this.getSessionIdHash()}),this.resetAndReload()})),this.subscriptions.add(r.sessionConfig$.pipe((0,_e.filter)(i=>i.metadata&&i.metadata.WalletUsername!==void 0)).pipe((0,_e.mergeMap)(i=>kt.decrypt(i.metadata.WalletUsername,e.secret))).subscribe({next:i=>{this.storage.setItem(Zn.WALLET_USER_NAME_KEY,i)},error:()=>{var i;(i=this.diagnostic)===null||i===void 0||i.log(Ne.EVENTS.GENERAL_ERROR,{message:"Had error decrypting",value:"username"})}})),this.subscriptions.add(r.sessionConfig$.pipe((0,_e.filter)(i=>i.metadata&&i.metadata.AppVersion!==void 0)).pipe((0,_e.mergeMap)(i=>kt.decrypt(i.metadata.AppVersion,e.secret))).subscribe({next:i=>{this.storage.setItem(Zn.APP_VERSION_KEY,i)},error:()=>{var i;(i=this.diagnostic)===null||i===void 0||i.log(Ne.EVENTS.GENERAL_ERROR,{message:"Had error decrypting",value:"appversion"})}})),this.subscriptions.add(r.sessionConfig$.pipe((0,_e.filter)(i=>i.metadata&&i.metadata.ChainId!==void 0&&i.metadata.JsonRpcUrl!==void 0)).pipe((0,_e.mergeMap)(i=>(0,tn.zip)(kt.decrypt(i.metadata.ChainId,e.secret),kt.decrypt(i.metadata.JsonRpcUrl,e.secret)))).pipe((0,_e.distinctUntilChanged)()).subscribe({next:([i,s])=>{this.chainCallback&&this.chainCallback(i,s)},error:()=>{var i;(i=this.diagnostic)===null||i===void 0||i.log(Ne.EVENTS.GENERAL_ERROR,{message:"Had error decrypting",value:"chainId|jsonRpcUrl"})}})),this.subscriptions.add(r.sessionConfig$.pipe((0,_e.filter)(i=>i.metadata&&i.metadata.EthereumAddress!==void 0)).pipe((0,_e.mergeMap)(i=>kt.decrypt(i.metadata.EthereumAddress,e.secret))).subscribe({next:i=>{this.accountsCallback&&this.accountsCallback([i]),nt.accountRequestCallbackIds.size>0&&(Array.from(nt.accountRequestCallbackIds.values()).forEach(s=>{const o=(0,Pe.Web3ResponseMessage)({id:s,response:(0,$e.RequestEthereumAccountsResponse)([i])});this.invokeCallback(Object.assign(Object.assign({},o),{id:s}))}),nt.accountRequestCallbackIds.clear())},error:()=>{var i;(i=this.diagnostic)===null||i===void 0||i.log(Ne.EVENTS.GENERAL_ERROR,{message:"Had error decrypting",value:"selectedAddress"})}})),this.subscriptions.add(r.sessionConfig$.pipe((0,_e.filter)(i=>i.metadata&&i.metadata.AppSrc!==void 0)).pipe((0,_e.mergeMap)(i=>kt.decrypt(i.metadata.AppSrc,e.secret))).subscribe({next:i=>{this.ui.setAppSrc(i)},error:()=>{var i;(i=this.diagnostic)===null||i===void 0||i.log(Ne.EVENTS.GENERAL_ERROR,{message:"Had error decrypting",value:"appSrc"})}}));const n=this.options.uiConstructor({linkAPIUrl:this.options.linkAPIUrl,version:this.options.version,darkMode:this.options.darkMode,session:e,connected$:r.connected$,chainId$:this.dappDefaultChainSubject});return r.connect(),{session:e,ui:n,connection:r}}attachUI(){this.ui.attach()}resetAndReload(){this.connection.setSessionMetadata("__destroyed","1").pipe((0,_e.timeout)(1e3),(0,_e.catchError)(e=>(0,tn.of)(null))).subscribe(e=>{var r,n,i;const s=this.ui.isStandalone();try{this.subscriptions.unsubscribe()}catch{(r=this.diagnostic)===null||r===void 0||r.log(Ne.EVENTS.GENERAL_ERROR,{message:"Had error unsubscribing"})}(n=this.diagnostic)===null||n===void 0||n.log(Ne.EVENTS.SESSION_STATE_CHANGE,{method:"relay::resetAndReload",sessionMetadataChange:"__destroyed, 1",sessionIdHash:this.getSessionIdHash()}),this.connection.destroy();const o=At.Session.load(this.storage);if((o==null?void 0:o.id)===this._session.id?this.storage.clear():o&&((i=this.diagnostic)===null||i===void 0||i.log(Ne.EVENTS.SKIPPED_CLEARING_SESSION,{sessionIdHash:this.getSessionIdHash(),storedSessionIdHash:At.Session.hash(o.id)})),this._reloadOnDisconnect){this.ui.reloadUI();return}this.accountsCallback&&this.accountsCallback([],!0);const{session:a,ui:c,connection:u}=this.subscribe();this._session=a,this.connection=u,this.ui=c,s&&this.ui.setStandalone&&this.ui.setStandalone(!0),this.attachUI()},e=>{var r;(r=this.diagnostic)===null||r===void 0||r.log(Ne.EVENTS.FAILURE,{method:"relay::resetAndReload",message:`failed to reset and reload with ${e}`,sessionIdHash:this.getSessionIdHash()})})}setAppInfo(e,r){this.appName=e,this.appLogoUrl=r}getStorageItem(e){return this.storage.getItem(e)}get session(){return this._session}setStorageItem(e,r){this.storage.setItem(e,r)}signEthereumMessage(e,r,n,i){return this.sendRequest({method:Ee.Web3Method.signEthereumMessage,params:{message:(0,le.hexStringFromBuffer)(e,!0),address:r,addPrefix:n,typedDataJson:i||null}})}ethereumAddressFromSignedMessage(e,r,n){return this.sendRequest({method:Ee.Web3Method.ethereumAddressFromSignedMessage,params:{message:(0,le.hexStringFromBuffer)(e,!0),signature:(0,le.hexStringFromBuffer)(r,!0),addPrefix:n}})}signEthereumTransaction(e){return this.sendRequest({method:Ee.Web3Method.signEthereumTransaction,params:{fromAddress:e.fromAddress,toAddress:e.toAddress,weiValue:(0,le.bigIntStringFromBN)(e.weiValue),data:(0,le.hexStringFromBuffer)(e.data,!0),nonce:e.nonce,gasPriceInWei:e.gasPriceInWei?(0,le.bigIntStringFromBN)(e.gasPriceInWei):null,maxFeePerGas:e.gasPriceInWei?(0,le.bigIntStringFromBN)(e.gasPriceInWei):null,maxPriorityFeePerGas:e.gasPriceInWei?(0,le.bigIntStringFromBN)(e.gasPriceInWei):null,gasLimit:e.gasLimit?(0,le.bigIntStringFromBN)(e.gasLimit):null,chainId:e.chainId,shouldSubmit:!1}})}signAndSubmitEthereumTransaction(e){return this.sendRequest({method:Ee.Web3Method.signEthereumTransaction,params:{fromAddress:e.fromAddress,toAddress:e.toAddress,weiValue:(0,le.bigIntStringFromBN)(e.weiValue),data:(0,le.hexStringFromBuffer)(e.data,!0),nonce:e.nonce,gasPriceInWei:e.gasPriceInWei?(0,le.bigIntStringFromBN)(e.gasPriceInWei):null,maxFeePerGas:e.maxFeePerGas?(0,le.bigIntStringFromBN)(e.maxFeePerGas):null,maxPriorityFeePerGas:e.maxPriorityFeePerGas?(0,le.bigIntStringFromBN)(e.maxPriorityFeePerGas):null,gasLimit:e.gasLimit?(0,le.bigIntStringFromBN)(e.gasLimit):null,chainId:e.chainId,shouldSubmit:!0}})}submitEthereumTransaction(e,r){return this.sendRequest({method:Ee.Web3Method.submitEthereumTransaction,params:{signedTransaction:(0,le.hexStringFromBuffer)(e,!0),chainId:r}})}scanQRCode(e){return this.sendRequest({method:Ee.Web3Method.scanQRCode,params:{regExp:e}})}getQRCodeUrl(){return(0,le.createQrUrl)(this._session.id,this._session.secret,this.linkAPIUrl,!1,this.options.version,this.dappDefaultChain)}genericRequest(e,r){return this.sendRequest({method:Ee.Web3Method.generic,params:{action:r,data:e}})}sendGenericMessage(e){return this.sendRequest(e)}sendRequest(e){let r=null;const n=(0,le.randomBytesHex)(8),i=o=>{this.publishWeb3RequestCanceledEvent(n),this.handleErrorResponse(n,e.method,o),r==null||r()};return{promise:new Promise((o,a)=>{this.ui.isStandalone()||(r=this.ui.showConnecting({isUnlinkedErrorState:this.isUnlinkedErrorState,onCancel:i,onResetConnection:this.resetAndReload})),this.relayEventManager.callbacks.set(n,c=>{if(r==null||r(),c.errorMessage)return a(new Error(c.errorMessage));o(c)}),this.ui.isStandalone()?this.sendRequestStandalone(n,e):this.publishWeb3RequestEvent(n,e)}),cancel:i}}setConnectDisabled(e){this.ui.setConnectDisabled(e)}setAccountsCallback(e){this.accountsCallback=e}setChainCallback(e){this.chainCallback=e}setDappDefaultChainCallback(e){this.dappDefaultChainSubject.next(e)}publishWeb3RequestEvent(e,r){var n;const i=(0,H4.Web3RequestMessage)({id:e,request:r}),s=At.Session.load(this.storage);(n=this.diagnostic)===null||n===void 0||n.log(Ne.EVENTS.WEB3_REQUEST,{eventId:i.id,method:`relay::${i.request.method}`,sessionIdHash:this.getSessionIdHash(),storedSessionIdHash:s?At.Session.hash(s.id):"",isSessionMismatched:((s==null?void 0:s.id)!==this._session.id).toString()}),this.subscriptions.add(this.publishEvent("Web3Request",i,!0).subscribe({next:o=>{var a;(a=this.diagnostic)===null||a===void 0||a.log(Ne.EVENTS.WEB3_REQUEST_PUBLISHED,{eventId:i.id,method:`relay::${i.request.method}`,sessionIdHash:this.getSessionIdHash(),storedSessionIdHash:s?At.Session.hash(s.id):"",isSessionMismatched:((s==null?void 0:s.id)!==this._session.id).toString()})},error:o=>{this.handleWeb3ResponseMessage((0,Pe.Web3ResponseMessage)({id:i.id,response:{method:i.request.method,errorMessage:o.message}}))}}))}publishWeb3RequestCanceledEvent(e){const r=(0,U4.Web3RequestCanceledMessage)(e);this.subscriptions.add(this.publishEvent("Web3RequestCanceled",r,!1).subscribe())}publishEvent(e,r,n){const i=this.session.secret;return new tn.Observable(s=>{kt.encrypt(JSON.stringify(Object.assign(Object.assign({},r),{origin:location.origin})),i).then(o=>{s.next(o),s.complete()})}).pipe((0,_e.mergeMap)(s=>this.connection.publishEvent(e,s,n)))}handleIncomingEvent(e){try{this.subscriptions.add(kt.decrypt(e.data,this.session.secret).pipe((0,_e.map)(r=>JSON.parse(r))).subscribe({next:r=>{const n=(0,Pe.isWeb3ResponseMessage)(r)?r:null;!n||this.handleWeb3ResponseMessage(n)},error:()=>{var r;(r=this.diagnostic)===null||r===void 0||r.log(Ne.EVENTS.GENERAL_ERROR,{message:"Had error decrypting",value:"incomingEvent"})}}))}catch{return}}handleWeb3ResponseMessage(e){var r;const{response:n}=e;if((r=this.diagnostic)===null||r===void 0||r.log(Ne.EVENTS.WEB3_RESPONSE,{eventId:e.id,method:`relay::${n.method}`,sessionIdHash:this.getSessionIdHash()}),(0,$e.isRequestEthereumAccountsResponse)(n)){nt.accountRequestCallbackIds.forEach(i=>this.invokeCallback(Object.assign(Object.assign({},e),{id:i}))),nt.accountRequestCallbackIds.clear();return}this.invokeCallback(e)}handleErrorResponse(e,r,n,i){this.handleWeb3ResponseMessage((0,Pe.Web3ResponseMessage)({id:e,response:(0,$e.ErrorResponse)(r,(n!=null?n:aa.WalletUIError.UserRejectedRequest).message,i)}))}invokeCallback(e){const r=this.relayEventManager.callbacks.get(e.id);r&&(r(e.response),this.relayEventManager.callbacks.delete(e.id))}requestEthereumAccounts(){const e={method:Ee.Web3Method.requestEthereumAccounts,params:{appName:this.appName,appLogoUrl:this.appLogoUrl||null}},r=(0,le.randomBytesHex)(8),n=s=>{this.publishWeb3RequestCanceledEvent(r),this.handleErrorResponse(r,e.method,s)};return{promise:new Promise((s,o)=>{var a;this.relayEventManager.callbacks.set(r,u=>{if(this.ui.hideRequestEthereumAccounts(),u.errorMessage)return o(new Error(u.errorMessage));s(u)});const c=((a=window==null?void 0:window.navigator)===null||a===void 0?void 0:a.userAgent)||null;if(c&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(c)){let u;try{(0,le.isInIFrame)()&&window.top?u=window.top.location:u=window.location}catch{u=window.location}u.href=`https://www.coinbase.com/connect-dapp?uri=${encodeURIComponent(u.href)}`;return}if(this.ui.inlineAccountsResponse()){const u=l=>{this.handleWeb3ResponseMessage((0,Pe.Web3ResponseMessage)({id:r,response:(0,$e.RequestEthereumAccountsResponse)(l)}))};this.ui.requestEthereumAccounts({onCancel:n,onAccounts:u})}else{const u=yl.ethErrors.provider.userRejectedRequest("User denied account authorization");this.ui.requestEthereumAccounts({onCancel:()=>n(u)})}nt.accountRequestCallbackIds.add(r),!this.ui.inlineAccountsResponse()&&!this.ui.isStandalone()&&this.publishWeb3RequestEvent(r,e)}),cancel:n}}selectProvider(e){const r={method:Ee.Web3Method.selectProvider,params:{providerOptions:e}},n=(0,le.randomBytesHex)(8),i=o=>{this.publishWeb3RequestCanceledEvent(n),this.handleErrorResponse(n,r.method,o)},s=new Promise((o,a)=>{this.relayEventManager.callbacks.set(n,l=>{if(l.errorMessage)return a(new Error(l.errorMessage));o(l)});const c=l=>{this.handleWeb3ResponseMessage((0,Pe.Web3ResponseMessage)({id:n,response:(0,$e.SelectProviderResponse)(W4.ProviderType.Unselected)}))},u=l=>{this.handleWeb3ResponseMessage((0,Pe.Web3ResponseMessage)({id:n,response:(0,$e.SelectProviderResponse)(l)}))};this.ui.selectProvider&&this.ui.selectProvider({onApprove:u,onCancel:c,providerOptions:e})});return{cancel:i,promise:s}}watchAsset(e,r,n,i,s,o){const a={method:Ee.Web3Method.watchAsset,params:{type:e,options:{address:r,symbol:n,decimals:i,image:s},chainId:o}};let c=null;const u=(0,le.randomBytesHex)(8),l=f=>{this.publishWeb3RequestCanceledEvent(u),this.handleErrorResponse(u,a.method,f),c==null||c()};this.ui.inlineWatchAsset()||(c=this.ui.showConnecting({isUnlinkedErrorState:this.isUnlinkedErrorState,onCancel:l,onResetConnection:this.resetAndReload}));const g=new Promise((f,p)=>{this.relayEventManager.callbacks.set(u,k=>{if(c==null||c(),k.errorMessage)return p(new Error(k.errorMessage));f(k)});const y=k=>{this.handleWeb3ResponseMessage((0,Pe.Web3ResponseMessage)({id:u,response:(0,$e.WatchAssetReponse)(!1)}))},E=()=>{this.handleWeb3ResponseMessage((0,Pe.Web3ResponseMessage)({id:u,response:(0,$e.WatchAssetReponse)(!0)}))};this.ui.inlineWatchAsset()&&this.ui.watchAsset({onApprove:E,onCancel:y,type:e,address:r,symbol:n,decimals:i,image:s,chainId:o}),!this.ui.inlineWatchAsset()&&!this.ui.isStandalone()&&this.publishWeb3RequestEvent(u,a)});return{cancel:l,promise:g}}addEthereumChain(e,r,n,i,s,o){const a={method:Ee.Web3Method.addEthereumChain,params:{chainId:e,rpcUrls:r,blockExplorerUrls:i,chainName:s,iconUrls:n,nativeCurrency:o}};let c=null;const u=(0,le.randomBytesHex)(8),l=f=>{this.publishWeb3RequestCanceledEvent(u),this.handleErrorResponse(u,a.method,f),c==null||c()};return this.ui.inlineAddEthereumChain(e)||(c=this.ui.showConnecting({isUnlinkedErrorState:this.isUnlinkedErrorState,onCancel:l,onResetConnection:this.resetAndReload})),{promise:new Promise((f,p)=>{this.relayEventManager.callbacks.set(u,k=>{if(c==null||c(),k.errorMessage)return p(new Error(k.errorMessage));f(k)});const y=k=>{this.handleWeb3ResponseMessage((0,Pe.Web3ResponseMessage)({id:u,response:(0,$e.AddEthereumChainResponse)({isApproved:!1,rpcUrl:""})}))},E=k=>{this.handleWeb3ResponseMessage((0,Pe.Web3ResponseMessage)({id:u,response:(0,$e.AddEthereumChainResponse)({isApproved:!0,rpcUrl:k})}))};this.ui.inlineAddEthereumChain(e)&&this.ui.addEthereumChain({onCancel:y,onApprove:E,chainId:a.params.chainId,rpcUrls:a.params.rpcUrls,blockExplorerUrls:a.params.blockExplorerUrls,chainName:a.params.chainName,iconUrls:a.params.iconUrls,nativeCurrency:a.params.nativeCurrency}),!this.ui.inlineAddEthereumChain(e)&&!this.ui.isStandalone()&&this.publishWeb3RequestEvent(u,a)}),cancel:l}}switchEthereumChain(e,r){const n={method:Ee.Web3Method.switchEthereumChain,params:Object.assign({chainId:e},{address:r})},i=(0,le.randomBytesHex)(8),s=a=>{this.publishWeb3RequestCanceledEvent(i),this.handleErrorResponse(i,n.method,a)};return{promise:new Promise((a,c)=>{this.relayEventManager.callbacks.set(i,g=>{if(g.errorMessage&&g.errorCode)return c(yl.ethErrors.provider.custom({code:g.errorCode,message:"Unrecognized chain ID. Try adding the chain using addEthereumChain first."}));if(g.errorMessage)return c(new Error(g.errorMessage));a(g)});const u=g=>{if(typeof g=="number"){const f=g;this.handleWeb3ResponseMessage((0,Pe.Web3ResponseMessage)({id:i,response:(0,$e.ErrorResponse)(Ee.Web3Method.switchEthereumChain,aa.WalletUIError.SwitchEthereumChainUnsupportedChainId.message,f)}))}else g instanceof aa.WalletUIError?this.handleErrorResponse(i,Ee.Web3Method.switchEthereumChain,g,g.errorCode):this.handleWeb3ResponseMessage((0,Pe.Web3ResponseMessage)({id:i,response:(0,$e.SwitchEthereumChainResponse)({isApproved:!1,rpcUrl:""})}))},l=g=>{this.handleWeb3ResponseMessage((0,Pe.Web3ResponseMessage)({id:i,response:(0,$e.SwitchEthereumChainResponse)({isApproved:!0,rpcUrl:g})}))};this.ui.switchEthereumChain({onCancel:u,onApprove:l,chainId:n.params.chainId,address:n.params.address}),!this.ui.inlineSwitchEthereumChain()&&!this.ui.isStandalone()&&this.publishWeb3RequestEvent(i,n)}),cancel:s}}inlineAddEthereumChain(e){return this.ui.inlineAddEthereumChain(e)}getSessionIdHash(){return At.Session.hash(this._session.id)}sendRequestStandalone(e,r){const n=s=>{this.handleErrorResponse(e,r.method,s)},i=s=>{this.handleWeb3ResponseMessage((0,Pe.Web3ResponseMessage)({id:e,response:s}))};switch(r.method){case Ee.Web3Method.signEthereumMessage:this.ui.signEthereumMessage({request:r,onSuccess:i,onCancel:n});break;case Ee.Web3Method.signEthereumTransaction:this.ui.signEthereumTransaction({request:r,onSuccess:i,onCancel:n});break;case Ee.Web3Method.submitEthereumTransaction:this.ui.submitEthereumTransaction({request:r,onSuccess:i,onCancel:n});break;case Ee.Web3Method.ethereumAddressFromSignedMessage:this.ui.ethereumAddressFromSignedMessage({request:r,onSuccess:i});break;default:n();break}}onSessionConfigChanged(e){}}nt.accountRequestCallbackIds=new Set;_d([wd.default],nt.prototype,"resetAndReload",null);_d([wd.default],nt.prototype,"handleIncomingEvent",null);hs.WalletSDKRelay=nt;var _s={};Object.defineProperty(_s,"__esModule",{value:!0});_s.WalletSDKRelayEventManager=void 0;const V4=B;class z4{constructor(){this._nextRequestId=0,this.callbacks=new Map}makeRequestId(){this._nextRequestId=(this._nextRequestId+1)%2147483647;const e=this._nextRequestId,r=(0,V4.prepend0x)(e.toString(16));return this.callbacks.get(r)&&this.callbacks.delete(r),e}}_s.WalletSDKRelayEventManager=z4;const q4="@coinbase/wallet-sdk",G4="3.6.0",Q4="Coinbase Wallet JavaScript SDK",Z4=["cipher","cipherbrowser","coinbase","coinbasewallet","eth","ether","ethereum","etherium","injection","toshi","wallet","walletlink","web3"],Y4="dist/index.js",K4="dist/index.d.ts",J4="https://github.com/coinbase/coinbase-wallet-sdk.git",X4="Coinbase, Inc.",e3="Apache-2.0",t3={"pretest:unit":"node compile-assets.js","test:unit":"jest","test:unit:coverage":"yarn test:unit && open coverage/lcov-report/index.html","test:karma":"yarn build-npm && karma start",prebuild:`node -p "'export const LIB_VERSION = ' + JSON.stringify(require('./package.json').version) + ';'" > src/version.ts`,build:"node compile-assets.js && webpack --config webpack.config.js","build-npm":"tsc -p ./tsconfig.build.json","build:dev":"export LINK_API_URL='http://localhost:3000'; yarn build","build:dev:watch":"nodemon -e 'ts,tsx,js,json,css,scss,svg' --ignore 'src/**/*-css.ts' --ignore 'src/**/*-svg.ts' --watch src/ --exec 'yarn build:dev'","build:prod":`yarn prebuild && yarn build && yarn build-npm && cp ./package.json ../../README.md ./LICENSE build/npm && cp -a src/vendor-js build/npm/dist && sed -i.bak 's|  "private": true,||g' build/npm/package.json && rm -f build/npm/package.json.bak`,"lint:types":"tsc --noEmit","lint:prettier":'prettier --check "{src,__tests__}/**/*.(js|ts|tsx)"',"lint:eslint":"eslint ./src --ext .ts,.tsx",lint:"yarn lint:eslint && yarn lint:types && yarn lint:prettier","fix:eslint":"yarn lint:eslint --fix","fix:prettier":"prettier . --write",release:"./scripts/release.sh"},r3={"@metamask/safe-event-emitter":"2.0.0","@solana/web3.js":"1.52.0","bind-decorator":"^1.0.11","bn.js":"^5.1.1",buffer:"^6.0.3",clsx:"^1.1.0","eth-block-tracker":"4.4.3","eth-json-rpc-filters":"4.2.2","eth-rpc-errors":"4.0.2","json-rpc-engine":"6.1.0",keccak:"^3.0.1",preact:"^10.5.9",qs:"^6.10.3",rxjs:"^6.6.3","sha.js":"^2.4.11","stream-browserify":"^3.0.0",util:"^0.12.4"},n3={"@babel/core":"^7.17.9","@babel/plugin-proposal-decorators":"^7.17.9","@babel/plugin-transform-react-jsx":"^7.17.3","@babel/preset-env":"^7.16.11","@babel/preset-typescript":"^7.16.7","@peculiar/webcrypto":"^1.3.3","@testing-library/jest-dom":"^5.16.4","@testing-library/preact":"^2.0.1","@types/bn.js":"^4.11.6","@types/jest":"^27.4.1","@types/node":"^14.14.20","@types/qs":"^6.9.7","@types/sha.js":"^2.4.0","@typescript-eslint/eslint-plugin":"^5.7.0","@typescript-eslint/eslint-plugin-tslint":"^5.7.0","@typescript-eslint/parser":"^5.7.0","babel-jest":"^27.5.1",browserify:"17.0.0","copy-webpack-plugin":"^6.4.1","core-js":"^3.8.2",eslint:"^8.4.1","eslint-config-prettier":"^8.3.0","eslint-plugin-import":"^2.25.3","eslint-plugin-preact":"^0.1.0","eslint-plugin-prettier":"^4.0.0","eslint-plugin-simple-import-sort":"^7.0.0",jasmine:"3.8.0",jest:"^27.5.1","jest-chrome":"^0.7.2","jest-websocket-mock":"^2.3.0",karma:"^6.3.15","karma-browserify":"8.1.0","karma-chrome-launcher":"^3.1.0","karma-jasmine":"^4.0.1",nodemon:"^2.0.6",prettier:"^2.5.1","raw-loader":"^4.0.2","regenerator-runtime":"^0.13.7",sass:"^1.50.0",svgo:"^2.8.0","ts-jest":"^27.1.4","ts-loader":"^8.0.13","ts-node":"^10.7.0",tslib:"^2.0.3",typescript:"^4.1.3",watchify:"4.0.0",webpack:"^5.72.0","webpack-cli":"^4.9.2","whatwg-fetch":"^3.5.0"},i3={node:">= 10.0.0"},s3={name:q4,version:G4,description:Q4,keywords:Z4,main:Y4,types:K4,repository:J4,author:X4,license:e3,scripts:t3,dependencies:r3,devDependencies:n3,engines:i3};Object.defineProperty(fn,"__esModule",{value:!0});fn.CoinbaseWalletSDK=void 0;const o3=xi,a3=Ci,c3=Sr,u3=Ki,l3=hs,f3=_s,h3=B,d3=process.env.LINK_API_URL||"https://www.walletlink.org",Sd=process.env.SDK_VERSION||s3.version||"unknown";class ws{constructor(e){var r,n,i;this._appName="",this._appLogoUrl=null,this._relay=null,this._relayEventManager=null;const s=e.linkAPIUrl||d3;let o;if(e.uiConstructor?o=e.uiConstructor:o=u=>new u3.WalletSDKUI(u),typeof e.overrideIsMetaMask>"u"?this._overrideIsMetaMask=!1:this._overrideIsMetaMask=e.overrideIsMetaMask,this._overrideIsCoinbaseWallet=(r=e.overrideIsCoinbaseWallet)!==null&&r!==void 0?r:!0,this._overrideIsCoinbaseBrowser=(n=e.overrideIsCoinbaseBrowser)!==null&&n!==void 0?n:!1,e.diagnosticLogger&&e.eventListener)throw new Error("Can't have both eventListener and diagnosticLogger options, use only diagnosticLogger");e.eventListener?this._diagnosticLogger={log:e.eventListener.onEvent}:this._diagnosticLogger=e.diagnosticLogger,this._reloadOnDisconnect=(i=e.reloadOnDisconnect)!==null&&i!==void 0?i:!0;const a=new URL(s),c=`${a.protocol}//${a.host}`;this._storage=new a3.ScopedLocalStorage(`-walletlink:${c}`),this._storage.setItem("version",ws.VERSION),!(this.walletExtension||this.coinbaseBrowser)&&(this._relayEventManager=new f3.WalletSDKRelayEventManager,this._relay=new l3.WalletSDKRelay({linkAPIUrl:s,version:Sd,darkMode:!!e.darkMode,uiConstructor:o,storage:this._storage,relayEventManager:this._relayEventManager,diagnosticLogger:this._diagnosticLogger}),this.setAppInfo(e.appName,e.appLogoUrl),!e.headlessMode&&this._relay.attachUI())}makeWeb3Provider(e="",r=1){const n=this.walletExtension;if(n)return this.isCipherProvider(n)||n.setProviderInfo(e,r),this._reloadOnDisconnect===!1&&typeof n.disableReloadOnDisconnect=="function"&&n.disableReloadOnDisconnect(),n;const i=this.coinbaseBrowser;if(i)return i;const s=this._relay;if(!s||!this._relayEventManager||!this._storage)throw new Error("Relay not initialized, should never happen");return e||s.setConnectDisabled(!0),new c3.CoinbaseWalletProvider({relayProvider:()=>Promise.resolve(s),relayEventManager:this._relayEventManager,storage:this._storage,jsonRpcUrl:e,chainId:r,qrUrl:this.getQrUrl(),diagnosticLogger:this._diagnosticLogger,overrideIsMetaMask:this._overrideIsMetaMask,overrideIsCoinbaseWallet:this._overrideIsCoinbaseWallet,overrideIsCoinbaseBrowser:this._overrideIsCoinbaseBrowser})}setAppInfo(e,r){var n;this._appName=e||"DApp",this._appLogoUrl=r||(0,h3.getFavicon)();const i=this.walletExtension;i?this.isCipherProvider(i)||i.setAppInfo(this._appName,this._appLogoUrl):(n=this._relay)===null||n===void 0||n.setAppInfo(this._appName,this._appLogoUrl)}disconnect(){var e;const r=this.walletExtension;r?r.close():(e=this._relay)===null||e===void 0||e.resetAndReload()}getQrUrl(){var e,r;return(r=(e=this._relay)===null||e===void 0?void 0:e.getQRCodeUrl())!==null&&r!==void 0?r:null}getCoinbaseWalletLogo(e,r=240){return(0,o3.walletLogo)(e,r)}get walletExtension(){var e;return(e=window.coinbaseWalletExtension)!==null&&e!==void 0?e:window.walletLinkExtension}get coinbaseBrowser(){var e,r;try{const n=(e=window.ethereum)!==null&&e!==void 0?e:(r=window.top)===null||r===void 0?void 0:r.ethereum;return n&&"isCoinbaseBrowser"in n&&n.isCoinbaseBrowser?n:void 0}catch{return}}isCipherProvider(e){return typeof e.isCipher=="boolean"&&e.isCipher}}fn.CoinbaseWalletSDK=ws;ws.VERSION=Sd;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.CoinbaseWalletProvider=t.CoinbaseWalletSDK=void 0;const e=fn,r=Sr;var n=fn;Object.defineProperty(t,"CoinbaseWalletSDK",{enumerable:!0,get:function(){return n.CoinbaseWalletSDK}});var i=Sr;Object.defineProperty(t,"CoinbaseWalletProvider",{enumerable:!0,get:function(){return i.CoinbaseWalletProvider}}),t.default=e.CoinbaseWalletSDK,typeof window<"u"&&(window.CoinbaseWalletSDK=e.CoinbaseWalletSDK,window.CoinbaseWalletProvider=r.CoinbaseWalletProvider,window.WalletLink=e.CoinbaseWalletSDK,window.WalletLinkProvider=r.CoinbaseWalletProvider)})(La);const p3=Cd(La),v3=kd({__proto__:null,default:p3},[La]);export{v3 as i};
